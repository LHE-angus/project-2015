<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="YWT_TASK_RECEIVE">

	<typeAlias alias="ywtTaskReceive" type="com.ebiz.mmt.domain.YwtTaskReceive" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertYwtTaskReceive" />
		<flushOnExecute statement="updateYwtTaskReceive" />
		<flushOnExecute statement="deleteYwtTaskReceive" />
	</cacheModel>

	<resultMap id="ywtTaskReceiveResultForList" class="ywtTaskReceive">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="USER_ID" property="user_id" jdbcType="DECIMAL" />
		<result column="ROLE_ID" property="role_id" jdbcType="DECIMAL" />
		<result column="TASK_ID" property="task_id" jdbcType="DECIMAL" />
		<result column="TASK_NAME" property="task_name" jdbcType="VARCHAR" />
		<result column="ADD_DATE" property="add_date" jdbcType="TIMESTAMP" />
		<result column="IS_RECEIVE" property="is_receive" jdbcType="DECIMAL" />
		<result column="STATE" property="state" jdbcType="DECIMAL" />
		<result column="AUDIT_STATE" property="audit_state" jdbcType="DECIMAL" />
		<result column="AUDIT_USER_ID" property="audit_user_id" jdbcType="DECIMAL" />
		<result column="AUDIT_NAME" property="audit_name" jdbcType="VARCHAR" />
		<result column="AUDIT_INFO" property="audit_info" jdbcType="VARCHAR" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="REVE_FINSH_DATE" property="reve_finsh_date" jdbcType="TIMESTAMP" />
		<result column="AUDIT_DATE" property="audit_date" jdbcType="TIMESTAMP" />
		<result column="RECEIVE_INFO" property="receive_info" jdbcType="VARCHAR" />
		<result column="COMPLETE_INFO" property="complete_info" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="ywtTaskReceiveResult" class="ywtTaskReceive" extends="ywtTaskReceiveResultForList">
	</resultMap>
	
	<resultMap id="ywtTaskReceiveLBResult" class="ywtTaskReceive" extends="ywtTaskReceiveResultForList">
		<result column="user_name" property="map.user_name" jdbcType="VARCHAR" />
		<result column="fgs_Dept" property="map.fgs_Dept" jdbcType="VARCHAR" />
		<result column="BEGIN_DATE" property="map.begin_date" jdbcType="TIMESTAMP" />
		<result column="FINSH_DATE" property="map.finsh_date" jdbcType="TIMESTAMP" />
		<result column="fj_paths" property="map.fj_paths" jdbcType="VARCHAR" />
		<result column="sub_task_count" property="map.sub_task_count" jdbcType="VARCHAR" />
		<result column="PAR_TASK_ID" property="map.par_task_id" jdbcType="TIMESTAMP" />
		<result column="PAR_TASK_NAME" property="map.par_task_name" jdbcType="VARCHAR" />
		<result column="send_Task_User_Id" property="map.send_task_user_id" jdbcType="DECIMAL" />
		<result column="my_self_user_id" property="map.my_self_user_id" jdbcType="DECIMAL" />
		<result column="send_task_id" property="map.send_task_id" jdbcType="DECIMAL" />
		<result column="PRIORITY" property="map.priority" jdbcType="VARCHAR" />
		<result column="MEMO" property="map.memo" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="sf-ywtTaskReceive">
		<isNotEmpty prepend=" and " property="id">ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="user_id">USER_ID = #user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="role_id">ROLE_ID = #role_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="task_id">TASK_ID = #task_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="task_name">TASK_NAME = #task_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_receive">IS_RECEIVE = #is_receive:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="state">STATE = #state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_state">AUDIT_STATE = #audit_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_user_id">AUDIT_USER_ID = #audit_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_name">AUDIT_NAME = #audit_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_info">AUDIT_INFO = #audit_info:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="reve_finsh_date">REVE_FINSH_DATE = #reve_finsh_date:TIMESTAMP#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_date">AUDIT_DATE = #audit_date:TIMESTAMP#</isNotEmpty>
	</sql>

	<sql id="sf-ywtTaskReceiveLB">
			<isNotEmpty prepend=" and " property="id">receive.ID = #id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="user_id">receive.USER_ID = #user_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="role_id">receive.ROLE_ID = #role_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="task_id">receive.TASK_ID = #task_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="task_name">receive.TASK_NAME = #task_name:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="add_date">receive.ADD_DATE = #add_date:TIMESTAMP#</isNotEmpty>
			<isNotEmpty prepend=" and " property="is_receive">receive.IS_RECEIVE = #is_receive:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="state">receive.STATE = #state:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="audit_state">receive.AUDIT_STATE = #audit_state:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="audit_user_id">receive.AUDIT_USER_ID = #audit_user_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="audit_name">receive.AUDIT_NAME = #audit_name:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="audit_info">receive.AUDIT_INFO = #audit_info:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="dept_id">receive.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="reve_finsh_date">receive.REVE_FINSH_DATE = #reve_finsh_date:TIMESTAMP#</isNotEmpty>
		    <isNotEmpty prepend=" and " property="audit_date">receive.AUDIT_DATE = #audit_date:TIMESTAMP#</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._fgs_dept_id">
			   dept.L4_DEPT_ID = #map._fgs_dept_id:DECIMAL#
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._reve_real_name_like">
			   receive.USER_ID in(select reve_user.ID from KONKA_PE_PROD_USER reve_user where reve_user.REAL_NAME like '%' || #map._reve_real_name_like:VARCHAR# || '%') 
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._task_name_like">
			   receive.TASK_NAME like '%' || #map._task_name_like:VARCHAR# || '%'
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._par_task_name_like">
			   task.PAR_TASK_NAME like '%' || #map._par_task_name_like:VARCHAR# || '%'
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._task_id">
			   task.ID = #map._task_id:DECIMAL#
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="map._begin_add_date">
                 <![CDATA[ receive.ADD_DATE >= to_date (#map._begin_add_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
            </isNotEmpty>
		    <isNotEmpty prepend=" and " property="map._end_add_date">
		         <![CDATA[ receive.ADD_DATE <= to_date (#map._end_add_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
		    </isNotEmpty>
		    
		    <isNotEmpty prepend=" and " property="map._begin_reve_finsh_date">
                 <![CDATA[ receive.REVE_FINSH_DATE >= to_date (#map._begin_reve_finsh_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
            </isNotEmpty>
		    <isNotEmpty prepend=" and " property="map._end_reve_finsh_date">
		         <![CDATA[ receive.REVE_FINSH_DATE <= to_date (#map._end_reve_finsh_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
		    </isNotEmpty>
		    
		    <isNotEmpty prepend=" and " property="map._begin_audit_date">
                 <![CDATA[ receive.AUDIT_DATE >= to_date (#map._begin_audit_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
            </isNotEmpty>
		    <isNotEmpty prepend=" and " property="map._end_audit_date">
		         <![CDATA[ receive.AUDIT_DATE <= to_date (#map._end_audit_date:VARCHAR#, 'yyyy-mm-dd hh24:mi:ss') ]]>
		    </isNotEmpty>
<!--接收状态-->
            <isNotEmpty prepend=" and " property="map.is_receive">
				receive.IS_RECEIVE in
				<iterate close=")" open="(" conjunction="," property="map.is_receive">#map.is_receive[]#</iterate>
			</isNotEmpty>	
			<isEmpty prepend="  " property="map.is_receive">
				<isNotEmpty prepend=" and " property="map.is_receive_temp">
					receive.IS_RECEIVE in
					<iterate close=")" open="(" conjunction="," property="map.is_receive_temp">#map.is_receive_temp[]#</iterate>
				</isNotEmpty>
			</isEmpty>	
<!-- 审核状态   -->
		     <isNotEmpty prepend=" and " property="map.audit_state">
				receive.AUDIT_STATE in
				<iterate close=")" open="(" conjunction="," property="map.audit_state">#map.audit_state[]#</iterate>
			</isNotEmpty>
			<isEmpty prepend="  " property="map.audit_state">
				<isNotEmpty prepend=" and " property="map.audit_state_temp">
					receive.AUDIT_STATE in
					<iterate close=")" open="(" conjunction="," property="map.audit_state_temp">#map.audit_state_temp[]#</iterate>
			    </isNotEmpty>
			</isEmpty>
<!--完成状态-->
			 <isNotEmpty prepend=" and " property="map.state">
				receive.STATE in
				<iterate close=")" open="(" conjunction="," property="map.state">#map.state[]#</iterate>
			</isNotEmpty>	
			 <isEmpty prepend="  " property="map.state">
				  <isNotEmpty prepend=" and " property="map.state_temp">
					receive.STATE in
					<iterate close=")" open="(" conjunction="," property="map.state_temp">#map.state_temp[]#</iterate>
			    </isNotEmpty>
			</isEmpty>
			
		    <isNotEmpty prepend=" and " property="map.dept_id_start">
			      ( receive.USER_ID IN
			              (SELECT deptDownUser.ID
			                 FROM KONKA_PE_PROD_USER deptDownUser
			                WHERE deptDownUser.DEPT_ID IN
			                         (SELECT dept_id
			                            FROM konka_dept
			                          START WITH dept_id IN
			                                        (SELECT DISTINCT (dept_id)
			                                           FROM KONKA_ROLE_DATA_LEVEL
			                                          WHERE role_id IN
			                                                   (SELECT role_id
			                                                      FROM KONKA_PE_ROLE_USER
			                                                     WHERE user_id = #map.session_user_id:DECIMAL#))
			                                     OR dept_id = #map.dept_id_start#
			                          CONNECT BY PRIOR dept_id = par_id))
			       OR receive.USER_ID = #map.session_user_id:DECIMAL#  )
			 </isNotEmpty>
	</sql>
	<select id="selectYwtTaskReceive" resultMap="ywtTaskReceiveResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		select * from YWT_TASK_RECEIVE where 1 = 1
		<include refid="sf-ywtTaskReceive" />
	</select>
	<select id="selectYwtTaskReceiveTaskName" resultMap="ywtTaskReceiveResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		select * from YWT_TASK_RECEIVE where 1 = 1
				<isNotEmpty prepend=" and " property="user_id">USER_ID = #user_id:DECIMAL#</isNotEmpty>
				<isNotEmpty prepend=" and " property="task_id">TASK_ID = #task_id:DECIMAL#</isNotEmpty>
	</select>

	<select id="selectYwtTaskReceiveList" resultMap="ywtTaskReceiveResultForList" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from YWT_TASK_RECEIVE where 1 = 1
		<include refid="sf-ywtTaskReceive" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectYwtTaskReceiveCount" resultClass="long" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		select count(*) from YWT_TASK_RECEIVE where 1 = 1
		<include refid="sf-ywtTaskReceive" />
	</select>

	<select id="selectYwtTaskReceivePaginatedList" resultMap="ywtTaskReceiveResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from YWT_TASK_RECEIVE where 1 = 1
		<include refid="sf-ywtTaskReceive" />
		<!-- order by ID asc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectYwtTaskReceiveLBCount" resultClass="long" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		SELECT count(*)
        FROM YWT_TASK_RECEIVE receive
         LEFT JOIN YWT_TASK task
          ON receive.TASK_ID = task.ID
         LEFT JOIN  KONKA_BASE_TYPE_DATA base_type  
          ON task.TASK_TYPE = base_type.TYPE_ID
         LEFT JOIN KONKA_PE_PROD_USER reveuser
          ON receive.USER_ID = reveuser.ID
         LEFT JOIN V_ORG_OF_DEPT dept
          ON receive.DEPT_ID = dept.CUR_DEPT_ID
        WHERE 1=1
        and( task.IS_DEL = 0
		<include refid="sf-ywtTaskReceiveLB" />
		 ) 
		 and ( 1=1
		 <isNotEmpty prepend=" or " property="map.session_user_id">
		      task.USER_ID=#map.session_user_id:DECIMAL# 
		</isNotEmpty>
		)
		
	</select>

	<select id="selectYwtTaskReceiveLBPaginatedList" resultMap="ywtTaskReceiveLBResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT receive.*,
          reveuser.REAL_NAME user_name,
          dept.DEPT_NAME fgs_Dept,
          task.BEGIN_DATE,
          task.FINSH_DATE,
          task.PRIORITY,
          base_type.MEMO,
          task.PAR_TASK_ID,
          task.PAR_TASK_NAME,
           task.ID send_task_id,
           task.user_id send_task_user_id,
           #map.my_self_user_id:DECIMAL# my_self_user_id,
          (SELECT count (*)
             FROM YWT_TASK subtask
             WHERE subtask.PAR_TASK_ID = receive.TASK_ID)
           AS sub_task_count,
          (select
            listagg(f.save_path, ',') within group (order by
            f.LINK_ID)
            from
            ATTACHMENT f
            where
            f.LINK_TAB='YWT_TASK' and f.DEL_MARK =0 and
            f.LINK_ID=task.ID
            group by
            LINK_ID ) fj_paths
       FROM YWT_TASK_RECEIVE receive
         LEFT JOIN YWT_TASK task
          ON receive.TASK_ID = task.ID
         LEFT JOIN  KONKA_BASE_TYPE_DATA base_type  
          ON task.TASK_TYPE = base_type.TYPE_ID
         LEFT JOIN KONKA_PE_PROD_USER reveuser
          ON receive.USER_ID = reveuser.ID
         LEFT JOIN V_ORG_OF_DEPT dept
          ON receive.DEPT_ID = dept.CUR_DEPT_ID
        WHERE 1=1
        and( task.IS_DEL = 0
		<include refid="sf-ywtTaskReceiveLB" />
		 ) 
		 and ( 1=1
		 <isNotEmpty prepend=" or " property="map.session_user_id">
		      task.USER_ID=#map.session_user_id:DECIMAL# 
		</isNotEmpty>
		)
		
		 order by task.BEGIN_DATE desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
<!--         查找子任务-->
    <select id="selectSubTaskList" resultMap="ywtTaskReceiveLBResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
	<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT receive.*,
          reveuser.REAL_NAME user_name,
          dept.L4_DEPT_NAME fgs_Dept,
          task.BEGIN_DATE,
          task.FINSH_DATE,
          task.PAR_TASK_ID,
          task.PAR_TASK_NAME,
          task.PRIORITY,
          base_type.MEMO,
          task.ID send_task_id,
           task.user_id send_task_user_id,
           #map.my_self_user_id:DECIMAL# my_self_user_id,
          (SELECT count (*)
             FROM YWT_TASK subtask
             WHERE subtask.PAR_TASK_ID = receive.TASK_ID)
           AS sub_task_count,
          (select
            listagg(f.save_path, ',') within group (order by
            f.LINK_ID)
            from
            ATTACHMENT f
            where
            f.LINK_TAB='YWT_TASK' and f.DEL_MARK =0 and
            f.LINK_ID=task.ID
            group by
            LINK_ID ) fj_paths
       FROM YWT_TASK_RECEIVE receive
         LEFT JOIN YWT_TASK task
          ON receive.TASK_ID = task.ID
         LEFT JOIN  KONKA_BASE_TYPE_DATA base_type  
          ON task.TASK_TYPE = base_type.TYPE_ID
         LEFT JOIN KONKA_PE_PROD_USER reveuser
          ON receive.USER_ID = reveuser.ID
         LEFT JOIN V_ORG_OF_DEPT dept
          ON receive.DEPT_ID = dept.CUR_DEPT_ID
        WHERE 1=1   and base_type.IS_DEL=0 
        <isNotEmpty prepend=" and " property="map.par_task_id">            
                  task.PAR_TASK_ID = #map.par_task_id:DECIMAL#  
        </isNotEmpty>
		 order by task.BEGIN_DATE desc
		 <![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>


  <!--我的当前任务 下发人数-->
 <select id="selectCurTaskSub" resultMap="ywtTaskReceiveResult" parameterClass="ywtTaskReceive" cacheModel="oneDayCache">
	  SELECT revece.*
	  FROM    YWT_TASK_RECEIVE revece
       LEFT JOIN
          YWT_TASK task
       ON revece.TASK_ID = task.ID
     WHERE 1 = 1 
     <isNotEmpty prepend=" and " property="map.cur_task_id">
                task.PAR_TASK_ID=#map.cur_task_id:DECIMAL#
     </isNotEmpty>
 </select>

	<insert id="insertYwtTaskReceive" parameterClass="ywtTaskReceive">
		<selectKey resultClass="long" keyProperty="id">select YWT_TASK_RECEIVE_SEQ.nextval as id from dual </selectKey>
		<![CDATA[insert into YWT_TASK_RECEIVE (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="user_id">USER_ID</isNotNull>	
			<isNotNull prepend="," property="role_id">ROLE_ID</isNotNull>	
			<isNotNull prepend="," property="task_id">TASK_ID</isNotNull>	
			<isNotNull prepend="," property="task_name">TASK_NAME</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="is_receive">IS_RECEIVE</isNotNull>	
			<isNotNull prepend="," property="state">STATE</isNotNull>	
			<isNotNull prepend="," property="audit_state">AUDIT_STATE</isNotNull>	
			<isNotNull prepend="," property="audit_user_id">AUDIT_USER_ID</isNotNull>	
			<isNotNull prepend="," property="audit_name">AUDIT_NAME</isNotNull>	
			<isNotNull prepend="," property="audit_info">AUDIT_INFO</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="reve_finsh_date">REVE_FINSH_DATE</isNotNull>	
			<isNotNull prepend="," property="audit_date">AUDIT_DATE</isNotNull>
			<isNotNull prepend="," property="receive_info">RECEIVE_INFO</isNotNull>
			<isNotNull prepend="," property="complete_info">COMPLETE_INFO</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_id">#user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="role_id">#role_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="task_id">#task_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="task_name">#task_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="is_receive">#is_receive:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="state">#state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_state">#audit_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_user_id">#audit_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_name">#audit_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="audit_info">#audit_info:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="reve_finsh_date">#reve_finsh_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="audit_date">#audit_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="receive_info">RECEIVE_INFO</isNotNull>
			<isNotNull prepend="," property="complete_info">COMPLETE_INFO</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateYwtTaskReceive" parameterClass="YwtTaskReceive">
		update YWT_TASK_RECEIVE
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_id">USER_ID = #user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="role_id">ROLE_ID = #role_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="task_id">TASK_ID = #task_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="task_name">TASK_NAME = #task_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="is_receive">IS_RECEIVE = #is_receive:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="state">STATE = #state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_state">AUDIT_STATE = #audit_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_user_id">AUDIT_USER_ID = #audit_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_name">AUDIT_NAME = #audit_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="audit_info">AUDIT_INFO = #audit_info:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="reve_finsh_date">REVE_FINSH_DATE = #reve_finsh_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="audit_date">AUDIT_DATE = #audit_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="receive_info">RECEIVE_INFO = #receive_info:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="complete_info">COMPLETE_INFO = #complete_info:TIMESTAMP#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteYwtTaskReceive" parameterClass="YwtTaskReceive">
		delete from YWT_TASK_RECEIVE where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
		<isNotEmpty prepend=" " property="task_id">TASK_ID = #task_id#</isNotEmpty>
	</delete>

</sqlMap>