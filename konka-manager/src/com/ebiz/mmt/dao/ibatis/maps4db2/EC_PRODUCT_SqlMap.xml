<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="EC_PRODUCT">

	<typeAlias alias="ecProduct" type="com.ebiz.mmt.domain.EcProduct" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertEcProduct" />
		<flushOnExecute statement="updateEcProduct" />
		<flushOnExecute statement="deleteEcProduct" />
	</cacheModel>

	<resultMap id="ecProductResultForList" class="ecProduct">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="DEPT_SN" property="dept_sn" jdbcType="VARCHAR" />
		<result column="PD_NAME" property="pd_name" jdbcType="VARCHAR" />
		<result column="PD_SN" property="pd_sn" jdbcType="VARCHAR" />
		<result column="PD_SPEC" property="pd_spec" jdbcType="VARCHAR" />
		<result column="OWN_SYS" property="own_sys" jdbcType="DECIMAL" />
		<result column="PD_SIZE" property="pd_size" jdbcType="DECIMAL" />
		<result column="PD_RES" property="pd_res" jdbcType="VARCHAR" />
		<result column="MAIN_PIC" property="main_pic" jdbcType="VARCHAR" />
		<result column="PD_DESC" property="pd_desc" jdbcType="VARCHAR" />
		<result column="LABEL_3D" property="label_3d" jdbcType="DECIMAL" />
		<result column="LABEL_INT" property="label_int" jdbcType="DECIMAL" />
		<result column="LABEL_WWW" property="label_www" jdbcType="DECIMAL" />
		<result column="LABEL_OF_CATE" property="label_of_cate" jdbcType="DECIMAL" />
		<result column="ORDER_VALUE" property="order_value" jdbcType="DECIMAL" />
		<result column="ADD_DATE" property="add_date" jdbcType="TIMESTAMP" />
		<result column="STATE" property="state" jdbcType="DECIMAL" />
		<result column="LABEL_4K" property="label_4k" jdbcType="DECIMAL" />
		<result column="PROD_TYPE" property="prod_type" jdbcType="DECIMAL" />
		<result column="SJ_WEIGHT" property="sj_weight" jdbcType="DECIMAL" />
		<result column="P_WEIGHT" property="p_weight" jdbcType="DECIMAL" />
		<result column="BRAND_NAME" property="brand_name" jdbcType="VARCHAR" />
		<result column="ADD_U_ID" property="add_u_id" jdbcType="DECIMAL" />
	</resultMap>

	<resultMap id="ecProductResult" class="ecProduct" extends="ecProductResultForList">
	</resultMap>

	<sql id="sf-ecProduct">
		<isNotEmpty prepend=" and " property="id">ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_sn">DEPT_SN = #dept_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_name">PD_NAME = #pd_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_sn">PD_SN = #pd_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_spec">PD_SPEC = #pd_spec:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="own_sys">OWN_SYS = #own_sys:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_size">PD_SIZE = #pd_size:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_res">PD_RES = #pd_res:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="main_pic">MAIN_PIC = #main_pic:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_desc">PD_DESC = #pd_desc:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="label_3d">LABEL_3D = #label_3d:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="label_int">LABEL_INT = #label_int:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="label_www">LABEL_WWW = #label_www:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="label_of_cate">LABEL_OF_CATE = #label_of_cate:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_value">ORDER_VALUE = #order_value:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotEmpty>
		<isNotEmpty prepend=" and " property="state">STATE = #state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="label_4k">LABEL_4K = #label_4k:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="prod_type">PROD_TYPE = #prod_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sj_weight">SJ_WEIGHT = #sj_weight:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="p_weight">P_WEIGHT = #p_weight:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="brand_name">BRAND_NAME = #brand_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_u_id">ADD_U_ID = #add_u_id:DECIMAL#</isNotEmpty>
	
		<isNotEmpty prepend=" and " property="map.pd_sn_like">PD_SN like '%' || #map.pd_sn_like# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.pd_name_like">PD_NAME like '%' || #map.pd_name_like# || '%'</isNotEmpty>
	</sql>

	<select id="selectEcProduct" resultMap="ecProductResult" parameterClass="ecProduct" cacheModel="oneDayCache">
		select * from EC_PRODUCT where 1 = 1
		<include refid="sf-ecProduct" />
	</select>

	<select id="selectEcProductList" resultMap="ecProductResultForList" parameterClass="ecProduct" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from EC_PRODUCT where 1 = 1
		<include refid="sf-ecProduct" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectEcProductCount" resultClass="long" parameterClass="ecProduct" cacheModel="oneDayCache">
		select count(*) from EC_PRODUCT where 1 = 1
		<include refid="sf-ecProduct" />
	</select>

	<select id="selectEcProductPaginatedList" resultMap="ecProductResult" parameterClass="ecProduct" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from EC_PRODUCT where 1 = 1
		<include refid="sf-ecProduct" />
		 order by ADD_DATE desc 
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertEcProduct" parameterClass="ecProduct">
		<selectKey resultClass="long" keyProperty="id">select SEQ_EC_PRODUCT.nextval as id from dual </selectKey>
		<![CDATA[insert into EC_PRODUCT (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="dept_sn">DEPT_SN</isNotNull>	
			<isNotNull prepend="," property="pd_name">PD_NAME</isNotNull>	
			<isNotNull prepend="," property="pd_sn">PD_SN</isNotNull>	
			<isNotNull prepend="," property="pd_spec">PD_SPEC</isNotNull>	
			<isNotNull prepend="," property="own_sys">OWN_SYS</isNotNull>	
			<isNotNull prepend="," property="pd_size">PD_SIZE</isNotNull>	
			<isNotNull prepend="," property="pd_res">PD_RES</isNotNull>	
			<isNotNull prepend="," property="main_pic">MAIN_PIC</isNotNull>	
			<isNotNull prepend="," property="pd_desc">PD_DESC</isNotNull>	
			<isNotNull prepend="," property="label_3d">LABEL_3D</isNotNull>	
			<isNotNull prepend="," property="label_int">LABEL_INT</isNotNull>	
			<isNotNull prepend="," property="label_www">LABEL_WWW</isNotNull>	
			<isNotNull prepend="," property="label_of_cate">LABEL_OF_CATE</isNotNull>
			<isNull prepend="," property="label_of_cate">LABEL_OF_CATE</isNull>	
			<isNotNull prepend="," property="order_value">ORDER_VALUE</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="state">STATE</isNotNull>	
			<isNotNull prepend="," property="label_4k">LABEL_4K</isNotNull>	
			<isNotNull prepend="," property="prod_type">PROD_TYPE</isNotNull>	
			<isNotNull prepend="," property="sj_weight">SJ_WEIGHT</isNotNull>	
			<isNotNull prepend="," property="p_weight">P_WEIGHT</isNotNull>	
			<isNotNull prepend="," property="brand_name">BRAND_NAME</isNotNull>	
			<isNotNull prepend="," property="add_u_id">ADD_U_ID</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_sn">#dept_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_name">#pd_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_sn">#pd_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_spec">#pd_spec:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="own_sys">#own_sys:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pd_size">#pd_size:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pd_res">#pd_res:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="main_pic">#main_pic:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_desc">#pd_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="label_3d">#label_3d:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_int">#label_int:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_www">#label_www:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_of_cate">#label_of_cate:DECIMAL#</isNotNull>
			<isNull prepend="," property="label_of_cate">null</isNull>	
			<isNotNull prepend="," property="order_value">#order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="state">#state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_4k">#label_4k:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="prod_type">#prod_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sj_weight">#sj_weight:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_weight">#p_weight:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="brand_name">#brand_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_u_id">#add_u_id:DECIMAL#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateEcProduct" parameterClass="EcProduct">
		update EC_PRODUCT
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_sn">DEPT_SN = #dept_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_name">PD_NAME = #pd_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_sn">PD_SN = #pd_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_spec">PD_SPEC = #pd_spec:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="own_sys">OWN_SYS = #own_sys:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pd_size">PD_SIZE = #pd_size:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pd_res">PD_RES = #pd_res:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="main_pic">MAIN_PIC = #main_pic:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_desc">PD_DESC = #pd_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="label_3d">LABEL_3D = #label_3d:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_int">LABEL_INT = #label_int:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_www">LABEL_WWW = #label_www:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_of_cate">LABEL_OF_CATE = #label_of_cate:DECIMAL#</isNotNull>
			<isNull prepend="," property="label_of_cate">LABEL_OF_CATE = null</isNull>
			<isNotNull prepend="," property="order_value">ORDER_VALUE = #order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="state">STATE = #state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="label_4k">LABEL_4K = #label_4k:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="prod_type">PROD_TYPE = #prod_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sj_weight">SJ_WEIGHT = #sj_weight:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_weight">P_WEIGHT = #p_weight:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="brand_name">BRAND_NAME = #brand_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_u_id">ADD_U_ID = #add_u_id:DECIMAL#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteEcProduct" parameterClass="EcProduct">
		delete from EC_PRODUCT where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>