<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_VIP_PD_MANAGE">

	<typeAlias alias="konkaVipPdManage" type="com.ebiz.mmt.domain.KonkaVipPdManage" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertKonkaVipPdManage" />
		<flushOnExecute statement="updateKonkaVipPdManage" />
		<flushOnExecute statement="deleteKonkaVipPdManage" />
	</cacheModel>

	<resultMap id="konkaVipPdManageResultForList" class="konkaVipPdManage">
		<result column="ID" property="id" jdbcType="BIGINT" />
		<result column="PD_ID" property="pd_id" jdbcType="BIGINT" />
		<result column="PD_CODE" property="pd_code" jdbcType="VARCHAR" />
		<result column="PD_NAME" property="pd_name" jdbcType="VARCHAR" />
		<result column="FGS_ID" property="fgs_id" jdbcType="BIGINT" />
		<result column="FGS_NAME" property="fgs_name" jdbcType="VARCHAR" />
		<result column="PD_TYPE" property="pd_type" jdbcType="BIGINT" />
		<result column="ADD_DATE" property="add_date" jdbcType="TIMESTAMP" />
		<result column="ADD_USER_ID" property="add_user_id" jdbcType="BIGINT" />
		<result column="ADD_USER_NAME" property="add_user_name" jdbcType="VARCHAR" />
		<result column="IS_DEL" property="is_del" jdbcType="CHAR" />
		<result column="IS_LOCKED" property="is_locked" jdbcType="CHAR" />
		<result column="IS_HIDDEN" property="is_hidden" jdbcType="CHAR" />
		<result column="PD_DESC" property="pd_desc" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="konkaVipPdManageResultForList1" extends="konkaVipPdManageResultForList" class="konkaVipPdManage">
		<result column="FILE_NAME" property="map.file_name" jdbcType="VARCHAR" />
		<result column="SAVE_PATH" property="map.save_path" jdbcType="VARCHAR" />
		<result column="PIC_ID" property="map.pic_id" jdbcType="BIGINT" />
	</resultMap>

	<resultMap id="konkaVipPdManageResult" class="konkaVipPdManage" extends="konkaVipPdManageResultForList">
	</resultMap>

	<sql id="sf-konkaVipPdManage">
		<isNotEmpty prepend=" and " property="id">ID = #id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_id">PD_ID = #pd_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_code">PD_CODE = #pd_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_name">PD_NAME = #pd_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="fgs_id">FGS_ID = #fgs_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="fgs_name">FGS_NAME = #fgs_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_type">PD_TYPE = #pd_type:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">ADD_USER_ID = #add_user_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_name">ADD_USER_NAME = #add_user_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">IS_DEL = #is_del:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_locked">IS_LOCKED = #is_locked:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_hidden">IS_DEL = #is_hidden:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.pd_code_like">pd_code like '%' || #map.pd_code_like# || '%' </isNotEmpty>
	</sql>
	
	
	<sql id="sf-konkaVipPdManage1">
		<isNotEmpty prepend=" and " property="id">a.ID = #id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_id">a.PD_ID = #pd_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_code">a.PD_CODE = #pd_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_name">a.PD_NAME = #pd_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="fgs_id">a.FGS_ID = #fgs_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="fgs_name">a.FGS_NAME = #fgs_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pd_type">a.PD_TYPE = #pd_type:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">a.ADD_DATE = #add_date:TIMESTAMP#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">a.ADD_USER_ID = #add_user_id:BIGINT#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_name">a.ADD_USER_NAME = #add_user_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">a.IS_DEL = #is_del:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_locked">a.IS_LOCKED = #is_locked:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_hidden">a.IS_HIDDEN = #is_hidden:CHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.pd_code_like">a.pd_code like '%' || #map.pd_code_like# || '%' </isNotEmpty>
	</sql>

	<select id="selectKonkaVipPdManage" resultMap="konkaVipPdManageResult" parameterClass="konkaVipPdManage" cacheModel="oneDayCache">
		select * from KONKA_VIP_PD_MANAGE where 1 = 1
		<include refid="sf-konkaVipPdManage" />
	</select>

	<select id="selectKonkaVipPdManageList" resultMap="konkaVipPdManageResultForList1" parameterClass="konkaVipPdManage" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select a.*,b.id pic_id,b.file_name file_name,b.save_path save_path from KONKA_VIP_PD_MANAGE a left join konka_pe_attachments b
		 on a.id=b.link_id and b.Link_tab ='KONKA_VIP_PD_MANAGE'   where 1 = 1 
		<include refid="sf-konkaVipPdManage1" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ order by a.add_date desc ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaVipPdManageCount" resultClass="long" parameterClass="konkaVipPdManage" cacheModel="oneDayCache">
		select count(*) from KONKA_VIP_PD_MANAGE where 1 = 1
		<include refid="sf-konkaVipPdManage" />
	</select>

	<select id="selectKonkaVipPdManagePaginatedList" resultMap="konkaVipPdManageResultForList1" parameterClass="konkaVipPdManage" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select a.*,b.id pic_id,b.file_name file_name,b.save_path save_path from KONKA_VIP_PD_MANAGE a left join konka_pe_attachments b
		 on a.id=b.link_id and b.Link_tab ='KONKA_VIP_PD_MANAGE'   where 1 = 1 
		<include refid="sf-konkaVipPdManage1" />
		<!-- order by ID asc -->
		<![CDATA[ order by a.add_date desc ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaVipPdManage" parameterClass="konkaVipPdManage">
		<selectKey resultClass="long" keyProperty="id">select seq_KONKA_VIP_PD_MANAGE.nextval as id from dual </selectKey>
		<![CDATA[insert into KONKA_VIP_PD_MANAGE (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="pd_id">PD_ID</isNotNull>	
			<isNotNull prepend="," property="pd_code">PD_CODE</isNotNull>	
			<isNotNull prepend="," property="pd_name">PD_NAME</isNotNull>	
			<isNotNull prepend="," property="fgs_id">FGS_ID</isNotNull>	
			<isNotNull prepend="," property="fgs_name">FGS_NAME</isNotNull>	
			<isNotNull prepend="," property="pd_type">PD_TYPE</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID</isNotNull>	
			<isNotNull prepend="," property="add_user_name">ADD_USER_NAME</isNotNull>	
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>	
			<isNotNull prepend="," property="is_locked">IS_LOCKED</isNotNull>	
			<isNotNull prepend="," property="is_hidden">IS_HIDDEN</isNotNull>	
			<isNotNull prepend="," property="pd_desc">PD_DESC</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="pd_id">#pd_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="pd_code">#pd_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_name">#pd_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="fgs_id">#fgs_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="fgs_name">#fgs_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_type">#pd_type:BIGINT#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="add_user_id">#add_user_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="add_user_name">#add_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:CHAR#</isNotNull>
			<isNotNull prepend="," property="is_locked">#is_locked:CHAR#</isNotNull>
			<isNotNull prepend="," property="is_hidden">#is_hidden:CHAR#</isNotNull>
			<isNotNull prepend="," property="pd_desc">#pd_desc:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaVipPdManage" parameterClass="KonkaVipPdManage">
		update KONKA_VIP_PD_MANAGE
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="pd_id">PD_ID = #pd_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="pd_code">PD_CODE = #pd_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_name">PD_NAME = #pd_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="fgs_id">FGS_ID = #fgs_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="fgs_name">FGS_NAME = #fgs_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pd_type">PD_TYPE = #pd_type:BIGINT#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID = #add_user_id:BIGINT#</isNotNull>
			<isNotNull prepend="," property="add_user_name">ADD_USER_NAME = #add_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL = #is_del:CHAR#</isNotNull>
			<isNotNull prepend="," property="is_locked">IS_LOCKED = #is_locked:CHAR#</isNotNull>
			<isNotNull prepend="," property="is_hidden">IS_HIDDEN = #is_hidden:CHAR#</isNotNull>
			<isNotNull prepend="," property="pd_desc">PD_DESC = #pd_desc:CHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaVipPdManage" parameterClass="KonkaVipPdManage">
		delete from KONKA_VIP_PD_MANAGE where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>