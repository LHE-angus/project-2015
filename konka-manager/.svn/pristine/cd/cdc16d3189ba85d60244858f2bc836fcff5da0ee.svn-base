<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="JXC_SZ_DETAILS">

	<typeAlias alias="jxcSzDetails" type="com.ebiz.mmt.domain.JxcSzDetails" />

	

	<resultMap id="jxcSzDetailsResultForList" class="jxcSzDetails">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="SHOP_ID" property="shop_id" jdbcType="DECIMAL" />
		<result column="SHOP_P_INDEX" property="shop_p_index" jdbcType="DECIMAL" />
		<result column="SZ_SN" property="sz_sn" jdbcType="VARCHAR" />
		<result column="SZ_TYPE" property="sz_type" jdbcType="DECIMAL" />
		<result column="SZ_OBJ_ID" property="sz_obj_id" jdbcType="DECIMAL" />
		<result column="DJ_ID" property="dj_id" jdbcType="DECIMAL" />
		<result column="MONEY" property="money" jdbcType="DECIMAL" />
		<result column="SUMMARY" property="summary" jdbcType="VARCHAR" />
		<result column="BUSI_DATE" property="busi_date" jdbcType="DATE" />
		<result column="ADD_DATE" property="add_date" jdbcType="DATE" />
		<result column="IS_DEL" property="is_del" jdbcType="DECIMAL" />
	</resultMap>
	
	<resultMap id="jxcSzDetailsResult" class="jxcSzDetails" extends="jxcSzDetailsResultForList">
	</resultMap>
	
	<resultMap id="jxcSzDetailsResultWithMoney" class="jxcSzDetails" >
		<result column="sz_pay" property="map.sz_pay" jdbcType="DECIMAL" />
	</resultMap>
	
	
	<sql id="sf-jxcSzDetails">
		<isNotEmpty prepend=" and " property="id">ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="shop_id">SHOP_ID = #shop_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="shop_p_index">SHOP_P_INDEX = #shop_p_index:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sz_sn">SZ_SN = #sz_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sz_type">SZ_TYPE = #sz_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sz_obj_id">SZ_OBJ_ID = #sz_obj_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dj_id">DJ_ID = #dj_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="money">MONEY = #money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="summary">SUMMARY = #summary:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="busi_date">BUSI_DATE = #busi_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.add_date_lt_0"><![CDATA[ a.ADD_DATE < to_date(#map.add_date_lt_0#, 'YYYY-MM-DD') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_lt"><![CDATA[ a.ADD_DATE <= to_date(#map.add_date_lt# || ' 23:59:59', 'YYYY-MM-DD HH24:MI:SS')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_gt"><![CDATA[ a.ADD_DATE >= to_date(#map.add_date_gt#, 'YYYY-MM-DD')]]></isNotEmpty>
	</sql>

	<select id="selectJxcSzDetails" resultMap="jxcSzDetailsResult" parameterClass="jxcSzDetails" >
		select * from JXC_SZ_DETAILS where 1 = 1
		<include refid="sf-jxcSzDetails" />
	</select>
	
	<select id="selectJxcSzDetailsWithMoney" resultMap="jxcSzDetailsResultWithMoney" parameterClass="jxcSzDetails" >
		select sum(a.money) as sz_pay from JXC_SZ_DETAILS a where 1 = 1
		<include refid="sf-jxcSzDetails" />
	</select>
	
	<select id="selectJxcSzDetailsList" resultMap="jxcSzDetailsResultForList" parameterClass="jxcSzDetails" >
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from JXC_SZ_DETAILS where 1 = 1
		<include refid="sf-jxcSzDetails" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectJxcSzDetailsCount" resultClass="long" parameterClass="jxcSzDetails" >
		select count(*) from JXC_SZ_DETAILS where 1 = 1
		<include refid="sf-jxcSzDetails" />
	</select>

	<select id="selectJxcSzDetailsPaginatedList" resultMap="jxcSzDetailsResult" parameterClass="jxcSzDetails" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from JXC_SZ_DETAILS where 1 = 1
		<include refid="sf-jxcSzDetails" />
		<!-- order by ID asc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertJxcSzDetails" parameterClass="jxcSzDetails">
		<selectKey resultClass="long" keyProperty="id">select JXC_BILL_DETAILS_SEQ.nextval as id from dual </selectKey>
		<![CDATA[insert into JXC_SZ_DETAILS (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="shop_id">SHOP_ID</isNotNull>	
			<isNotNull prepend="," property="shop_p_index">SHOP_P_INDEX</isNotNull>	
			<isNotNull prepend="," property="sz_sn">SZ_SN</isNotNull>	
			<isNotNull prepend="," property="sz_type">SZ_TYPE</isNotNull>	
			<isNotNull prepend="," property="sz_obj_id">SZ_OBJ_ID</isNotNull>	
			<isNotNull prepend="," property="dj_id">DJ_ID</isNotNull>	
			<isNotNull prepend="," property="money">MONEY</isNotNull>	
			<isNotNull prepend="," property="summary">SUMMARY</isNotNull>	
			<isNotNull prepend="," property="busi_date">BUSI_DATE</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="shop_id">#shop_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="shop_p_index">#shop_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sz_sn">#sz_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sz_type">#sz_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sz_obj_id">#sz_obj_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dj_id">#dj_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="money">#money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="summary">#summary:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="busi_date">#busi_date:DATE#</isNotNull>
			<isNotNull prepend="," property="add_date">sysdate</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:DECIMAL#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateJxcSzDetails" parameterClass="JxcSzDetails">
		update JXC_SZ_DETAILS
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="shop_id">SHOP_ID = #shop_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="shop_p_index">SHOP_P_INDEX = #shop_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sz_sn">SZ_SN = #sz_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sz_type">SZ_TYPE = #sz_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sz_obj_id">SZ_OBJ_ID = #sz_obj_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dj_id">DJ_ID = #dj_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="money">MONEY = #money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="summary">SUMMARY = #summary:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="busi_date">BUSI_DATE = #busi_date:DATE#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:DATE#</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL = #is_del:DECIMAL#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteJxcSzDetails" parameterClass="JxcSzDetails">
		delete from JXC_SZ_DETAILS where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>