<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KonkaParagonShowversion">

    <typeAlias alias="konkaParagonShowversion" type="com.ebiz.mmt.domain.KonkaParagonShowversion" />

	
	
    <resultMap id="konkaParagonShowversionResult" class="konkaParagonShowversion">
		<result property="version_id" column="VERSION_ID" jdbcType="DECIMAL" />
		<result property="version_name" column="VERSION_NAME" jdbcType="VARCHAR" />
		<result property="version_code" column="VERSION_CODE" jdbcType="VARCHAR" />
		<result property="version_memo" column="VERSION_MEMO" jdbcType="VARCHAR" />
		<result property="addman" column="ADDMAN" jdbcType="DECIMAL" />
		<result property="addtime" column="ADDTIME" jdbcType="DATETIME" />
    </resultMap>
    
    <resultMap id="konkaParagonShowversionResultList" class="konkaParagonShowversion" extends="konkaParagonShowversionResult">
		<result column="USER_NAME" property="map.user_name" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="sf-konkaParagonShowversion">
		<isNotEmpty prepend=" and " property="version_id">a.VERSION_ID = #version_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="version_name">a.VERSION_NAME = #version_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="version_code">a.VERSION_CODE = #version_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="version_memo">a.VERSION_MEMO = #version_memo:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="addman">a.ADDMAN = #addman:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="addtime">a.ADDTIME = #addtime:DATETIME#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.version_name_like">a.VERSION_NAME like '%' || #map.version_name_like:VARCHAR# || '%'</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.selects">
			a.version_id in ($map.selects$)
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.not_selects">
			a.version_id not in ($map.not_selects$)
		</isNotEmpty>
		<isNotEmpty property="map.st_pub_date">
			<isNotEmpty prepend=" and " property="map.en_pub_date">
				<![CDATA[ to_char(a.ADDTIME, 'yyyy-mm-dd') >= #map.st_pub_date# and to_char(a.ADDTIME, 'yyyy-mm-dd') <= #map.en_pub_date#]]>
			</isNotEmpty>
			<isEmpty prepend=" and " property="map.en_pub_date">
				to_char(a.ADDTIME, 'yyyy-mm-dd') >= #map.st_pub_date#
			</isEmpty>
		</isNotEmpty>
		<isEmpty property="map.st_pub_date">
			<isNotEmpty prepend=" and " property="map.en_pub_date">
				<![CDATA[ 
				to_char(a.ADDTIME, 'yyyy-mm-dd') <= #map.en_pub_date#
				]]>
			</isNotEmpty>
		</isEmpty>
	</sql>
	
	<select id="selectKonkaParagonShowversion" resultMap="konkaParagonShowversionResult" parameterClass="konkaParagonShowversion" >
		select * from KONKA_PARAGON_SHOWVERSION a where 1=1
		<include refid="sf-konkaParagonShowversion" />
	</select>
	
	<select id="selectKonkaParagonShowversionList" resultMap="konkaParagonShowversionResult" parameterClass="konkaParagonShowversion" >
		<isNotEmpty property="row.count"><![CDATA[ select * from ( ]]></isNotEmpty>
		select * from KONKA_PARAGON_SHOWVERSION a where 1=1
		<include refid="sf-konkaParagonShowversion" />
		<!-- order by a.ID desc -->
		<isNotEmpty property="row.count"><![CDATA[ ) where rownum<=#row.count# ]]></isNotEmpty>
	</select>
	
	<select id="selectKonkaParagonShowversionCount" resultClass="long" parameterClass="konkaParagonShowversion" >
		select count(*) from KONKA_PARAGON_SHOWVERSION a where 1 = 1
		<include refid="sf-konkaParagonShowversion" />
	</select>
	
	<select id="selectKonkaParagonShowversionPaginatedList" resultMap="konkaParagonShowversionResultList" parameterClass="konkaParagonShowversion" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select a.*,b.user_name as user_name from KONKA_PARAGON_SHOWVERSION a 
		left join konka_pe_prod_user b 
		on a.addman=b.id
		where 1=1
		<include refid="sf-konkaParagonShowversion" />
		 order by a.version_code
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaParagonShowversion" parameterClass="konkaParagonShowversion">
		<selectKey resultClass="long" keyProperty="version_id">select KONKA_PARAGON_SEQ.nextval as version_id from dual</selectKey>
		<![CDATA[insert into KONKA_PARAGON_SHOWVERSION (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="version_id">VERSION_ID</isNotNull>
			<isNotNull prepend="," property="version_name">VERSION_NAME</isNotNull>
			<isNotNull prepend="," property="version_code">VERSION_CODE</isNotNull>
			<isNotNull prepend="," property="version_memo">VERSION_MEMO</isNotNull>
			<isNotNull prepend="," property="addman">ADDMAN</isNotNull>
			<isNotNull prepend="," property="addtime">ADDTIME</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="version_id">#version_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="version_name">#version_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="version_code">#version_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="version_memo">#version_memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="addman">#addman:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addtime">#addtime:DATETIME#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>
	
	<update id="updateKonkaParagonShowversion" parameterClass="konkaParagonShowversion">
		update KONKA_PARAGON_SHOWVERSION
		<dynamic prepend="set">
			<isNotNull prepend="," property="version_id">VERSION_ID = #version_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="version_name">VERSION_NAME = #version_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="version_code">VERSION_CODE = #version_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="version_memo">VERSION_MEMO = #version_memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="addman">ADDMAN = #addman:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addtime">ADDTIME = #addtime:DATETIME#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="version_id">VERSION_ID = #version_id#</isNotEmpty>
		<isEmpty prepend=" " property="version_id">
			<isNotEmpty prepend=" " property="map.pks">
				VERSION_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaParagonShowversion" parameterClass="konkaParagonShowversion">
		delete from KONKA_PARAGON_SHOWVERSION where
		<isNotEmpty prepend=" " property="version_id">VERSION_ID = #version_id#</isNotEmpty>
		<isEmpty prepend=" " property="version_id">
			<isNotEmpty prepend=" " property="map.pks">
				VERSION_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>
</sqlMap>
