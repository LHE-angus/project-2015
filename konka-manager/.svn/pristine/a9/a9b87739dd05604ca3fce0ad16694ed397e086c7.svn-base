<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="EC_USER">

	<typeAlias alias="ecUser" type="com.ebiz.mmt.domain.EcUser" />


	<resultMap id="ecUserResultForList" class="ecUser">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="USER_TYPE" property="user_type" jdbcType="DECIMAL" />
		<result column="USER_NAME" property="user_name" jdbcType="VARCHAR" />
		<result column="PASS_WORD" property="pass_word" jdbcType="VARCHAR" />
		<result column="REAL_NAME" property="real_name" jdbcType="VARCHAR" />
		<result column="LINK_TEL" property="link_tel" jdbcType="VARCHAR" />
		<result column="LINK_ADDR" property="link_addr" jdbcType="VARCHAR" />
		<result column="EMAIL" property="email" jdbcType="VARCHAR" />
		<result column="ADD_DATE" property="add_date" jdbcType="TIMESTAMP" />
		<result column="ADD_USER_ID" property="add_user_id" jdbcType="DECIMAL" />
		<result column="IS_DEL" property="is_del" jdbcType="DECIMAL" />
		<result column="DEPARTMENT" property="department" jdbcType="VARCHAR" />
		<result column="CHARGEMAN" property="chargeman" jdbcType="VARCHAR" />
		<result column="IS_CHAPTER" property="is_chapter" jdbcType="DECIMAL" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="PAR_DEPT_ID" property="par_dept_id" jdbcType="DECIMAL" />
		<result column="LEADER_ID" property="leader_id" jdbcType="DECIMAL" />
		<result column="POSITION_ID" property="position_id" jdbcType="DECIMAL" />
		<result column="SEX" property="sex" jdbcType="DECIMAL" />
		<result column="BIRTHDAY" property="birthday" jdbcType="TIMESTAMP" />
		<result column="P_INDEX" property="p_index" jdbcType="DECIMAL" />
		<result column="LINK_POST" property="link_post" jdbcType="VARCHAR" />
		<result column="LINK_PHONE" property="link_phone" jdbcType="VARCHAR" />
		<result column="LINK_QQ" property="link_qq" jdbcType="VARCHAR" />
		<result column="LINK_MSN" property="link_msn" jdbcType="VARCHAR" />
		<result column="ADD_E_USER_ID" property="add_e_user_id" jdbcType="DECIMAL" />
		<result column="LOGIN_COUNT" property="login_count" jdbcType="DECIMAL" />
		<result column="LAST_LOGIN_IP" property="last_login_ip" jdbcType="VARCHAR" />
		<result column="BANK_ACCOUNT" property="bank_account" jdbcType="VARCHAR" />
		<result column="SOCIAL_NUMBER" property="social_number" jdbcType="VARCHAR" />
		<result column="LAST_LOGIN_TIME" property="last_login_time" jdbcType="TIMESTAMP" />
		<result column="ORDER_VALUE" property="order_value" jdbcType="DECIMAL" />
		<result column="IS_XX_USER" property="is_xx_user" jdbcType="DECIMAL" />
		<result column="C_ID" property="c_id" jdbcType="DECIMAL" />
		<result column="PAYROLL_CARD" property="payroll_card" jdbcType="VARCHAR" />
		<result column="BANK_ACCOUNT_NAME" property="bank_account_name" jdbcType="VARCHAR" />
		<result column="BANK_NAME" property="bank_name" jdbcType="VARCHAR" />
		<result column="CARD_NO" property="card_no" jdbcType="VARCHAR" />
		<result column="PAY_PWD" property="pay_pwd" jdbcType="VARCHAR" />
		<result column="IS_ACT" property="is_act" jdbcType="DECIMAL" />
		<result column="IS_OWN" property="is_own" jdbcType="DECIMAL" />
		<result column="CUST_ID" property="cust_id" jdbcType="DECIMAL" />
		<result column="AUDIT_DATE" property="audit_date" jdbcType="TIMESTAMP" />
		<result column="CARD_NO" property="ecBaseCardLevel" select="selectEcBaseCardLevelByCardNo" />
		<result column="IS_EPP_FGS" property="is_epp_fgs" jdbcType="DECIMAL" />
		<result column="PLAT_SYS" property="plat_sys" jdbcType="DECIMAL" />
		<result column="LINK_USER_NAME" property="link_user_name" jdbcType="VARCHAR" />
		<result column="IS_ALLOWED" property="is_allowed" jdbcType="DECIMAL" />
		<result column="USER_NO" property="user_no" jdbcType="VARCHAR" />
		<result column="LINK_CODE" property="link_code" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="ecUserResult" class="ecUser" extends="ecUserResultForList">
	</resultMap>
	
	<resultMap id="ecUserResultForShowinfo" class="ecUser"
		extends="ecUserResultForList">
		<result column="DEPT_NAME" property="map.dept_name" jdbcType="VARCHAR" />
		<result column="PAR_DEPT_IDS" property="map.par_dept_ids" jdbcType="DECIMAL" />
		<result column="DEPT_TYPE" property="map.dept_type" jdbcType="DECIMAL" />
		<result column="PAR_ID" property="map.par_id" jdbcType="DECIMAL" />
		<result column="R3_CODE" property="map.r3_code" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="ecUserNewResult" class="ecUser"
		extends="ecUserResultForList">
		<result column="GROUP_NAME" property="map.group_name" jdbcType="VARCHAR" />
		<result column="CUST_NAME" property="map.cust_name" jdbcType="VARCHAR" />
		<result column="CUST_CODE" property="map.cust_code" jdbcType="VARCHAR" />
		<result column="USER_LEVEL" property="map.user_level" jdbcType="VARCHAR" />
	</resultMap>
	
	
	<resultMap id="ecUserWithPositionNameAndFullDeptName" class="ecUser" extends="ecUserResultForList">
		<result column="FULL_DEPT_NAME" property="map.full_dept_name" jdbcType="VARCHAR" />
		<result column="CARD_LEVEL_NAME" property="map.card_level_name" jdbcType="VARCHAR" />
		<result column="PAY_INTEGRAL" property="map.pay_integral" jdbcType="VARCHAR" />
		<result column="DA_PRICE" property="map.da_price" jdbcType="VARCHAR" />
		<result column="WA_PRICE" property="map.wa_price" jdbcType="VARCHAR" />
		<result column="DA_REBATES" property="map.da_rebates" jdbcType="VARCHAR" />
		<result column="WA_REBATES" property="map.wa_rebates" jdbcType="VARCHAR" />
		<result column="DA_SCORE" property="map.da_score" jdbcType="VARCHAR" />
		<result column="R3_CODE" property="map.r3_code" jdbcType="VARCHAR" />
		<result column="DEPT_NAME" property="map.dept_name" jdbcType="VARCHAR" />
		<result column="CARD_SENDER" property="map.card_sender" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="ecUserResultForHydj" class="ecUser" extends="ecUserResultForList"> 
		<result column="INTEGRAL" property="map.integral" jdbcType="DECIMAL" /> 
	</resultMap>
	
	<sql id="sf-ecUser">
		<isNotEmpty prepend=" and " property="id">t.ID = #id:DECIMAL#	</isNotEmpty>
		<isNotEmpty prepend=" and " property="user_type">t.USER_TYPE = #user_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="user_name">UPPER(t.USER_NAME) = UPPER(#user_name:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">t.USER_NAME like '%' ||	#map.user_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="pass_word">t.PASS_WORD = #pass_word:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="real_name">t.REAL_NAME = #real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.real_name_like">t.REAL_NAME like '%' ||	#map.real_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_tel">t.LINK_TEL = #link_tel:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_addr">t.LINK_ADDR = #link_addr:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="email">UPPER(t.EMAIL) = UPPER(#email:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">t.ADD_DATE = #add_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">t.ADD_USER_ID = #add_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">t.IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="department">t.DEPARTMENT = insertEcUser#department:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="chargeman">t.CHARGEMAN = #chargeman:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_chapter">t.IS_CHAPTER = #is_chapter:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">t.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="par_dept_id">t.PAR_DEPT_ID =#par_dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="leader_id">t.LEADER_ID = #leader_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="position_id">t.POSITION_ID = #position_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sex">t.SEX = #sex:DECIMAL# </isNotEmpty>
		<isNotEmpty prepend=" and " property="birthday">t.BIRTHDAY = #birthday:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="p_index">t.P_INDEX = #p_index:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_post">t.LINK_POST = #link_post:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_phone">t.LINK_PHONE = #link_phone:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_qq">t.LINK_QQ = #link_qq:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_msn">t.LINK_MSN = #link_msn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bank_account">t.BANK_ACCOUNT = #bank_account:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="social_number">t.SOCIAL_NUMBER = #social_number:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_e_user_id">t.ADD_E_USER_ID = #add_e_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">t.USER_NAME like '%' || #map.user_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_value">t.order_value = #order_value:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="card_no">UPPER(t.CARD_NO) = UPPER(#card_no:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="pay_pwd">t.PAY_PWD = #pay_pwd:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_act">t.IS_ACT = #is_act:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_own">t.IS_OWN = #is_own:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cust_id">t.CUST_ID = #cust_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_date">t.AUDIT_DATE = #audit_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">t.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_epp_fgs">t.IS_EPP_FGS = #is_epp_fgs:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="plat_sys">t.PLAT_SYS = #plat_sys:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_user_name">t.LINK_USER_NAME = #link_user_name:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_allowed">t.IS_ALLOWED = #is_allowed:DECIMAL#</isNotEmpty>	
		<isNotEmpty prepend=" and " property="user_no">t.USER_NO = #user_no:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_code">t.LINK_CODE = #link_code:DECIMAL#</isNotEmpty>
				
		<isNotEmpty prepend=" and " property="map.add_time_start"><![CDATA[ t.AUDIT_DATE >= to_date(#map.add_time_start#,'yyyy-MM-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_time_end"><![CDATA[ t.AUDIT_DATE <= to_date(#map.add_time_end#,'yyyy-MM-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.ids">t.ID in($map.ids$) </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_del">t.IS_DEL = #map.is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.dept_id">t.dept_id = #map.dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="c_id">t.C_ID = #c_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_type_in">t.USER_TYPE in ($map.user_type_in$)</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_is_not_null">t.USER_NAME is not null </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.konka_dept_id"> t.KONKA_DEPT_ID = #map.konka_dept_id:VARCHAR# </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.name_like">(t.USER_NAME like '%'|| #map.name_like:VARCHAR# || '%' or REAL_NAME like '%' || #map.name_like:VARCHAR# || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">(UPPER(t.USER_NAME) like '%' || UPPER(#map.user_name_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_no_like">(UPPER(t.USER_NO) like '%' || UPPER(#map.user_no_like:VARCHAR#) || '%') </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.dept_id_in">
			t.dept_id in (select dept_id from KONKA_DEPT start with dept_id = #map.dept_id_in# connect by prior dept_id = par_id) 
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.card_no_like">(UPPER(t.CARD_NO) like '%' || UPPER(#map.card_no_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.chargeman_like">(UPPER(t.CHARGEMAN) like '%' || UPPER(#map.chargeman_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.department_like">t.department like '%' || #map.department_like:VARCHAR# || '%' </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.message_for_birthday"> t.BIRTHDAY IS NOT NULL AND t.LINK_PHONE IS NOT NULL </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.link_phone_like">(t.LINK_PHONE like '%' || #map.link_phone_like:VARCHAR# || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_fgs">t.dept_id in <iterate close=")" open="(" conjunction="," property="map.is_fgs">#map.is_fgs[]#</iterate></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_par_user">t.LINK_USER_NAME is null and t.IS_ALLOWED =1 and t.link_code is not null </isNotEmpty>
	
		<isNotEmpty prepend=" and " property="map.add_date_gt">
			<![CDATA[ to_char(t.add_date, 'yyyy-mm-dd') >= #map.add_date_gt# ]]>
		</isNotEmpty>
	</sql>
	
	<sql id="sf-ecUser-ts">
		<isNotEmpty prepend=" and " property="id">ts.ID = #id:DECIMAL#	</isNotEmpty>
		<isNotEmpty prepend=" and " property="user_type">ts.USER_TYPE = #user_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="user_name">UPPER(ts.USER_NAME) = UPPER(#user_name:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">ts.USER_NAME like '%' ||	#map.user_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="pass_word">ts.PASS_WORD = #pass_word:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="real_name">ts.REAL_NAME = #real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.real_name_like">ts.REAL_NAME like '%' ||	#map.real_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_tel">ts.LINK_TEL = #link_tel:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_addr">ts.LINK_ADDR = #link_addr:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="email">UPPER(ts.EMAIL) = UPPER(#email:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ts.ADD_DATE = #add_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">ts.ADD_USER_ID = #add_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">ts.IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="department">ts.DEPARTMENT = insertEcUser#department:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="chargeman">ts.CHARGEMAN = #chargeman:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_chapter">ts.IS_CHAPTER = #is_chapter:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">ts.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="par_dept_id">ts.PAR_DEPT_ID =#par_dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="leader_id">ts.LEADER_ID = #leader_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="position_id">ts.POSITION_ID = #position_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sex">ts.SEX = #sex:DECIMAL# </isNotEmpty>
		<isNotEmpty prepend=" and " property="birthday">ts.BIRTHDAY = #birthday:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="p_index">ts.P_INDEX = #p_index:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_post">ts.LINK_POST = #link_post:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_phone">ts.LINK_PHONE = #link_phone:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_qq">ts.LINK_QQ = #link_qq:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_msn">ts.LINK_MSN = #link_msn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bank_account">ts.BANK_ACCOUNT = #bank_account:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="social_number">ts.SOCIAL_NUMBER = #social_number:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_e_user_id">ts.ADD_E_USER_ID = #add_e_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">ts.USER_NAME like '%' || #map.user_name_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_value">ts.order_value = #order_value:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="card_no">UPPER(ts.CARD_NO) = UPPER(#card_no:VARCHAR#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="pay_pwd">ts.PAY_PWD = #pay_pwd:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_act">ts.IS_ACT = #is_act:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_own">ts.IS_OWN = #is_own:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cust_id">ts.CUST_ID = #cust_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_date">ts.AUDIT_DATE = #audit_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">ts.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_epp_fgs">ts.IS_EPP_FGS = #is_epp_fgs:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="plat_sys">ts.PLAT_SYS = #plat_sys:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_user_name">ts.LINK_USER_NAME = #link_user_name:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_allowed">ts.IS_ALLOWED = #is_allowed:DECIMAL#</isNotEmpty>	
		<isNotEmpty prepend=" and " property="user_no">ts.USER_NO = #user_no:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="link_code">ts.LINK_CODE = #link_code:DECIMAL#</isNotEmpty>
				
		<isNotEmpty prepend=" and " property="map.add_time_start"><![CDATA[ ts.AUDIT_DATE >= to_date(#map.add_time_start#,'yyyy-MM-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_time_end"><![CDATA[ ts.AUDIT_DATE <= to_date(#map.add_time_end#,'yyyy-MM-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.ids">ts.ID in($map.ids$) </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_del">ts.IS_DEL = #map.is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.dept_id">ts.dept_id = #map.dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="c_id">ts.C_ID = #c_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_type_in">ts.USER_TYPE in ($map.user_type_in$)</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_is_not_null">ts.USER_NAME is not null </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.konka_dept_id"> ts.KONKA_DEPT_ID = #map.konka_dept_id:VARCHAR# </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.name_like">(ts.USER_NAME like '%'|| #map.name_like:VARCHAR# || '%' or REAL_NAME like '%' || #map.name_like:VARCHAR# || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_name_like">(UPPER(ts.USER_NAME) like '%' || UPPER(#map.user_name_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.user_no_like">(UPPER(ts.USER_NO) like '%' || UPPER(#map.user_no_like:VARCHAR#) || '%') </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.dept_id_in">
			ts.dept_id in (select dept_id from KONKA_DEPT start with dept_id = #map.dept_id_in# connect by prior dept_id = par_id) 
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.chargeman_like">(UPPER(ts.CHARGEMAN) like '%' || UPPER(#map.chargeman_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.card_no_like">(UPPER(ts.CARD_NO) like '%' || UPPER(#map.card_no_like:VARCHAR#) || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.department_like">ts.department like '%' || #map.department_like:VARCHAR# || '%' </isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.message_for_birthday"> ts.BIRTHDAY IS NOT NULL AND t.LINK_PHONE IS NOT NULL </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.link_phone_like">(ts.LINK_PHONE like '%' || #map.link_phone_like:VARCHAR# || '%') </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_fgs">ts.dept_id in <iterate close=")" open="(" conjunction="," property="map.is_fgs">#map.is_fgs[]#</iterate></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_par_user">ts.LINK_USER_NAME is null and ts.IS_ALLOWED =1 and ts.link_code is not null </isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_gt">
			<![CDATA[ to_char(ts.add_date, 'yyyy-mm-dd') >= #map.add_date_gt# ]]>
		</isNotEmpty>
	</sql>
	
	<select id="selectEcUserCount" resultClass="long" parameterClass="ecUser">
		select count(*) from (SELECT t.*,  a.FULL_NAME as FULL_DEPT_NAME ,e.CARD_LEVEL_NAME as card_level_name,o.INTEGRAL as pay_integral,
		j.D_PRICE AS da_price,
        q.W_PRICE AS wa_price,
        cc.D_REBATES as da_rebates,
        dd.W_REBATES as wa_rebates,
        ll.D_SCORE as da_score,
        f.R3_CODE as r3_code,
        g.dept_name as dept_name
		from EC_USER t left join
		(select r.user_id
		from KONKA_PE_ROLE_USER r 
		left join KONKA_PE_ROLE_INFO r1
		on r1.role_id = r.role_id
		group by r.user_id) r 
		on r.user_id = t.id left join
		(select d.dept_id, sys_connect_by_path(d.dept_name, '>>') FULL_NAME
		from KONKA_DEPT d
		start with d.DEPT_ID = 0
		connect by prior d.DEPT_ID = d.par_id) a
		on a.dept_id = t.dept_id
		LEFT JOIN EC_BASE_CARD_NO c ON t.CARD_NO=c.CARD_NO
                         LEFT JOIN EC_BASE_CARD_LEVEL e ON c.CARD_LEVEL=e.CARD_LEVEL
                         LEFT JOIN  (SELECT sum (PAY_INTEGRAL) INTEGRAL, ORDER_USER_ID
                             FROM PSHOW_ORDER
                            WHERE state = 60
                           GROUP BY ORDER_USER_ID) o
                           on t.id=o.ORDER_USER_ID
         LEFT JOIN (SELECT sum (price) AS D_PRICE, USER_ID
                    FROM EC_VOUCHERS
                   WHERE INFO_STATE = 1
                  GROUP BY USER_ID) j
          ON t.id = j.USER_ID
       LEFT JOIN (SELECT sum (price) AS W_PRICE, USER_ID
                    FROM EC_VOUCHERS
                   WHERE INFO_STATE = 0
                  GROUP BY USER_ID) q
          ON t.id = q.USER_ID
       LEFT JOIN (SELECT sum (aa.REBATES) AS D_REBATES, ORDER_USER_ID
                    FROM PSHOW_ORDE_DETAILS aa, PSHOW_ORDER bb
                   WHERE     aa.ORDER_ID = bb.id
                         AND bb.ORDER_FROM = 1
                         AND bb.state IN (60)
                         AND aa.REBATES_STATUS = 1
                  GROUP BY ORDER_USER_ID) cc
          ON t.id = cc.ORDER_USER_ID
        LEFT JOIN (SELECT sum (aa.REBATES) AS W_REBATES, ORDER_USER_ID
                    FROM PSHOW_ORDE_DETAILS aa, PSHOW_ORDER bb
                   WHERE     aa.ORDER_ID = bb.id
                         AND bb.ORDER_FROM = 1
                         AND bb.state IN (60)
                         AND aa.REBATES_STATUS = 2
                  GROUP BY ORDER_USER_ID) dd
          ON t.id = dd.ORDER_USER_ID 
          LEFT JOIN(   SELECT sum(SCORE) as D_SCORE,USER_ID FROM  EC_USER_SCORE_REC  p where p.OPR_TYPE=1 group by USER_ID) ll
        ON t.id=ll.USER_ID   
        LEFT JOIN KONKA_R3_SHOP f on t.CUST_ID=f.ID 
        left join KONKA_DEPT g on t.DEPT_ID=g.DEPT_ID and g.DEPT_TYPE=3                
		where  t.IS_XX_USER = 0
		<isNotEmpty prepend=" and " property="map.card_level_name">
			e.card_level = #map.card_level_name:VARCHAR# 
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.r3_code_like">
			f.R3_CODE like  '%'||#map.r3_code_like:VARCHAR#||'%' 
		</isNotEmpty>
		<include refid="sf-ecUser" />)

	</select>
	
	<select id="selectEcUserWithPositionNameAndFullDeptNamePaginatedList"
		resultMap="ecUserWithPositionNameAndFullDeptName" parameterClass="ecUser">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT t.*,  a.FULL_NAME as FULL_DEPT_NAME,e.CARD_LEVEL_NAME as card_level_name,o.INTEGRAL as pay_integral,
		j.D_PRICE AS da_price,
        q.W_PRICE AS wa_price,
        cc.D_REBATES as da_rebates,
        dd.W_REBATES as wa_rebates,
        ll.D_SCORE as da_score,
        f.R3_CODE as r3_code,
        g.dept_name as dept_name,
        c.CARD_SENDER as card_sender
		from EC_USER t left join
		(select r.user_id
		from KONKA_PE_ROLE_USER r 
		left join KONKA_PE_ROLE_INFO r1
		on r1.role_id = r.role_id
		group by r.user_id) r 
		on r.user_id = t.id left join
		(select d.dept_id, sys_connect_by_path(d.dept_name, '>>') FULL_NAME
		from KONKA_DEPT d
		start with d.DEPT_ID = 0
		connect by prior d.DEPT_ID = d.par_id) a
		on a.dept_id = t.dept_id
		LEFT JOIN EC_BASE_CARD_NO c ON t.CARD_NO=c.CARD_NO
                         LEFT JOIN EC_BASE_CARD_LEVEL e ON c.CARD_LEVEL=e.CARD_LEVEL
                         LEFT JOIN  (SELECT sum (PAY_INTEGRAL) INTEGRAL, ORDER_USER_ID
                             FROM PSHOW_ORDER
                            WHERE state = 60
                           GROUP BY ORDER_USER_ID) o
                           on t.id=o.ORDER_USER_ID
                           LEFT JOIN (SELECT sum (price) AS D_PRICE, USER_ID
                    FROM EC_VOUCHERS
                   WHERE INFO_STATE = 1
                  GROUP BY USER_ID) j
          ON t.id = j.USER_ID
       LEFT JOIN (SELECT sum (price) AS W_PRICE, USER_ID
                    FROM EC_VOUCHERS
                   WHERE INFO_STATE = 0
                  GROUP BY USER_ID) q
          ON t.id = q.USER_ID
       LEFT JOIN (SELECT sum (aa.REBATES) AS D_REBATES, ORDER_USER_ID
                    FROM PSHOW_ORDE_DETAILS aa, PSHOW_ORDER bb
                   WHERE     aa.ORDER_ID = bb.id
                         AND bb.ORDER_FROM = 1
                         AND bb.state IN (60)
                         AND aa.REBATES_STATUS = 1
                  GROUP BY ORDER_USER_ID) cc
          ON t.id = cc.ORDER_USER_ID
        LEFT JOIN (SELECT sum (aa.REBATES) AS W_REBATES, ORDER_USER_ID
                    FROM PSHOW_ORDE_DETAILS aa, PSHOW_ORDER bb
                   WHERE     aa.ORDER_ID = bb.id
                         AND bb.ORDER_FROM = 1
                         AND bb.state IN (60)
                         AND aa.REBATES_STATUS = 2
                  GROUP BY ORDER_USER_ID) dd
          ON t.id = dd.ORDER_USER_ID
          LEFT JOIN (  SELECT sum(SCORE) as D_SCORE,USER_ID FROM  EC_USER_SCORE_REC  p where p.OPR_TYPE=1 group by USER_ID) ll 
		  ON t.id=ll.USER_ID 
		  LEFT JOIN KONKA_R3_SHOP f on t.CUST_ID=f.ID
		   left join KONKA_DEPT g on t.DEPT_ID=g.DEPT_ID and g.DEPT_TYPE=3
		where  t.IS_XX_USER = 0
		<isNotEmpty prepend=" and " property="map.card_level_name">
			e.card_level = #map.card_level_name:VARCHAR# 
		</isNotEmpty> 
		<isNotEmpty prepend=" and " property="map.r3_code_like">
			f.R3_CODE like '%'||#map.r3_code_like:VARCHAR#||'%' 
		</isNotEmpty>
		<include refid="sf-ecUser" />
		order by t.ADD_DATE desc,t.ID desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	
	
	<select id="selectEcUserNewCount" resultClass="long" parameterClass="ecUser">
		select count(*) from (SELECT * FROM (select tt.* from (select xx.*,LEVEL as user_level from ( 
		SELECT t.*, a.CUST_NAME, a.CUST_CODE, b.GROUP_NAME FROM ec_user t
       LEFT JOIN EC_CUST_REL_USER c  ON t.id = c.USER_ID left join ec_cust a  on a.ID=t.cust_id
       LEFT JOIN EC_GROUP b  ON t.dept_ID = b.ID WHERE t.IS_XX_USER = 0
        <isNotEmpty prepend=" and " property="user_type">t.USER_TYPE = #user_type:DECIMAL#</isNotEmpty>
        <isNotEmpty prepend=" and " property="is_del">t.IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.group_id">
			b.id = #map.group_id#
		</isNotEmpty>
		order by  t.ADD_DATE desc,t.ID desc ) xx where  1=1
		START WITH xx.LINK_USER_NAME IS NULL
CONNECT BY PRIOR xx.USER_NAME = xx.LINK_USER_NAME )tt   WHERE
            1 = 1
        ) ts where 1=1
    <isNotEmpty prepend=" and " property="map.level1">
		ts.user_level = #map.level1#
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.r3_code_like">
		 ts.cust_id IN (SELECT id
                       FROM EC_CUST
                      WHERE R3_CODE like  '%'||#map.r3_code_like:VARCHAR#||'%' )
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.cust_code_like">
		 ts.cust_id IN (SELECT id
                       FROM EC_CUST
                      WHERE CUST_CODE like  '%'||#map.cust_code_like#||'%' )
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.user_name_like">ts.USER_NAME like '%' || #map.user_name_like:VARCHAR# || '%'</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.user_no_like">(UPPER(ts.USER_NO) like '%' || UPPER(#map.user_no_like:VARCHAR#) || '%') </isNotEmpty>
	<include refid="sf-ecUser-ts" />
)

	</select>
	
	<select id="selectEcUserNewPaginatedList" resultMap="ecUserNewResult" parameterClass="ecUser">
		<![CDATA[select * from (select t_.*,rownum rn_ from (
		SELECT ts.* FROM (select xx.*,LEVEL as user_level from  ( ]]>
		SELECT t.*, a.CUST_NAME, a.CUST_CODE, b.GROUP_NAME FROM ec_user t
       LEFT JOIN EC_CUST_REL_USER c  ON t.id = c.USER_ID left join ec_cust a  on a.ID=t.cust_id
       LEFT JOIN EC_GROUP b  ON t.dept_ID = b.ID WHERE t.IS_XX_USER = 0
        <isNotEmpty prepend=" and " property="user_type">t.USER_TYPE = #user_type:DECIMAL#</isNotEmpty>
        <isNotEmpty prepend=" and " property="is_del">t.IS_DEL = #is_del:DECIMAL#</isNotEmpty>
        <isNotEmpty prepend=" and " property="map.group_id">
			b.id = #map.group_id#
		</isNotEmpty>
		
		<![CDATA[ ) xx where 1=1 ]]>
		START WITH xx.LINK_USER_NAME IS NULL
CONNECT BY PRIOR xx.USER_NAME = xx.LINK_USER_NAME) ts where 1=1
    <isNotEmpty prepend=" and " property="map.level1">
		ts.user_level = #map.level1#
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.r3_code_like">
		   ts.cust_id IN (SELECT id
                       FROM EC_CUST
                      WHERE R3_CODE like  '%'||#map.r3_code_like:VARCHAR#||'%' )
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.cust_code_like">
		 ts.cust_id IN (SELECT id
                       FROM EC_CUST
                      WHERE CUST_CODE like  '%'||#map.cust_code_like#||'%' )
	</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.user_name_like">ts.USER_NAME like '%' || #map.user_name_like:VARCHAR# || '%'</isNotEmpty>
	<isNotEmpty prepend=" and " property="map.user_no_like">(UPPER(ts.USER_NO) like '%' || UPPER(#map.user_no_like:VARCHAR#) || '%') </isNotEmpty>
	<include refid="sf-ecUser-ts" />
	ORDER BY ts.add_date desc,ts.id desc   ) t_ where 1=1  <![CDATA[ AND rownum <= (#row.first# + #row.count#) ) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectEcUser" resultMap="ecUserResultForShowinfo"	parameterClass="ecUser">
		select t.*,c.dept_name,c.dept_id as par_dept_ids ,c.dept_type,c.par_id
		,(SELECT r3_code FROM KONKA_R3_SHOP where id=t.cust_id) r3_code
		from EC_USER t left join konka_dept c on c.dept_id = t.dept_id
		where 1 = 1 and IS_XX_USER = 0
		<include refid="sf-ecUser" />
	</select>
	<!--	当前用户下级会员信息-->
	<select id="selectSubEcUserByUserNameCount" resultClass="long" parameterClass="ecUser">
		 SELECT count(*)
				  FROM    EC_USER t
				        WHERE 1=1 and t.user_name in (select a.user_name from EC_USER a where 1 = 1
				 <isNotEmpty prepend="  " property="map.link_user_name">
			      START WITH a.link_user_name = #map.link_user_name:VARCHAR#
					CONNECT BY PRIOR a.user_name =  a.link_user_name
		       </isNotEmpty>)
		      <include refid="sf-ecUser" />
	</select>
<!--	当前用户下级会员信息-->
	<select id="selectSubEcUserByUserNameList" resultMap="ecUserResult"	parameterClass="ecUser">
	   <![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		   SELECT *
				  FROM    EC_USER t
				       WHERE 1=1 and t.user_name in (select a.user_name from EC_USER a where 1 = 1
				 <isNotEmpty prepend="  " property="map.link_user_name">
			      START WITH a.link_user_name = #map.link_user_name:VARCHAR#
					CONNECT BY PRIOR a.user_name =  a.link_user_name
		       </isNotEmpty>)
		      <include refid="sf-ecUser" />
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	<select id="selectEcUserList" resultMap="ecUserResultForList"	parameterClass="ecUser">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from EC_USER t where 1 = 1 and t.IS_XX_USER = 0
		<include refid="sf-ecUser" />
		order by t.IS_DEL asc, t.ID desc
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>


	<select id="selectEcUserPaginatedList" resultMap="ecUserResult"	parameterClass="ecUser">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from EC_USER t where 1 = 1 and t.IS_XX_USER = 0
		<include refid="sf-ecUser" />
		order by t.IS_DEL asc, t.ID desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectEcUserById" resultMap="ecUserResultForShowinfo"	parameterClass="long">
		select t.*,c.dept_name,c.dept_id as par_dept_ids ,c.dept_type,c.par_id
		,(SELECT r3_code FROM KONKA_R3_SHOP where id=t.cust_id) r3_code
		from EC_USER t left join konka_dept c on c.dept_id =t.dept_id where t.id = #value#
	</select>
	
	<select id="selectEcUserForHydjCount" resultClass="long" parameterClass="ecUser"> 
		SELECT count(*) FROM EC_USER t left join 
		(select sum(PAY_INTEGRAL) INTEGRAL ,ORDER_USER_ID  from PSHOW_ORDER where state=60  group by ORDER_USER_ID)o
		on t.id=o.ORDER_USER_ID where  t.is_act=0  and INTEGRAL is not null 
		<include refid="sf-ecUser" />  
	</select>
	
	<select id="selectEcUserPaginatedForHydjList" resultMap="ecUserResultForHydj"	parameterClass="ecUser">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT t.*,o.INTEGRAL FROM EC_USER t left join 
		(select sum(PAY_INTEGRAL) INTEGRAL ,ORDER_USER_ID  from PSHOW_ORDER where state=60  group by ORDER_USER_ID)o
		on t.id=o.ORDER_USER_ID where  t.is_act=0  and INTEGRAL is not null 
		<include refid="sf-ecUser" /> 
		order by INTEGRAL desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	
	<select id="selectEcUserNo" resultClass="long" parameterClass="ecUser" >
		select EC_USER_NO_SEQ.nextval as id from dual
	</select>
	
	<insert id="insertEcUser" parameterClass="ecUser">
		<selectKey resultClass="long" keyProperty="id">select EC_USER_SEQ.nextval as id from dual </selectKey>
		<![CDATA[insert into EC_USER (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="user_type">USER_TYPE</isNotNull>	
			<isNotNull prepend="," property="user_name">USER_NAME</isNotNull>	
			<isNotNull prepend="," property="pass_word">PASS_WORD</isNotNull>	
			<isNotNull prepend="," property="real_name">REAL_NAME</isNotNull>	
			<isNotNull prepend="," property="link_tel">LINK_TEL</isNotNull>	
			<isNotNull prepend="," property="link_addr">LINK_ADDR</isNotNull>	
			<isNotNull prepend="," property="email">EMAIL</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID</isNotNull>	
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>	
			<isNotNull prepend="," property="department">DEPARTMENT</isNotNull>	
			<isNotNull prepend="," property="chargeman">CHARGEMAN</isNotNull>	
			<isNotNull prepend="," property="is_chapter">IS_CHAPTER</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="par_dept_id">PAR_DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="leader_id">LEADER_ID</isNotNull>	
			<isNotNull prepend="," property="position_id">POSITION_ID</isNotNull>	
			<isNotNull prepend="," property="sex">SEX</isNotNull>	
			<isNotNull prepend="," property="birthday">BIRTHDAY</isNotNull>	
			<isNotNull prepend="," property="p_index">P_INDEX</isNotNull>	
			<isNotNull prepend="," property="link_post">LINK_POST</isNotNull>	
			<isNotNull prepend="," property="link_phone">LINK_PHONE</isNotNull>	
			<isNotNull prepend="," property="link_qq">LINK_QQ</isNotNull>	
			<isNotNull prepend="," property="link_msn">LINK_MSN</isNotNull>	
			<isNotNull prepend="," property="add_e_user_id">ADD_E_USER_ID</isNotNull>	
			<isNotNull prepend="," property="login_count">LOGIN_COUNT</isNotNull>	
			<isNotNull prepend="," property="last_login_ip">LAST_LOGIN_IP</isNotNull>	
			<isNotNull prepend="," property="last_login_time">LAST_LOGIN_TIME</isNotNull>	
			<isNotNull prepend="," property="order_value">ORDER_VALUE</isNotNull>	
			<isNotNull prepend="," property="is_xx_user">IS_XX_USER</isNotNull>	
			<isNotNull prepend="," property="c_id">C_ID</isNotNull>	
			<isNotNull prepend="," property="bank_account">BANK_ACCOUNT</isNotNull>	
			<isNotNull prepend="," property="social_number">SOCIAL_NUMBER</isNotNull>	
			<isNotNull prepend="," property="bank_account_name">BANK_ACCOUNT_NAME</isNotNull>
			<isNotNull prepend="," property="bank_name">BANK_NAME</isNotNull>
			<isNotNull prepend="," property="payroll_card">PAYROLL_CARD</isNotNull>	
			<isNotNull prepend="," property="card_no">CARD_NO</isNotNull>	
			<isNotNull prepend="," property="pay_pwd">PAY_PWD</isNotNull>
			<isNotNull prepend="," property="is_act">IS_ACT</isNotNull>	
			<isNotNull prepend="," property="is_own">IS_OWN</isNotNull>
			<isNotNull prepend="," property="cust_id">CUST_ID</isNotNull>
			<isNotNull prepend="," property="audit_date">AUDIT_DATE</isNotNull>
			<isNotNull prepend="," property="is_epp_fgs">IS_EPP_FGS</isNotNull>		
			<isNotNull prepend="," property="plat_sys">PLAT_SYS</isNotNull>
			<isNotNull prepend="," property="link_user_name">LINK_USER_NAME</isNotNull>
			<isNotNull prepend="," property="is_allowed">IS_ALLOWED</isNotNull>
			<isNotNull prepend="," property="user_no">USER_NO</isNotNull>
			<isNotNull prepend="," property="link_code">LINK_CODE</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_type">#user_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_name">#user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pass_word">#pass_word:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="real_name">#real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_tel">#link_tel:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_addr">#link_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="email">#email:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="add_user_id">#add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="department">#department:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="chargeman">#chargeman:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_chapter">#is_chapter:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="par_dept_id">#par_dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="leader_id">#leader_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="position_id">#position_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sex">#sex:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="birthday">#birthday:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="p_index">#p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="link_post">#link_post:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_phone">#link_phone:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_qq">#link_qq:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_msn">#link_msn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_e_user_id">#add_e_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="login_count">#login_count:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="last_login_ip">#last_login_ip:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="last_login_time">#last_login_time:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="order_value">#order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_xx_user">#is_xx_user:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="c_id">#c_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bank_account">#bank_account:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="social_number">#social_number:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bank_account_name">#bank_account_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="bank_name">#bank_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="payroll_card">#payroll_card:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="card_no">#card_no:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pay_pwd">#pay_pwd:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_act">#is_act:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_own">#is_own:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cust_id">#cust_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_date">#audit_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="is_epp_fgs">#is_epp_fgs:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="plat_sys">#plat_sys:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="link_user_name">#link_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_allowed">#is_allowed:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_no">#user_no:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_code">#link_code:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateEcUser" parameterClass="EcUser">
		update EC_USER
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_type">USER_TYPE = #user_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="user_name">USER_NAME = #user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pass_word">PASS_WORD = #pass_word:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="real_name">REAL_NAME = #real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_tel">LINK_TEL = #link_tel:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_addr">LINK_ADDR = #link_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="email">EMAIL = #email:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID = #add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL = #is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="department">DEPARTMENT = #department:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="chargeman">CHARGEMAN = #chargeman:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_chapter">IS_CHAPTER = #is_chapter:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="par_dept_id">PAR_DEPT_ID = #par_dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="leader_id">LEADER_ID = #leader_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="position_id">POSITION_ID = #position_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sex">SEX = #sex:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="birthday">BIRTHDAY = #birthday:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="p_index">P_INDEX = #p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="link_post">LINK_POST = #link_post:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_phone">LINK_PHONE = #link_phone:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_qq">LINK_QQ = #link_qq:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="link_msn">LINK_MSN = #link_msn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_e_user_id">ADD_E_USER_ID = #add_e_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="login_count">LOGIN_COUNT = #login_count:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="last_login_ip">LAST_LOGIN_IP = #last_login_ip:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="bank_account">BANK_ACCOUNT = #bank_account:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="social_number">SOCIAL_NUMBER = #social_number:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="last_login_time">LAST_LOGIN_TIME = #last_login_time:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="order_value">ORDER_VALUE = #order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_xx_user">IS_XX_USER = #is_xx_user:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="c_id">C_ID = #c_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bank_account_name">BANK_ACCOUNT_NAME = #bank_account_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="payroll_card">PAYROLL_CARD = #payroll_card:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="bank_name">BANK_NAME = #bank_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="card_no">CARD_NO = #card_no:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pay_pwd">PAY_PWD = #pay_pwd:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_act">IS_ACT = #is_act:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_own">IS_OWN = #is_own:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cust_id">CUST_ID = #cust_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_date">AUDIT_DATE = #audit_date:TIMESTAMP#</isNotNull>
			<isNotNull prepend="," property="is_epp_fgs">IS_EPP_FGS = #is_epp_fgs:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="plat_sys">PLAT_SYS = #plat_sys:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="link_user_name">LINK_USER_NAME = #link_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="user_no">USER_NO = #user_no:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="is_allowed">IS_ALLOWED = #is_allowed:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="link_code">LINK_CODE = #link_code:VARCHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteEcUser" parameterClass="EcUser">
		update EC_USER set IS_DEL = 1 where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#
				</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>