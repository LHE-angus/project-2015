<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_R3_ORDER_LINES">

	<typeAlias alias="konkaR3OrderLines" type="com.ebiz.mmt.domain.KonkaR3OrderLines" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertKonkaR3OrderLines" />
		<flushOnExecute statement="updateKonkaR3OrderLines" />
		<flushOnExecute statement="deleteKonkaR3OrderLines" />
	</cacheModel>

	<resultMap id="konkaR3OrderLinesResultForList" class="konkaR3OrderLines">
		<result column="R3_ORDER_LINE_ID" property="r3_order_line_id" jdbcType="DECIMAL" />
		<result column="MATERIAL_CODE" property="material_code" jdbcType="VARCHAR" />
		<result column="MATERIAL_NAME" property="material_name" jdbcType="VARCHAR" />
		<result column="MATERIAL_DESC" property="material_desc" jdbcType="VARCHAR" />
		<result column="REVIEW_NOTES" property="review_notes" jdbcType="VARCHAR" />
		<result column="SHIP_DESC" property="ship_desc" jdbcType="VARCHAR" />
		<result column="UNIT_CODE" property="unit_code" jdbcType="VARCHAR" />
		<result column="APPLY_AMOUNT" property="apply_amount" jdbcType="DECIMAL" />
		<result column="REVIEW_AMOUNT" property="review_amount" jdbcType="DECIMAL" />
		<result column="UNIT_PRICE" property="unit_price" jdbcType="DECIMAL" />
		<result column="TOTAL_MONEY" property="total_money" jdbcType="DECIMAL" />
		<result column="ATTRIBUTE1" property="attribute1" jdbcType="VARCHAR" />
		<result column="ATTRIBUTE2" property="attribute2" jdbcType="VARCHAR" />
		<result column="R3_ORDER_HEADER_ID" property="r3_order_header_id" jdbcType="DECIMAL" />


		<result column="PLANT" property="plant" jdbcType="VARCHAR" />
		<result column="ITEM_CATEG" property="item_categ" jdbcType="VARCHAR" />
		<result column="SALQTYNUM" property="salqtynum" jdbcType="DECIMAL" />
		<result column="SQLQTYDEN" property="sqlqtyden" jdbcType="DECIMAL" />
		<result column="SHIP_POINT" property="ship_point" jdbcType="VARCHAR" />

	</resultMap>

	<resultMap id="konkaR3OrderLinesResult" class="konkaR3OrderLines" extends="konkaR3OrderLinesResultForList">
	</resultMap>

	<sql id="sf-konkaR3OrderLines">
		<isNotEmpty prepend=" and " property="r3_order_line_id">R3_ORDER_LINE_ID = #r3_order_line_id:DECIMAL#</isNotEmpty>

		<isNotEmpty prepend=" and " property="r3_order_header_id">R3_ORDER_HEADER_ID = #r3_order_header_id:DECIMAL#</isNotEmpty>

		<isNotEmpty prepend=" and " property="material_code">MATERIAL_CODE = #material_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="material_name">MATERIAL_NAME = #material_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="material_desc">MATERIAL_DESC = #material_desc:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="review_notes">REVIEW_NOTES = #review_notes:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="ship_desc">SHIP_DESC = #ship_desc:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="unit_code">UNIT_CODE = #unit_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="apply_amount">APPLY_AMOUNT = #apply_amount:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="review_amount">REVIEW_AMOUNT = #review_amount:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="unit_price">UNIT_PRICE = #unit_price:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="total_money">TOTAL_MONEY = #total_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="attribute1">ATTRIBUTE1 = #attribute1:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="attribute2">ATTRIBUTE2 = #attribute2:VARCHAR#</isNotEmpty>

		<isNotEmpty prepend=" and " property="plant">PLANT = #plant:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="item_categ">ITEM_CATEG = #item_categ:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="salqtynum">SALQTYNUM = #salqtynum:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sqlqtyden">SQLQTYDEN = #sqlqtyden:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="ship_point">SHIP_POINT = #ship_point:VARCHAR#</isNotEmpty>

	</sql>

	<select id="selectKonkaR3OrderLines" resultMap="konkaR3OrderLinesResult" parameterClass="konkaR3OrderLines" cacheModel="oneDayCache">
		select * from KONKA_R3_ORDER_LINES where 1 = 1
		<include refid="sf-konkaR3OrderLines" />
	</select>

	<select id="selectKonkaR3OrderLinesList" resultMap="konkaR3OrderLinesResultForList" parameterClass="konkaR3OrderLines" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKA_R3_ORDER_LINES where 1 = 1
		<include refid="sf-konkaR3OrderLines" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) fetch first #row.count# rows only ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaR3OrderLinesCount" resultClass="long" parameterClass="konkaR3OrderLines" cacheModel="oneDayCache">
		select count(*) from KONKA_R3_ORDER_LINES where 1 = 1
		<include refid="sf-konkaR3OrderLines" />
	</select>

	<select id="selectKonkaR3OrderLinesPaginatedList" resultMap="konkaR3OrderLinesResult" parameterClass="konkaR3OrderLines" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownumber() over() as rn_ from ( ]]>
		select * from KONKA_R3_ORDER_LINES where 1 = 1
		<include refid="sf-konkaR3OrderLines" />
		<!-- order by ID asc -->
		<![CDATA[ ) t_ ) where rn_ >= (#row.first# + 1) and rn_ <= (#row.first# + #row.count#) ]]>
	</select>

	<insert id="insertKonkaR3OrderLines" parameterClass="konkaR3OrderLines">
		<selectKey resultClass="long" keyProperty="r3_order_line_id">select nextval for konka_r3_order_lines_s as id from sysibm.sysdummy1 </selectKey>
		<![CDATA[insert into KONKA_R3_ORDER_LINES (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="r3_order_line_id">R3_ORDER_LINE_ID</isNotNull>
			<isNotNull prepend="," property="material_code">MATERIAL_CODE</isNotNull>
			<isNotNull prepend="," property="material_name">MATERIAL_NAME</isNotNull>
			<isNotNull prepend="," property="material_desc">MATERIAL_DESC</isNotNull>
			<isNotNull prepend="," property="review_notes">REVIEW_NOTES</isNotNull>
			<isNotNull prepend="," property="ship_desc">SHIP_DESC</isNotNull>
			<isNotNull prepend="," property="unit_code">UNIT_CODE</isNotNull>
			<isNotNull prepend="," property="apply_amount">APPLY_AMOUNT</isNotNull>
			<isNotNull prepend="," property="review_amount">REVIEW_AMOUNT</isNotNull>
			<isNotNull prepend="," property="unit_price">UNIT_PRICE</isNotNull>
			<isNotNull prepend="," property="total_money">TOTAL_MONEY</isNotNull>
			<isNotNull prepend="," property="attribute1">ATTRIBUTE1</isNotNull>
			<isNotNull prepend="," property="attribute2">ATTRIBUTE2</isNotNull>
			<isNotNull prepend="," property="r3_order_header_id">R3_ORDER_HEADER_ID</isNotNull>

			<isNotNull prepend="," property="plant">PLANT</isNotNull>
			<isNotNull prepend="," property="item_categ">ITEM_CATEG</isNotNull>
			<isNotNull prepend="," property="salqtynum">SALQTYNUM</isNotNull>
			<isNotNull prepend="," property="sqlqtyden">SQLQTYDEN</isNotNull>
			<isNotNull prepend="," property="ship_point">SHIP_POINT</isNotNull>

		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="r3_order_line_id">#r3_order_line_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="material_code">#material_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="material_name">#material_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="material_desc">#material_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="review_notes">#review_notes:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="ship_desc">#ship_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="unit_code">#unit_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="apply_amount">#apply_amount:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="review_amount">#review_amount:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="unit_price">#unit_price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="total_money">#total_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="attribute1">#attribute1:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="attribute2">#attribute2:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="r3_order_header_id">#r3_order_header_id:DECIMAL#</isNotNull>

			<isNotNull prepend="," property="plant">#plant:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="item_categ">#item_categ:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="salqtynum">#salqtynum:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sqlqtyden">#sqlqtyden:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="ship_point">#ship_point:VARCHAR#</isNotNull>


		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaR3OrderLines" parameterClass="KonkaR3OrderLines">
		update KONKA_R3_ORDER_LINES
		<dynamic prepend="set">
			<isNotNull prepend="," property="r3_order_line_id">R3_ORDER_LINE_ID = #r3_order_line_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="material_code">MATERIAL_CODE = #material_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="material_name">MATERIAL_NAME = #material_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="material_desc">MATERIAL_DESC = #material_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="review_notes">REVIEW_NOTES = #review_notes:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="ship_desc">SHIP_DESC = #ship_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="unit_code">UNIT_CODE = #unit_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="apply_amount">APPLY_AMOUNT = #apply_amount:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="review_amount">REVIEW_AMOUNT = #review_amount:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="unit_price">UNIT_PRICE = #unit_price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="total_money">TOTAL_MONEY = #total_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="attribute1">ATTRIBUTE1 = #attribute1:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="attribute2">ATTRIBUTE2 = #attribute2:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="r3_order_header_id">R3_ORDER_HEADER_ID = #r3_order_header_id:DECIMAL#</isNotNull>

			<isNotNull prepend="," property="plant">PLANT = #plant:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="item_categ">ITEM_CATEG= #item_categ:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="salqtynum">SALQTYNUM = #salqtynum:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sqlqtyden">SQLQTYDEN = #sqlqtyden:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="ship_point">SHIP_POINT = #ship_point:VARCHAR#</isNotNull>

		</dynamic>
		where
		<isNotEmpty prepend=" " property="r3_order_line_id">R3_ORDER_LINE_ID = #r3_order_line_id#</isNotEmpty>
		<isEmpty prepend=" " property="r3_order_line_id">
			<isNotEmpty prepend=" " property="map.pks">
				R3_ORDER_LINE_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaR3OrderLines" parameterClass="KonkaR3OrderLines">
		delete from KONKA_R3_ORDER_LINES where
		<isNotEmpty prepend=" " property="r3_order_line_id">R3_ORDER_LINE_ID = #r3_order_line_id#</isNotEmpty>
		<isEmpty prepend=" " property="r3_order_line_id">
			<isNotEmpty prepend=" " property="map.pks">
				R3_ORDER_LINE_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>