<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KonkaParagonEquipmentC">

    <typeAlias alias="konkaParagonEquipmentC" type="com.ebiz.mmt.domain.KonkaParagonEquipmentC" />

	
	
    <resultMap id="konkaParagonEquipmentCResult" class="konkaParagonEquipmentC">
		<result property="equipment_id" column="EQUIPMENT_ID" jdbcType="DECIMAL" />
		<result property="equipment_name" column="EQUIPMENT_NAME" jdbcType="VARCHAR" />
		<result property="status" column="STATUS" jdbcType="DECIMAL" />
		<result property="etype" column="ETYPE" jdbcType="DECIMAL" />
		<result property="proto_size" column="PROTO_SIZE" jdbcType="DECIMAL" />
		<result property="addman" column="ADDMAN" jdbcType="DECIMAL" />
		<result property="addtime" column="ADDTIME" jdbcType="DATETIME" />
		<result property="is_del" column="IS_DEL" jdbcType="DATETIME" />
    </resultMap>
    
    <resultMap id="konkaParagonEquipmentResult" class="konkaParagonEquipmentC" extends="konkaParagonEquipmentCResult">
		<result property="map.set_num" column="SET_NUM" jdbcType="DECIMAL" />
		<result property="map.startime" column="STARTIME" jdbcType="DATETIME" />
		<result property="map.endtime" column="ENDTIME" jdbcType="DATETIME" />
    </resultMap>
    

	<sql id="sf-konkaParagonEquipmentC">
		<isNotEmpty prepend=" and " property="equipment_id">a.EQUIPMENT_ID = #equipment_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="equipment_name">a.EQUIPMENT_NAME = #equipment_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="status">a.STATUS = #status:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="etype">a.ETYPE = #etype:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="proto_size">a.PROTO_SIZE = #proto_size:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="addman">a.ADDMAN = #addman:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="addtime">a.ADDTIME = #addtime:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">a.IS_DEL = #is_del:DATETIME#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.equipment_name_like">UPPER(A.EQUIPMENT_NAME) like '%' || UPPER(#map.equipment_name_like#) || '%'</isNotEmpty>
		<isNotEmpty property="map.st_pub_date">
			<isNotEmpty prepend=" and " property="map.en_pub_date">
				<![CDATA[ to_char(a.ADDTIME, 'yyyy-mm-dd') >= #map.st_pub_date# and to_char(a.ADDTIME, 'yyyy-mm-dd') <= #map.en_pub_date#]]>
			</isNotEmpty>
			<isEmpty prepend=" and " property="map.en_pub_date">
				to_char(a.ADDTIME, 'yyyy-mm-dd') >= #map.st_pub_date#
			</isEmpty>
		</isNotEmpty>
		<isEmpty property="map.st_pub_date">
			<isNotEmpty prepend=" and " property="map.en_pub_date">
				<![CDATA[ 
				to_char(a.ADDTIME, 'yyyy-mm-dd') <= #map.en_pub_date#
				]]>
			</isNotEmpty>
		</isEmpty>
	</sql>
	
	<select id="selectKonkaParagonEquipmentC" resultMap="konkaParagonEquipmentCResult" parameterClass="konkaParagonEquipmentC" >
		select * from KONKA_PARAGON_EQUIPMENT_C a where 1=1
		<include refid="sf-konkaParagonEquipmentC" />
	</select>
	
	<select id="selectKonkaParagonEquipment" resultMap="konkaParagonEquipmentResult" parameterClass="konkaParagonEquipmentC" >
        select a.*, j.equipment_num as set_num, J.startime as startime, J.endtime as endtime
		  from KONKA_PARAGON_EQUIPMENT_C a
		  left join KONKA_PARAGON_EQUIPMENT_J j on j.EQUIPMENT_ID = a.EQUIPMENT_ID
		<isNotEmpty prepend=" and " property="map.shop_code">j.SHOW_SHOP_CODE = #map.shop_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.fixdate">j.FIXDATE = #map.fixdate:VARCHAR#</isNotEmpty>
		 where 1 = 1
		<include refid="sf-konkaParagonEquipmentC" />
	</select>
	
	<select id="selectKonkaParagonEquipmentCList" resultMap="konkaParagonEquipmentCResult" parameterClass="konkaParagonEquipmentC" >
		<isNotEmpty property="row.count"><![CDATA[ select * from ( ]]></isNotEmpty>
		select * from KONKA_PARAGON_EQUIPMENT_C a where 1=1
		<include refid="sf-konkaParagonEquipmentC" />
		 order by a.proto_size desc,a.EQUIPMENT_ID desc 
		<isNotEmpty property="row.count"><![CDATA[ ) where rownum<=#row.count# ]]></isNotEmpty>
	</select>
	
	<select id="selectKonkaParagonEquipmentCCount" resultClass="long" parameterClass="konkaParagonEquipmentC" >
		select count(*) from KONKA_PARAGON_EQUIPMENT_C a where 1 = 1
		<include refid="sf-konkaParagonEquipmentC" />
	</select>
	
	<select id="selectKonkaParagonEquipmentCPaginatedList" resultMap="konkaParagonEquipmentCResult" parameterClass="konkaParagonEquipmentC" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKA_PARAGON_EQUIPMENT_C a where 1=1
		<include refid="sf-konkaParagonEquipmentC" />
		 order by a.proto_size desc,a.EQUIPMENT_ID desc 
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaParagonEquipmentC" parameterClass="konkaParagonEquipmentC">
		<selectKey resultClass="long" keyProperty="equipment_id">select KONKA_PARAGON_SEQ.nextval as equipment_id from dual</selectKey>
		<![CDATA[insert into KONKA_PARAGON_EQUIPMENT_C (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="equipment_id">EQUIPMENT_ID</isNotNull>
			<isNotNull prepend="," property="equipment_name">EQUIPMENT_NAME</isNotNull>
			<isNotNull prepend="," property="status">STATUS</isNotNull>
			<isNotNull prepend="," property="etype">ETYPE</isNotNull>
			<isNotNull prepend="," property="proto_size">PROTO_SIZE</isNotNull>
			<isNotNull prepend="," property="addman">ADDMAN</isNotNull>
			<isNotNull prepend="," property="addtime">ADDTIME</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="equipment_id">#equipment_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="equipment_name">#equipment_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="status">#status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="etype">#etype:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="proto_size">#proto_size:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addman">#addman:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addtime">#addtime:DATETIME#</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:DATETIME#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>
	
	<update id="updateKonkaParagonEquipmentC" parameterClass="konkaParagonEquipmentC">
		update KONKA_PARAGON_EQUIPMENT_C
		<dynamic prepend="set">
			<isNotNull prepend="," property="equipment_id">EQUIPMENT_ID = #equipment_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="equipment_name">EQUIPMENT_NAME = #equipment_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="status">STATUS = #status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="etype">ETYPE = #etype:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="proto_size">PROTO_SIZE = #proto_size:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addman">ADDMAN = #addman:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="addtime">ADDTIME = #addtime:DATETIME#</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL = #is_del:DATETIME#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="equipment_id">equipment_id = #equipment_id#</isNotEmpty>
		<isEmpty prepend=" " property="equipment_id">
			<isNotEmpty prepend=" " property="map.pks">
				EQUIPMENT_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaParagonEquipmentC" parameterClass="konkaParagonEquipmentC">
		delete from KONKA_PARAGON_EQUIPMENT_C where
		<isNotEmpty prepend=" " property="equipment_id">EQUIPMENT_ID = #equipment_id#</isNotEmpty>
		<isEmpty prepend=" " property="equipment_id">
			<isNotEmpty prepend=" " property="map.pks">
				EQUIPMENT_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>
</sqlMap>
