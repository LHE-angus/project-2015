<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_MOBILE_FIGHT_REPORT">

	<typeAlias alias="konkaMobileFightReport" type="com.ebiz.mmt.domain.KonkaMobileFightReport" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertKonkaMobileFightReport" />
		<flushOnExecute statement="updateKonkaMobileFightReport" />
		<flushOnExecute statement="deleteKonkaMobileFightReport" />
	</cacheModel>

	<resultMap id="konkaMobileFightReportResultForList" class="konkaMobileFightReport">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="CHANNEL_A_ID" property="channel_a_id" jdbcType="DECIMAL" />
		<result column="CHANNEL_A_NAME" property="channel_a_name" jdbcType="VARCHAR" />
		<result column="CHANNEL_B_ID" property="channel_b_id" jdbcType="DECIMAL" />
		<result column="CHANNEL_B_NAME" property="channel_b_name" jdbcType="VARCHAR" />
		<result column="ORG_ID" property="org_id" jdbcType="DECIMAL" />
		<result column="ORG_NAME" property="org_name" jdbcType="VARCHAR" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="DEPT_NAME" property="dept_name" jdbcType="VARCHAR" />
		<result column="BRAND_ID" property="brand_id" jdbcType="DECIMAL" />
		<result column="CLS_ID" property="cls_id" jdbcType="DECIMAL" />
		<result column="SIZE_ID" property="size_id" jdbcType="DECIMAL" />
		<result column="MODEL_ID" property="model_id" jdbcType="VARCHAR" />
		<result column="NUM" property="num" jdbcType="DECIMAL" />
		<result column="PRICE" property="price" jdbcType="DECIMAL" />
		<result column="SUBCOMP_ID" property="subcomp_id" jdbcType="DECIMAL" />
		<result column="SUBCOMP_NAME" property="subcomp_name" jdbcType="VARCHAR" />
		<result column="OFFICE_ID" property="office_id" jdbcType="DECIMAL" />
		<result column="OFFICE_NAME" property="office_name" jdbcType="VARCHAR" />
		<result column="REPORT_MAN" property="report_man" jdbcType="DECIMAL" />
		<result column="REPORT_NAME" property="report_name" jdbcType="VARCHAR" />
		<result column="REPORT_TIME" property="report_time" jdbcType="DATETIME" />
		<result column="STATUS" property="status" jdbcType="DECIMAL" />
		<result column="SINGLE_PRICE" property="single_price" jdbcType="DECIMAL" />
		<result column="MEMO" property="memo" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="konkaMobileFightReportResult" class="konkaMobileFightReport" extends="konkaMobileFightReportResultForList">
	</resultMap>

	<resultMap id="konkaMobileFightReportResultForQuery" class="konkaMobileFightReport" extends="konkaMobileFightReportResultForList">
		<result column="BRAND_NAME" property="map.brand_name" jdbcType="VARCHAR" />
		<result column="CLS_NAME" property="map.cls_name" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="sf-konkaMobileFightReport">
		<isNotEmpty prepend=" and " property="id">ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_a_id">CHANNEL_A_ID = #channel_a_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_a_name">CHANNEL_A_NAME = #channel_a_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_b_id">CHANNEL_B_ID = #channel_b_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_b_name">CHANNEL_B_NAME = #channel_b_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="org_id">ORG_ID = #org_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="org_name">ORG_NAME = #org_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_name">DEPT_NAME = #dept_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="brand_id">BRAND_ID = #brand_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cls_id">CLS_ID = #cls_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="size_id">SIZE_ID = #size_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="model_id">MODEL_ID = #model_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="num">NUM = #num:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="price">PRICE = #price:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_id">SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_name">SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_id">OFFICE_ID = #office_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_name">OFFICE_NAME = #office_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_man">REPORT_MAN = #report_man:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_name">REPORT_NAME = #report_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_time">REPORT_TIME = #report_time:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="single_price">SINGLE_PRICE = #single_price:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="memo">MEMO = #memo:VARCHARL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="status">STATUS = #status:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.startime">
		<![CDATA[REPORT_TIME >= to_date(#map.startime#||'00:00:00','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.endtime">
		<![CDATA[REPORT_TIME <= to_date(#map.endtime#||'23:59:59','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.num_price_not_null"><![CDATA[ num <> 0 and price <> 0 ]]></isNotEmpty>
	</sql>

	<select id="selectKonkaMobileFightReport" resultMap="konkaMobileFightReportResult" parameterClass="konkaMobileFightReport" cacheModel="oneDayCache">
		select * from KONKA_MOBILE_FIGHT_REPORT where 1 = 1
		<include refid="sf-konkaMobileFightReport" />
	</select>

	<select id="selectKonkaMobileFightReportList" resultMap="konkaMobileFightReportResultForList" parameterClass="konkaMobileFightReport" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKA_MOBILE_FIGHT_REPORT where 1 = 1
		<include refid="sf-konkaMobileFightReport" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaMobileFightReportCount" resultClass="long" parameterClass="konkaMobileFightReport" cacheModel="oneDayCache">
		select count(*) from KONKA_MOBILE_FIGHT_REPORT where 1 = 1
		<include refid="sf-konkaMobileFightReport" />
	</select>

	<select id="selectKonkaMobileFightReportPaginatedList" resultMap="konkaMobileFightReportResult" parameterClass="konkaMobileFightReport" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKA_MOBILE_FIGHT_REPORT where 1 = 1
		<include refid="sf-konkaMobileFightReport" />
		<!-- order by ID asc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<select id="selectKonkaMobileFightReportPaginatedListForQuery" resultMap="konkaMobileFightReportResultForQuery" parameterClass="konkaMobileFightReport" cacheModel="oneDayCache">
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select t.*, b.c_name as brand_name, c.cls_name as cls_name from KONKA_MOBILE_FIGHT_REPORT t
		  left join konka_mobile_category b
		    on b.c_index = t.brand_id
		  left join KONKA_BASE_PD_CLASS c
		    on c.cls_id = t.cls_id where 1 = 1
		<include refid="sf-konkaMobileFightReport" />
		order by ID desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaMobileFightReport" parameterClass="konkaMobileFightReport">
		<selectKey resultClass="long" keyProperty="id">select KONKA_MOBILE_REPORT.nextval as id from dual </selectKey>
		<![CDATA[insert into KONKA_MOBILE_FIGHT_REPORT (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="channel_a_id">CHANNEL_A_ID</isNotNull>	
			<isNotNull prepend="," property="channel_a_name">CHANNEL_A_NAME</isNotNull>	
			<isNotNull prepend="," property="channel_b_id">CHANNEL_B_ID</isNotNull>	
			<isNotNull prepend="," property="channel_b_name">CHANNEL_B_NAME</isNotNull>	
			<isNotNull prepend="," property="org_id">ORG_ID</isNotNull>	
			<isNotNull prepend="," property="org_name">ORG_NAME</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="dept_name">DEPT_NAME</isNotNull>	
			<isNotNull prepend="," property="brand_id">BRAND_ID</isNotNull>	
			<isNotNull prepend="," property="cls_id">CLS_ID</isNotNull>	
			<isNotNull prepend="," property="size_id">SIZE_ID</isNotNull>	
			<isNotNull prepend="," property="model_id">MODEL_ID</isNotNull>	
			<isNotNull prepend="," property="num">NUM</isNotNull>	
			<isNotNull prepend="," property="price">PRICE</isNotNull>	
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID</isNotNull>	
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME</isNotNull>	
			<isNotNull prepend="," property="office_id">OFFICE_ID</isNotNull>	
			<isNotNull prepend="," property="office_name">OFFICE_NAME</isNotNull>	
			<isNotNull prepend="," property="report_man">REPORT_MAN</isNotNull>	
			<isNotNull prepend="," property="report_name">REPORT_NAME</isNotNull>	
			<isNotNull prepend="," property="report_time">REPORT_TIME</isNotNull>	
			<isNotNull prepend="," property="status">STATUS</isNotNull>	
			<isNotNull prepend="," property="single_price">SINGLE_PRICE</isNotNull>	
			<isNotNull prepend="," property="memo">MEMO</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_id">#channel_a_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_name">#channel_a_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_b_id">#channel_b_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_b_name">#channel_b_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="org_id">#org_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="org_name">#org_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_name">#dept_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="brand_id">#brand_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cls_id">#cls_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="size_id">#size_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="model_id">#model_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="num">#num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="price">#price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">#subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">#subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">#office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">#office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_man">#report_man:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_name">#report_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_time">#report_time:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">#status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="single_price">#single_price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="memo">#memo:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaMobileFightReport" parameterClass="KonkaMobileFightReport">
		update KONKA_MOBILE_FIGHT_REPORT
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_id">CHANNEL_A_ID = #channel_a_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_name">CHANNEL_A_NAME = #channel_a_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_b_id">CHANNEL_B_ID = #channel_b_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_b_name">CHANNEL_B_NAME = #channel_b_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="org_id">ORG_ID = #org_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="org_name">ORG_NAME = #org_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_name">DEPT_NAME = #dept_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="brand_id">BRAND_ID = #brand_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cls_id">CLS_ID = #cls_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="size_id">SIZE_ID = #size_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="model_id">MODEL_ID = #model_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="num">NUM = #num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="price">PRICE = #price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">OFFICE_ID = #office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">OFFICE_NAME = #office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_man">REPORT_MAN = #report_man:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_name">REPORT_NAME = #report_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_time">REPORT_TIME = #report_time:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">STATUS = #status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="single_price">SINGLE_PRICE= #single_price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="memo">MEMO = #memo:VARCHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaMobileFightReport" parameterClass="KonkaMobileFightReport">
		delete from KONKA_MOBILE_FIGHT_REPORT where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>