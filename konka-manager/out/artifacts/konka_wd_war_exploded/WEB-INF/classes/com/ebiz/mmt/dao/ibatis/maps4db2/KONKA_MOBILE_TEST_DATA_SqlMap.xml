<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_MOBILE_TEST_DATA">

	<typeAlias alias="konkaMobileTestData" type="com.ebiz.mmt.domain.KonkaMobileTestData" />

	<cacheModel id="oneDayCache" type="OSCACHE">
		<flushInterval hours="24" />
		<flushOnExecute statement="insertKonkaMobileTestData" />
		<flushOnExecute statement="updateKonkaMobileTestData" />
		<flushOnExecute statement="deleteKonkaMobileTestData" />
	</cacheModel>

	<resultMap id="konkaMobileTestDataResultForList" class="konkaMobileTestData">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="PCT_CODE" property="pct_code" jdbcType="VARCHAR" />
		<result column="MEMO" property="memo" jdbcType="VARCHAR" />
		<result column="CHANNEL_A_ID" property="channel_a_id" jdbcType="DECIMAL" />
		<result column="CHANNEL_A_NAME" property="channel_a_name" jdbcType="VARCHAR" />
		<result column="CHANNEL_B_ID" property="channel_b_id" jdbcType="DECIMAL" />
		<result column="CHANNEL_B_NAME" property="channel_b_name" jdbcType="VARCHAR" />
		<result column="ORG_ID" property="org_id" jdbcType="DECIMAL" />
		<result column="ORG_NAME" property="org_name" jdbcType="VARCHAR" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="DEPT_NAME" property="dept_name" jdbcType="VARCHAR" />
		<result column="SUBCOMP_ID" property="subcomp_id" jdbcType="DECIMAL" />
		<result column="SUBCOMP_NAME" property="subcomp_name" jdbcType="VARCHAR" />
		<result column="OFFICE_ID" property="office_id" jdbcType="DECIMAL" />
		<result column="OFFICE_NAME" property="office_name" jdbcType="VARCHAR" />
		<result column="MEASURE_ID" property="measure_id" jdbcType="DECIMAL" />
		<result column="MEASURE_NAME" property="measure_name" jdbcType="VARCHAR" />
		<result column="PROTOTYPE_ID" property="prototype_id" jdbcType="DECIMAL" />
		<result column="PROTOTYPE_NAME" property="prototype_name" jdbcType="VARCHAR" />
		<result column="CATEGORY_ID" property="category_id" jdbcType="DECIMAL" />
		<result column="CATEGORY_NAME" property="category_name" jdbcType="VARCHAR" />
		<result column="MODEL_ID" property="model_id" jdbcType="DECIMAL" />
		<result column="MODEL_NAME" property="model_name" jdbcType="VARCHAR" />
		<result column="NUM" property="num" jdbcType="DECIMAL" />
		<result column="REPORT_ID" property="report_id" jdbcType="DECIMAL" />
		<result column="REPORT_NAME" property="report_name" jdbcType="VARCHAR" />
		<result column="REPORT_DATE" property="report_date" jdbcType="DATETIME" />
		<result column="STATUS" property="status" jdbcType="DECIMAL" />
		<result column="PRICE" property="price" jdbcType="DECIMAL" />
		<result column="UP_DATE" property="up_date" jdbcType="DATETIME" />
		<result column="DOWN_DATE" property="down_date" jdbcType="DATETIME" />
		<result column="DOWN_CAUSE" property="down_cause" jdbcType="DECIMAL" />
		<result column="PLAN_FP_ID" property="plan_fp_id" jdbcType="DECIMAL" />
		<result column="CODE" property="code" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="konkaMobileTestDataResult" class="konkaMobileTestData" extends="konkaMobileTestDataResultForList">
<!--			<result column="STORE_R3_SN" property="map.store_r3_sn" jdbcType="VARCHAR" />-->
			<result column="ALL_NUM" property="map.all_num" jdbcType="VARCHAR" />	
			<result column="ALL_PRICE_1" property="map.all_price_1" jdbcType="VARCHAR" />	
	</resultMap>
	<resultMap id="konkaMobileTestDataResult1" class="konkaMobileTestData" extends="konkaMobileTestDataResultForList">
			<result column="STORE_R3_SN" property="map.store_r3_sn" jdbcType="VARCHAR" />
			<result column="ALL_NUM" property="map.all_num" jdbcType="VARCHAR" />	
			<result column="ALL_PRICE_1" property="map.all_price_1" jdbcType="VARCHAR" />	
	</resultMap>
	
	<resultMap id="cFKonkaMobileTestDataResultAndCodeForList" class="konkaMobileTestData" >
		<result column="CODE" property="map.code" jdbcType="VARCHAR" />
		<result column="countCode" property="map.countCode" jdbcType="VARCHAR" />
	</resultMap>
	<resultMap id="konkaMobileTestDataResultAndCodeForList" class="konkaMobileTestData" >
		<result column="CODE" property="map.code" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="konkaMobileTestDataAndSaleDatasResult" class="konkaMobileTestData" extends="konkaMobileTestDataResultForList">
			<result column="STORE_R3_SN" property="map.store_r3_sn" jdbcType="VARCHAR" />
			<result column="ALL_NUM" property="map.all_num" jdbcType="VARCHAR" />	
			<result column="ALL_PRICE_1" property="map.all_price_1" jdbcType="VARCHAR" />
			<result column="SAVE_PATH" property="map.save_path" jdbcType="VARCHAR" />	
	</resultMap>

	<sql id="sf-konkaMobileTestData">
		<isNotEmpty prepend=" and " property="id">a.ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pct_code">a.PCT_CODE = #pct_code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="memo">a.MEMO = #memo:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_a_id">a.CHANNEL_A_ID = #channel_a_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_a_name">a.CHANNEL_A_NAME = #channel_a_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_b_id">a.CHANNEL_B_ID = #channel_b_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="channel_b_name">a.CHANNEL_B_NAME = #channel_b_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="org_id">a.ORG_ID = #org_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="org_name">a.ORG_NAME = #org_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">a.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_name">a.DEPT_NAME = #dept_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_id">a.SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_name">a.SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_id">a.OFFICE_ID = #office_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_name">a.OFFICE_NAME = #office_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="measure_id">a.MEASURE_ID = #measure_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="measure_name">a.MEASURE_NAME = #measure_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="prototype_id">a.PROTOTYPE_ID = #prototype_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="prototype_name">a.PROTOTYPE_NAME = #prototype_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="category_id">a.CATEGORY_ID = #category_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="category_name">a.CATEGORY_NAME = #category_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="model_id">a.MODEL_ID = #model_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="model_name">a.MODEL_NAME = #model_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="num">a.NUM = #num:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="code">a.CODE = #code:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.plan_flag">a.plan_fp_id is not null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.temp_flag">a.plan_fp_id is  null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.code_like">a.CODE like '%'|| #map.code_like:VARCHAR# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_id">
		(
			a.dept_id in (select store_id from 
									konka_r3_store 
								where ywy_job_id in (select job_id from konka_pe_prod_user where id = #report_id:DECIMAL#)
						) 
			or 
			(a.dept_id in (select shop_id from 
								KONKA_MOBILE_SP_RELATION where seller_id= #report_id:DECIMAL# ) 
			)
		)</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_name">a.REPORT_NAME = #report_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="report_date">a.REPORT_DATE = #report_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="status">a.STATUS = #status:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="price">a.PRICE = #price:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="up_date">a.UP_DATE = #up_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="down_date">a.DOWN_DATE = #down_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="down_cause">a.DOWN_CAUSE = #down_cause:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="plan_fp_id">a.PLAN_FP_ID = #plan_fp_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.model_name_like">model_name like '%'|| #map.model_name_like# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_start"><![CDATA[REPORT_DATE >= to_date(#map.add_date_start#,'yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_end"><![CDATA[REPORT_DATE <= to_date(#map.add_date_end# ||' 23:59:59','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.startime"><![CDATA[ to_char(REPORT_DATE, 'yyyy-MM-dd') >= #map.startime#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.endtime"><![CDATA[ to_char(REPORT_DATE, 'yyyy-MM-dd') <= #map.endtime#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.report_name_like">report_name like '%'|| #map.report_name_like# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.customer_name_like">channel_a_name like '%'|| #map.customer_name_like# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.dept_name_like">a.dept_name like '%'|| #map.dept_name_like# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.org_name_like">org_name like '%'|| #map.org_name_like# ||'%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_up_1"><![CDATA[ (UP_DATE <= sysdate and (sysdate <= DOWN_DATE or DOWN_DATE IS NULL)) ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.is_up_0"><![CDATA[ (UP_DATE > sysdate or sysdate > DOWN_DATE or UP_DATE is null ) ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.up_date_begin"><![CDATA[UP_DATE >= to_date(#map.up_date_begin# ||' 00:00:00','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.up_date_end"><![CDATA[UP_DATE <= to_date(#map.up_date_end# ||' 23:59:59','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.down_date_begin"><![CDATA[DOWN_DATE >= to_date(#map.down_date_begin# ||' 00:00:00','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.down_date_end"><![CDATA[DOWN_DATE <= to_date(#map.down_date_end# ||' 23:59:59','yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.test_statu_empty"><![CDATA[ (UP_DATE <= sysdate and (sysdate <= DOWN_DATE or DOWN_DATE IS NULL)) ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.test_statu"><![CDATA[ (UP_DATE > sysdate or sysdate > DOWN_DATE ) ]]></isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.dept_id_start">
			(
				a.DEPT_ID in (
					select store_id from konka_r3_store
					where ywy_job_id in (
						select job_id from konka_pe_prod_user u
						where u.dept_id in (
							select dept_id from konka_dept start with dept_id in (
							SELECT DISTINCT (dept_id)
			  							FROM KONKA_ROLE_DATA_LEVEL
			 							WHERE role_id IN (SELECT role_id
			                     			FROM KONKA_PE_ROLE_USER
			                    			WHERE user_id = #map.session_user_id#)
							) or dept_id = #map.dept_id_start# 
							connect by prior dept_id = par_id 
						)
					)
				)
				or 
				a.DEPT_ID in (
					select store_id from konka_r3_store
					where ywy_job_id = #map.filter_by_job_id_eq#
					or ywzg_job_id = #map.filter_by_job_id_eq#
					or jbjl_job_id = #map.filter_by_job_id_eq#
				)
			)
		</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.yw_name">
			a.DEPT_ID in (
				 select aa.store_id
		  			from konka_r3_store aa left join konka_r3_shop bb on aa.r3_code = bb.r3_code
		  			left join konka_pe_prod_user cc on bb.id = cc.cust_id
		  			where cc.real_name = #map.yw_name:VARCHAR#
	  		)
		</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.filter_by_ywy"><![CDATA[ 
				a.DEPT_ID in (
					select store_id from konka_r3_store where ywy_job_id = ( 
						select job_id from konka_pe_prod_user where id = #map.session_user_id#
					  ) 
					or
					  r3_code in (
			            select s.r3_code from konka_r3_shop s
			            left join branch_assign s1 on s1.KONKA_R3_ID = s.ID
			            where s1.USER_ID = #map.session_user_id#
			          )
				)
		]]></isNotEmpty>
	</sql>

	<select id="selectKonkaMobileTestData" resultMap="konkaMobileTestDataResult" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		<![CDATA[select a.*,(SELECT sum(b.num)
             FROM KONKA_MOBILE_SAIL_DATA b
            WHERE     a.dept_id = b.dept_id
                  and a.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= a.UP_DATE              
                  AND b.REPORT_DATE <= decode(a.DOWN_DATE,null,sysdate,a.down_date)
                  )as all_num,(SELECT sum(b.all_price)
             FROM  KONKA_MOBILE_SAIL_DATA b
             WHERE     a.dept_id = b.dept_id
                  and a.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= a.UP_DATE
                  AND b.REPORT_DATE < decode(a.DOWN_DATE+1,null,sysdate,a.down_date)
                  )as all_price_1 from KONKA_MOBILE_TEST_DATA a where 1 = 1]]>
		<include refid="sf-konkaMobileTestData" />
	</select>

	<select id="selectKonkaMobileTestDataList" resultMap="konkaMobileTestDataResultForList" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKA_MOBILE_TEST_DATA a where 1 = 1
		<include refid="sf-konkaMobileTestData" />
		order by  REPORT_DATE desc,DEPT_NAME
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>
	
	
	<!-- 全部获取 -->
	<select id="selectKonkaMobileTestDataAndCodeList" resultMap="konkaMobileTestDataResultAndCodeForList" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select listagg(a.CODE, ',') as code from KONKA_MOBILE_TEST_DATA a where a.code is not null and 1 = 1
		<include refid="sf-konkaMobileTestData" />
		 order by ID asc 
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>
	<!-- 判断是否有重复 -->
	<select id="selectKonkaMobileTestDataAndCode" resultMap="cFKonkaMobileTestDataResultAndCodeForList" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		SELECT a.code as code ,count(a.code) as countCode from KONKA_MOBILE_TEST_DATA a where a.code is not null 
	<isNotEmpty prepend=" and "  property="map.code_arry">
				a.code in
				<iterate close=")" open="(" conjunction="," property="map.code_arry">#map.code_arry[]#</iterate>
	</isNotEmpty> 
	group by a.code
	</select>

	<select id="selectKonkaMobileTestDataCount" resultClass="long" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		select count(*) from KONKA_MOBILE_TEST_DATA a where 1 = 1
		<include refid="sf-konkaMobileTestData" />
	</select>

	<select id="selectKonkaMobileTestDataPaginatedList" resultMap="konkaMobileTestDataResult1" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		<![CDATA[ select tt.*,(SELECT sum(b.num)
             FROM KONKA_MOBILE_SAIL_DATA b
            WHERE     tt.dept_id = b.dept_id
                  and tt.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= tt.UP_DATE              
                  AND b.REPORT_DATE <= decode(tt.DOWN_DATE,null,sysdate,tt.down_date)
                  )as all_num,(SELECT sum(b.all_price)
             FROM  KONKA_MOBILE_SAIL_DATA b
             WHERE     tt.dept_id = b.dept_id
                  and tt.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= tt.UP_DATE
                  AND b.REPORT_DATE < decode(tt.DOWN_DATE+1,null,sysdate,tt.down_date)
                  )as all_price_1 from ( select t_.*, rownum rn_ from ( ]]>
		select a.*,d.r3_sdf_sn store_r3_sn from KONKA_MOBILE_TEST_DATA a
		LEFT JOIN KONKA_R3_STORE d 
          	      ON d.STORE_ID=a.DEPT_ID 
		where 1 = 1
		<include refid="sf-konkaMobileTestData" />
		<!-- order by ID asc -->
		order by  REPORT_DATE desc,DEPT_NAME
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) tt where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectKonkaMobileTestDataAndSailDatasPaginatedList" resultMap="konkaMobileTestDataAndSaleDatasResult" parameterClass="konkaMobileTestData" cacheModel="oneDayCache">
		<![CDATA[ select tt.*,  (SELECT sum(b.num)
             FROM KONKA_MOBILE_SAIL_DATA b
            WHERE     tt.dept_id = b.dept_id
                  and tt.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= tt.UP_DATE              
                  AND b.REPORT_DATE <= decode(tt.DOWN_DATE,null,sysdate,tt.down_date)
                  )as all_num,(SELECT sum(b.all_price)
             FROM  KONKA_MOBILE_SAIL_DATA b
             WHERE     tt.dept_id = b.dept_id
                  and tt.MODEL_ID=b.MODEL_ID
                  AND b.REPORT_DATE >= tt.UP_DATE
                  AND b.REPORT_DATE < decode(tt.DOWN_DATE+1,null,sysdate,tt.down_date)
                  )as all_price_1,tt.SAVE_PATH as SAVE_PATH from ( select t_.*, rownum rn_ from ( ]]>
		SELECT a.*,d.r3_sdf_sn store_r3_sn,ss.SAVE_PATH FROM   KONKA_MOBILE_TEST_DATA a 
		LEFT JOIN KONKA_R3_STORE d 
          	      ON d.STORE_ID=a.DEPT_ID  
       <![CDATA[ LEFT JOIN (SELECT f.LINK_ID,
                                         listagg (
                                            f.save_path || '&' || f.FILE_DESC,
                                            ',')
                                            AS save_path
                                    FROM ATTACHMENT f
                                   WHERE f.LINK_TAB =
                                            'KONKA_MOBILE_TEST_DATA'
                                         AND f.DEL_MARK = 0
                                  GROUP BY LINK_ID) ss
                          ON a.ID = ss.LINK_ID  ]]>	      
		 WHERE 1 = 1
		<include refid="sf-konkaMobileTestData" />
		<!-- order by ID asc -->
		order by  REPORT_DATE desc,DEPT_NAME
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) tt where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaMobileTestData" parameterClass="konkaMobileTestData">
		<selectKey resultClass="long" keyProperty="id">select KONKA_MOBILE_REPORT.nextval as id from dual </selectKey>
		<![CDATA[insert into KONKA_MOBILE_TEST_DATA (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="pct_code">PCT_CODE</isNotNull>	
			<isNotNull prepend="," property="memo">MEMO</isNotNull>	
			<isNotNull prepend="," property="channel_a_id">CHANNEL_A_ID</isNotNull>	
			<isNotNull prepend="," property="channel_a_name">CHANNEL_A_NAME</isNotNull>	
			<isNotNull prepend="," property="channel_b_id">CHANNEL_B_ID</isNotNull>	
			<isNotNull prepend="," property="channel_b_name">CHANNEL_B_NAME</isNotNull>	
			<isNotNull prepend="," property="org_id">ORG_ID</isNotNull>	
			<isNotNull prepend="," property="org_name">ORG_NAME</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="dept_name">DEPT_NAME</isNotNull>	
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID</isNotNull>	
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME</isNotNull>	
			<isNotNull prepend="," property="office_id">OFFICE_ID</isNotNull>	
			<isNotNull prepend="," property="office_name">OFFICE_NAME</isNotNull>	
			<isNotNull prepend="," property="measure_id">MEASURE_ID</isNotNull>	
			<isNotNull prepend="," property="measure_name">MEASURE_NAME</isNotNull>	
			<isNotNull prepend="," property="prototype_id">PROTOTYPE_ID</isNotNull>	
			<isNotNull prepend="," property="prototype_name">PROTOTYPE_NAME</isNotNull>	
			<isNotNull prepend="," property="category_id">CATEGORY_ID</isNotNull>	
			<isNotNull prepend="," property="category_name">CATEGORY_NAME</isNotNull>	
			<isNotNull prepend="," property="model_id">MODEL_ID</isNotNull>	
			<isNotNull prepend="," property="model_name">MODEL_NAME</isNotNull>	
			<isNotNull prepend="," property="num">NUM</isNotNull>	
			<isNotNull prepend="," property="report_id">REPORT_ID</isNotNull>	
			<isNotNull prepend="," property="report_name">REPORT_NAME</isNotNull>	
			<isNotNull prepend="," property="report_date">REPORT_DATE</isNotNull>	
			<isNotNull prepend="," property="status">STATUS</isNotNull>	
			<isNotNull prepend="," property="price">PRICE</isNotNull>	
			<isNotNull prepend="," property="up_date">UP_DATE</isNotNull>	
			<isNotNull prepend="," property="down_date">DOWN_DATE</isNotNull>
			<isNotNull prepend="," property="down_cause">DOWN_CAUSE</isNotNull>	
			<isNotNull prepend="," property="plan_fp_id">PLAN_FP_ID</isNotNull>	
			<isNotNull prepend="," property="code">CODE</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pct_code">#pct_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="memo">#memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_a_id">#channel_a_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_name">#channel_a_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_b_id">#channel_b_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_b_name">#channel_b_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="org_id">#org_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="org_name">#org_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_name">#dept_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">#subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">#subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">#office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">#office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="measure_id">#measure_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="measure_name">#measure_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="prototype_id">#prototype_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="prototype_name">#prototype_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="category_id">#category_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="category_name">#category_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="model_id">#model_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="model_name">#model_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="num">#num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_id">#report_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_name">#report_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_date">#report_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">#status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="price">#price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="up_date">#up_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="down_date">#down_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="down_cause">#down_cause:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="plan_fp_id">#plan_fp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="code">#code:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaMobileTestData" parameterClass="KonkaMobileTestData">
		update KONKA_MOBILE_TEST_DATA
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pct_code">PCT_CODE = #pct_code:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="memo">MEMO = #memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_a_id">CHANNEL_A_ID = #channel_a_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_a_name">CHANNEL_A_NAME = #channel_a_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="channel_b_id">CHANNEL_B_ID = #channel_b_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="channel_b_name">CHANNEL_B_NAME = #channel_b_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="org_id">ORG_ID = #org_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="org_name">ORG_NAME = #org_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_name">DEPT_NAME = #dept_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">OFFICE_ID = #office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">OFFICE_NAME = #office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="measure_id">MEASURE_ID = #measure_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="measure_name">MEASURE_NAME = #measure_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="prototype_id">PROTOTYPE_ID = #prototype_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="prototype_name">PROTOTYPE_NAME = #prototype_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="category_id">CATEGORY_ID = #category_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="category_name">CATEGORY_NAME = #category_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="model_id">MODEL_ID = #model_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="model_name">MODEL_NAME = #model_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="num">NUM = #num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_id">REPORT_ID = #report_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="report_name">REPORT_NAME = #report_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="report_date">REPORT_DATE = #report_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">STATUS = #status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="price">PRICE = #price:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="up_date">UP_DATE = #up_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="down_date">DOWN_DATE = #down_date:DATETIME#</isNotNull>
			<isNull prepend="," property="down_date">DOWN_DATE = null</isNull>
			<isNotNull prepend="," property="down_cause">DOWN_CAUSE = #down_cause:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="plan_fp_id">PLAN_FP_ID = #plan_fp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="code">CODE = #code:VARCHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaMobileTestData" parameterClass="KonkaMobileTestData">
		delete from KONKA_MOBILE_TEST_DATA where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>