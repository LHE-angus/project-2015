<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_XX_ZMD_ACCOUTS">

	<typeAlias alias="konkaXxZmdAccouts" type="com.ebiz.mmt.domain.KonkaXxZmdAccouts" />

	

	<resultMap id="konkaXxZmdAccoutsResultForList" class="konkaXxZmdAccouts">
		<result column="BILL_ID" property="bill_id" jdbcType="DECIMAL" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="ZMD_ID" property="zmd_id" jdbcType="DECIMAL" />
		<result column="TITLE" property="title" jdbcType="VARCHAR" />
		<result column="START_TIME" property="start_time" jdbcType="DATE" />
		<result column="END_TIME" property="end_time" jdbcType="DATE" />
		<result column="BILL_MONEY" property="bill_money" jdbcType="DECIMAL" />
		<result column="BILL_MONEY_S" property="bill_money_s" jdbcType="DECIMAL" />
		<result column="BILL_MONEY_E" property="bill_money_e" jdbcType="DECIMAL" />
		<result column="ZMD_FEE" property="zmd_fee" jdbcType="DECIMAL" />
		<result column="ZMD_FEE_S" property="zmd_fee_s" jdbcType="DECIMAL" />
		<result column="ZMD_FEE_E" property="zmd_fee_e" jdbcType="DECIMAL" />
		<result column="REC_MONEY_S" property="rec_money_s" jdbcType="DECIMAL" />
		<result column="REC_MONEY" property="rec_money" jdbcType="DECIMAL" />
		<result column="REC_MONEY_E" property="rec_money_e" jdbcType="DECIMAL" />
		<result column="DIST_FEE" property="dist_fee" jdbcType="DECIMAL" />
		<result column="DIST_FEE_S" property="dist_fee_s" jdbcType="DECIMAL" />
		<result column="DIST_FEE_E" property="dist_fee_e" jdbcType="DECIMAL" />
		<result column="ADD_DATE" property="add_date" jdbcType="DATE" />
		<result column="BILL_STATE" property="bill_state" jdbcType="DECIMAL" />
		<result column="JZ_TIME" property="jz_time" jdbcType="DATE" />
		<result column="JZ_USER" property="jz_user" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="konkaXxZmdAccoutsResult" class="konkaXxZmdAccouts" extends="konkaXxZmdAccoutsResultForList">
	</resultMap>

	<resultMap id="konkaXxZmdAccoutsForZmdAndDeptResult" class="konkaXxZmdAccouts" extends="konkaXxZmdAccoutsResultForList">
		<result column="dept_name" property="map.dept_name" jdbcType="VARCHAR" />
		<result column="zmd_sn" property="map.zmd_sn" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="sf-konkaXxZmdAccouts">
		<isNotEmpty prepend=" and " property="bill_id">BILL_ID = #bill_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="title">TITLE = #title:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="start_time">START_TIME = #start_time:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="end_time">END_TIME = #end_time:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bill_money">BILL_MONEY = #bill_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bill_money_s">BILL_MONEY_S = #bill_money_s:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bill_money_e">BILL_MONEY_E = #bill_money_e:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_fee">ZMD_FEE = #zmd_fee:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_fee_s">ZMD_FEE_S = #zmd_fee_s:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_fee_e">ZMD_FEE_E = #zmd_fee_e:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="rec_money_s">REC_MONEY_S = #rec_money_s:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="rec_money">REC_MONEY = #rec_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="rec_money_e">REC_MONEY_E = #rec_money_e:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_fee">DIST_FEE = #dist_fee:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_fee_s">DIST_FEE_S = #dist_fee_s:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_fee_e">DIST_FEE_E = #dist_fee_e:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="bill_state">BILL_STATE = #bill_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="jz_time">JZ_TIME = #jz_time:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="jz_user">JZ_USER = #jz_user:VARCHAR#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.billTime"><![CDATA[START_TIME < to_date(#map.billTime#, 'yyyy-MM-dd hh24:mi:ss') and END_TIME > to_date(#map.billTime#, 'yyyy-MM-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[ADD_DATE >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
	   <isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[ADD_DATE <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
	</sql>

	<select id="selectKonkaXxZmdAccouts" resultMap="konkaXxZmdAccoutsResult" parameterClass="konkaXxZmdAccouts" >
		select * from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
	</select>

	<select id="selectKonkaXxZmdAccoutsList" resultMap="konkaXxZmdAccoutsResultForList" parameterClass="konkaXxZmdAccouts" >
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaXxZmdAccoutsCount" resultClass="long" parameterClass="konkaXxZmdAccouts" >
		select count(*) from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
	</select>
	
	<!--huhao  2012-03-20-->
	<select id="selectKonkaXxZmdAccoutsForZmdCount" resultClass="long" parameterClass="konkaXxZmdAccouts" >
		select count(distinct zmd_id) from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
	</select>

	<!--huhao  2012-03-20-->
	<select id="selectKonkaXxZmdAccoutsForZmdPaginatedList" resultMap="konkaXxZmdAccoutsResult" parameterClass="konkaXxZmdAccouts" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select distinct zmd_id from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
		<!-- order by ID asc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<!--huhao  2012-03-5-->
	<select id="selectKonkaXxZmdAccoutsForZmdAndDeptCount" resultClass="long" parameterClass="konkaXxZmdAccouts" >
		select count(1)
  			from Konka_Xx_Zmd_Accouts aa
  			left join konka_xx_zmd bb on aa.zmd_id = bb.zmd_id
  			left join konka_dept cc on cc.dept_id = aa.dept_id where 1 = 1
	   <isNotEmpty prepend=" and " property="dept_id">aa.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="zmd_id">aa.ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="bill_state">aa.bill_state = #bill_state:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="map.add_date_start"><![CDATA[aa.ADD_DATE >= to_date(#map.add_date_start# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
	   <isNotEmpty prepend=" and " property="map.add_date_end"><![CDATA[aa.ADD_DATE <= to_date(#map.add_date_end# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
	</select>
	
	<!--huhao  2012-03-05-->
	<select id="selectKonkaXxZmdAccoutsForZmdAndDeptPaginatedList" resultMap="konkaXxZmdAccoutsForZmdAndDeptResult" parameterClass="konkaXxZmdAccouts" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
	select aa.*, bb.zmd_sn, cc.dept_name
  			from Konka_Xx_Zmd_Accouts aa
  			left join konka_xx_zmd bb on aa.zmd_id = bb.zmd_id
  			left join konka_dept cc on cc.dept_id = aa.dept_id where 1 = 1
	   <isNotEmpty prepend=" and " property="dept_id">aa.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="zmd_id">aa.ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="bill_state">aa.bill_state = #bill_state:DECIMAL#</isNotEmpty>
	   <isNotEmpty prepend=" and " property="map.add_date_start"><![CDATA[aa.ADD_DATE >= to_date(#map.add_date_start# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
	   <isNotEmpty prepend=" and " property="map.add_date_end"><![CDATA[aa.ADD_DATE <= to_date(#map.add_date_end# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<!-- order by ID asc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<select id="selectKonkaXxZmdAccoutsPaginatedList" resultMap="konkaXxZmdAccoutsResult" parameterClass="konkaXxZmdAccouts" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<include refid="sf-konkaXxZmdAccouts" />
		<!-- order by ID asc -->
		order by ADD_DATE desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaXxZmdAccouts" parameterClass="konkaXxZmdAccouts">
		<selectKey resultClass="long" keyProperty="id">select KONKA_XX_BASE_SEQ.nextval as id from dual</selectKey>
		<![CDATA[insert into KONKA_XX_ZMD_ACCOUTS (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="bill_id">BILL_ID</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="zmd_id">ZMD_ID</isNotNull>	
			<isNotNull prepend="," property="title">TITLE</isNotNull>	
			<isNotNull prepend="," property="start_time">START_TIME</isNotNull>	
			<isNotNull prepend="," property="end_time">END_TIME</isNotNull>	
			<isNotNull prepend="," property="bill_money">BILL_MONEY</isNotNull>	
			<isNotNull prepend="," property="bill_money_s">BILL_MONEY_S</isNotNull>	
			<isNotNull prepend="," property="bill_money_e">BILL_MONEY_E</isNotNull>	
			<isNotNull prepend="," property="zmd_fee">ZMD_FEE</isNotNull>	
			<isNotNull prepend="," property="zmd_fee_s">ZMD_FEE_S</isNotNull>	
			<isNotNull prepend="," property="zmd_fee_e">ZMD_FEE_E</isNotNull>	
			<isNotNull prepend="," property="rec_money_s">REC_MONEY_S</isNotNull>	
			<isNotNull prepend="," property="rec_money">REC_MONEY</isNotNull>	
			<isNotNull prepend="," property="rec_money_e">REC_MONEY_E</isNotNull>	
			<isNotNull prepend="," property="dist_fee">DIST_FEE</isNotNull>	
			<isNotNull prepend="," property="dist_fee_s">DIST_FEE_S</isNotNull>	
			<isNotNull prepend="," property="dist_fee_e">DIST_FEE_E</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="bill_state">BILL_STATE</isNotNull>	
			<isNotNull prepend="," property="jz_time">JZ_TIME</isNotNull>	
			<isNotNull prepend="," property="jz_user">JZ_USER</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="bill_id">#bill_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_id">#zmd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="title">#title:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="start_time">#start_time:DATE#</isNotNull>
			<isNotNull prepend="," property="end_time">#end_time:DATE#</isNotNull>
			<isNotNull prepend="," property="bill_money">#bill_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bill_money_s">#bill_money_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bill_money_e">#bill_money_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee">#zmd_fee:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee_s">#zmd_fee_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee_e">#zmd_fee_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money_s">#rec_money_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money">#rec_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money_e">#rec_money_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="DIST_FEE">#dist_fee:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="DIST_FEE_S">#dist_fee_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="DIST_FEE_E">#dist_fee_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:DATE#</isNotNull>
			<isNotNull prepend="," property="bill_state">#bill_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="jz_time">#jz_time:DATE#</isNotNull>
			<isNotNull prepend="," property="jz_user">#jz_user:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaXxZmdAccouts" parameterClass="konkaXxZmdAccouts">
		update KONKA_XX_ZMD_ACCOUTS
		<dynamic prepend="set">
			<isNotNull prepend="," property="bill_id">BILL_ID = #bill_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_id">ZMD_ID = #zmd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="title">TITLE = #title:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="start_time">START_TIME = #start_time:DATE#</isNotNull>
			<isNotNull prepend="," property="end_time">END_TIME = #end_time:DATE#</isNotNull>
			<isNotNull prepend="," property="bill_money">BILL_MONEY = #bill_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bill_money_s">BILL_MONEY_S = #bill_money_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="bill_money_e">BILL_MONEY_E = #bill_money_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee">ZMD_FEE = #zmd_fee:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee_s">ZMD_FEE_S = #zmd_fee_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_fee_e">ZMD_FEE_E = #zmd_fee_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money_s">REC_MONEY_S = #rec_money_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money">REC_MONEY = #rec_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="rec_money_e">REC_MONEY_E = #rec_money_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dist_fee">DIST_FEE = #dist_fee:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dist_fee_s">DIST_FEE_S = #dist_fee_s:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dist_fee_e">DIST_FEE_E = #dist_fee_e:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:DATE#</isNotNull>
			<isNotNull prepend="," property="bill_state">BILL_STATE = #bill_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="jz_time">JZ_TIME = #jz_time:DATE#</isNotNull>
			<isNotNull prepend="," property="jz_user">JZ_USER = #jz_user:VARCHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="bill_id">BILL_ID = #bill_id#</isNotEmpty>
		<isEmpty prepend=" " property="bill_id">
			<isNotEmpty prepend=" " property="map.pks">
				BILL_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaXxZmdAccouts" parameterClass="konkaXxZmdAccouts">
		delete from KONKA_XX_ZMD_ACCOUTS where 1 = 1
		<isNotEmpty prepend=" and " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" and " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>