<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KonkaMobileRetailRest">

    <typeAlias alias="konkaMobileRetailRest" type="com.ebiz.mmt.domain.KonkaMobileRetailRest" />

	
	
    <resultMap id="konkaMobileRetailRestResult" class="konkaMobileRetailRest">
		<result property="id" column="ID" jdbcType="DECIMAL" />
		<result property="subcomp_id" column="SUBCOMP_ID" jdbcType="DECIMAL" />
		<result property="subcomp_name" column="SUBCOMP_NAME" jdbcType="VARCHAR" />
		<result property="office_id" column="OFFICE_ID" jdbcType="DECIMAL" />
		<result property="office_name" column="OFFICE_NAME" jdbcType="VARCHAR" />
		<result property="retail_id" column="RETAIL_ID" jdbcType="DECIMAL" />
		<result property="retail_name" column="RETAIL_NAME" jdbcType="VARCHAR" />
		<result property="retail_desc" column="RETAIL_DESC" jdbcType="VARCHAR" />
		<result property="retail_date" column="RETAIL_DATE" jdbcType="DATETIME" />
		<result property="add_id" column="ADD_ID" jdbcType="DECIMAL" />
		<result property="add_name" column="ADD_NAME" jdbcType="VARCHAR" />
		<result property="add_date" column="ADD_DATE" jdbcType="DATETIME" />
		<result property="status" column="STATUS" jdbcType="DECIMAL" />
    </resultMap>
    
    <resultMap id="retailRestStatisticsResult" class="konkaMobileRetailRest">
    	<result property="subcomp_name" column="SUBCOMP_NAME" jdbcType="VARCHAR" />
		<result property="retail_name" column="RETAIL_NAME" jdbcType="VARCHAR" />
		<result property="office_name" column="OFFICE_NAME" jdbcType="VARCHAR" />
		<result property="map.count" column="COUNT" jdbcType="DECIMAL" />
    </resultMap>

	<sql id="sf-konkaMobileRetailRest">
		<isNotEmpty prepend=" and " property="id">a.ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_id">a.SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="subcomp_name">a.SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_id">a.OFFICE_ID = #office_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="office_name">a.OFFICE_NAME = #office_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="retail_id">a.RETAIL_ID = #retail_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="retail_name">a.RETAIL_NAME = #retail_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="retail_desc">a.RETAIL_DESC = #retail_desc:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="retail_date">a.RETAIL_DATE = #retail_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_id">a.ADD_ID = #add_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_name">a.ADD_NAME = #add_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">a.ADD_DATE = #add_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="status">a.STATUS = #status:DECIMAL#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.retail_name_like">a.RETAIL_NAME like '%'|| #map.retail_name_like# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.retail_date_begin"><![CDATA[ a.RETAIL_DATE >= #map.retail_date_begin# ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.retail_date_end"><![CDATA[ a.RETAIL_DATE <= #map.retail_date_end# ]]></isNotEmpty>
	</sql>
	
	<select id="selectKonkaMobileRetailRest" resultMap="konkaMobileRetailRestResult" parameterClass="konkaMobileRetailRest" >
		select * from KONKA_MOBILE_RETAIL_REST a where 1=1
		<include refid="sf-konkaMobileRetailRest" />
	</select>
	
	<select id="selectKonkaMobileRetailRestList" resultMap="konkaMobileRetailRestResult" parameterClass="konkaMobileRetailRest" >
		<isNotEmpty property="row.count"><![CDATA[ select * from ( ]]></isNotEmpty>
		select * from KONKA_MOBILE_RETAIL_REST a where 1=1
		<include refid="sf-konkaMobileRetailRest" />
		order by a.add_date,a.ID desc
		<isNotEmpty property="row.count"><![CDATA[ ) where rownum<=#row.count# ]]></isNotEmpty>
	</select>
	
	<select id="selectKonkaMobileRetailRestCount" resultClass="long" parameterClass="konkaMobileRetailRest" >
		select count(*) from KONKA_MOBILE_RETAIL_REST a where 1 = 1
		<include refid="sf-konkaMobileRetailRest" />
	</select>
	
	<select id="selectKonkaMobileRetailRestPaginatedList" resultMap="konkaMobileRetailRestResult" parameterClass="konkaMobileRetailRest" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKA_MOBILE_RETAIL_REST a where 1=1
		<include refid="sf-konkaMobileRetailRest" />
		 order by a.add_date desc,a.ID desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="getRetailRestStatisticsCount" resultClass="long" parameterClass="konkaMobileRetailRest" >
		select count(*) from (select a.RETAIL_NAME,a.office_name,a.subcomp_name, count(*) as count from KONKA_MOBILE_RETAIL_REST a where 1=1
		<include refid="sf-konkaMobileRetailRest" /> 
		group by a.RETAIL_NAME,a.office_name,a.subcomp_name
		 order by count desc )
	</select>
	
	<select id="getRetailRestStatisticsPaginatedList" resultMap="retailRestStatisticsResult" parameterClass="konkaMobileRetailRest" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select a.RETAIL_NAME,a.office_name,a.subcomp_name,count(*) as count from KONKA_MOBILE_RETAIL_REST a where 1=1
		<include refid="sf-konkaMobileRetailRest" /> 
		group by a.RETAIL_NAME,a.office_name,a.subcomp_name
		 order by count desc 
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaMobileRetailRest" parameterClass="konkaMobileRetailRest">
		<selectKey resultClass="long" keyProperty="id">select KONKA_MOBILE_RETAIL_REST_SEQ.nextval as id from dual</selectKey>
		<![CDATA[insert into KONKA_MOBILE_RETAIL_REST (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID</isNotNull>
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME</isNotNull>
			<isNotNull prepend="," property="office_id">OFFICE_ID</isNotNull>
			<isNotNull prepend="," property="office_name">OFFICE_NAME</isNotNull>
			<isNotNull prepend="," property="retail_id">RETAIL_ID</isNotNull>
			<isNotNull prepend="," property="retail_name">RETAIL_NAME</isNotNull>
			<isNotNull prepend="," property="retail_desc">RETAIL_DESC</isNotNull>
			<isNotNull prepend="," property="retail_date">RETAIL_DATE</isNotNull>
			<isNotNull prepend="," property="add_id">ADD_ID</isNotNull>
			<isNotNull prepend="," property="add_name">ADD_NAME</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>
			<isNotNull prepend="," property="status">STATUS</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">#subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">#subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">#office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">#office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_id">#retail_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="retail_name">#retail_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_desc">#retail_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_date">#retail_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="add_id">#add_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_name">#add_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">#status:DECIMAL#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>
	
	<update id="updateKonkaMobileRetailRest" parameterClass="konkaMobileRetailRest">
		update KONKA_MOBILE_RETAIL_REST
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_id">SUBCOMP_ID = #subcomp_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="subcomp_name">SUBCOMP_NAME = #subcomp_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="office_id">OFFICE_ID = #office_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="office_name">OFFICE_NAME = #office_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_id">RETAIL_ID = #retail_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="retail_name">RETAIL_NAME = #retail_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_desc">RETAIL_DESC = #retail_desc:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="retail_date">RETAIL_DATE = #retail_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="add_id">ADD_ID = #add_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_name">ADD_NAME = #add_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="status">STATUS = #status:DECIMAL#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaMobileRetailRest" parameterClass="konkaMobileRetailRest">
		delete from KONKA_MOBILE_RETAIL_REST where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>
</sqlMap>
