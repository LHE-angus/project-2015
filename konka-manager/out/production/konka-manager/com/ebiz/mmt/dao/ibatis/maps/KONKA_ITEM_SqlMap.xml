<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKAOA_ITEM">

	<typeAlias alias="konkaItem" type="com.ebiz.mmt.domain.KonkaItem" />

	

	<resultMap id="konkaItemResultForList" class="konkaItem">
		<result column="ID" property="id" jdbcType="DECIMAL" />
		<result column="ITEM_CONTENT" property="item_content" jdbcType="VARCHAR" />
		<result column="RECEIVE_USER_ID" property="receive_user_id" jdbcType="DECIMAL" />
		<result column="RECEIVE_USER_NAME" property="receive_user_name" jdbcType="VARCHAR" />
		<result column="PLAN_FINISH_DATE" property="plan_finish_date" jdbcType="DATE" />
		<result column="IS_FINISHED" property="is_finished" jdbcType="DECIMAL" />
		<result column="FINISH_STATUS" property="finish_status" jdbcType="VARCHAR" />
		<result column="PLAN_FINISH_RATE" property="plan_finish_rate" jdbcType="DECIMAL" />
		<result column="P_TYPE_1" property="p_type_1" jdbcType="DECIMAL" />
		<result column="P_TYPE_2" property="p_type_2" jdbcType="DECIMAL" />
		<result column="ADD_TIME" property="add_time" jdbcType="DATE" />
		<result column="ADD_USER_ID" property="add_user_id" jdbcType="DECIMAL" />
		<result column="ADD_USER_NAME" property="add_user_name" jdbcType="VARCHAR" />
		<result column="ORDER_VALUE" property="order_value" jdbcType="DECIMAL" />
		<result column="IS_DEL" property="is_del" jdbcType="DECIMAL" />
		<result column="LAST_UPDATE_TIME" property="last_update_time" jdbcType="DATE" />
	</resultMap>

	<resultMap id="konkaItemResult" class="konkaItem" extends="konkaItemResultForList">
	</resultMap>

	<sql id="sf-konkaItem">
		<isNotEmpty prepend=" and " property="id">ID = #id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="item_content">ITEM_CONTENT = #item_content:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="receive_user_id">RECEIVE_USER_ID = #receive_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="receive_user_name">RECEIVE_USER_NAME = #receive_user_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="plan_finish_date">PLAN_FINISH_DATE = #plan_finish_date:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_finished">IS_FINISHED = #is_finished:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="finish_status">FINISH_STATUS = #finish_status:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="plan_finish_rate">PLAN_FINISH_RATE = #plan_finish_rate:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="p_type_1">P_TYPE_1 = #p_type_1:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="p_type_2">P_TYPE_2 = #p_type_2:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_time">ADD_TIME = #add_time:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">ADD_USER_ID = #add_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_name">ADD_USER_NAME = #add_user_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_value">ORDER_VALUE = #order_value:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="last_update_time">LAST_UPDATE_TIME = #last_update_time:DATE#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.st_plan_finish_date"><![CDATA[ PLAN_FINISH_DATE >= to_date(#map.st_plan_finish_date# || '00:00:00','yyyy-mm-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.en_plan_finish_date"><![CDATA[ PLAN_FINISH_DATE <= to_date(#map.en_plan_finish_date# || '23:59:59','yyyy-mm-dd hh24:mi:ss') ]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.item_content_like">ITEM_CONTENT like '%' || #map.item_content_like# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.receive_user_name_like">RECEIVE_USER_NAME like '%' || #map.receive_user_name_like# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.today">(LAST_UPDATE_TIME is null or <![CDATA[ LAST_UPDATE_TIME < to_date(#map.today# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]>)</isNotEmpty>
	</sql>

	<select id="selectKonkaItem" resultMap="konkaItemResult" parameterClass="konkaItem" >
		select * from KONKAOA_ITEM where 1 = 1
		<include refid="sf-konkaItem" />
	</select>

	<select id="selectKonkaItemList" resultMap="konkaItemResultForList" parameterClass="konkaItem" >
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKAOA_ITEM where 1 = 1
		<include refid="sf-konkaItem" />
		order by order_value desc ,ID desc 
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaItemCount" resultClass="long" parameterClass="konkaItem" >
		select count(*) from KONKAOA_ITEM where 1 = 1
		<include refid="sf-konkaItem" />
	</select>

	<select id="selectKonkaItemPaginatedList" resultMap="konkaItemResult" parameterClass="konkaItem" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKAOA_ITEM where 1 = 1
		<include refid="sf-konkaItem" />
		order by order_value desc ,ID desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaItem" parameterClass="konkaItem">
		<selectKey resultClass="long" keyProperty="id">select KONKA_PROD_ENTP_SEQUENCE.nextval as id from dual</selectKey>
		<![CDATA[insert into KONKAOA_ITEM (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">ID</isNotNull>	
			<isNotNull prepend="," property="item_content">ITEM_CONTENT</isNotNull>	
			<isNotNull prepend="," property="receive_user_id">RECEIVE_USER_ID</isNotNull>	
			<isNotNull prepend="," property="receive_user_name">RECEIVE_USER_NAME</isNotNull>	
			<isNotNull prepend="," property="plan_finish_date">PLAN_FINISH_DATE</isNotNull>	
			<isNotNull prepend="," property="is_finished">IS_FINISHED</isNotNull>	
			<isNotNull prepend="," property="finish_status">FINISH_STATUS</isNotNull>	
			<isNotNull prepend="," property="plan_finish_rate">PLAN_FINISH_RATE</isNotNull>	
			<isNotNull prepend="," property="p_type_1">P_TYPE_1</isNotNull>	
			<isNotNull prepend="," property="p_type_2">P_TYPE_2</isNotNull>	
			<isNotNull prepend="," property="add_time">ADD_TIME</isNotNull>	
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID</isNotNull>	
			<isNotNull prepend="," property="add_user_name">ADD_USER_NAME</isNotNull>	
			<isNotNull prepend="," property="order_value">ORDER_VALUE</isNotNull>	
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>	
			<isNotNull prepend="," property="last_update_time">LAST_UPDATE_TIME</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="id">#id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="item_content">#item_content:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="receive_user_id">#receive_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="receive_user_name">#receive_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="plan_finish_date">#plan_finish_date:DATE#</isNotNull>
			<isNotNull prepend="," property="is_finished">#is_finished:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="finish_status">#finish_status:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="plan_finish_rate">#plan_finish_rate:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_type_1">#p_type_1:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_type_2">#p_type_2:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_time">#add_time:DATE#</isNotNull>
			<isNotNull prepend="," property="add_user_id">#add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_user_name">#add_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="order_value">#order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="last_update_time">#last_update_time:DATE#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaItem" parameterClass="konkaItem">
		update KONKAOA_ITEM
		<dynamic prepend="set">
			<isNotNull prepend="," property="id">ID = #id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="item_content">ITEM_CONTENT = #item_content:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="receive_user_id">RECEIVE_USER_ID = #receive_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="receive_user_name">RECEIVE_USER_NAME = #receive_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="plan_finish_date">PLAN_FINISH_DATE = #plan_finish_date:DATE#</isNotNull>
			<isNotNull prepend="," property="is_finished">IS_FINISHED = #is_finished:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="finish_status">FINISH_STATUS = #finish_status:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="plan_finish_rate">PLAN_FINISH_RATE = #plan_finish_rate:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_type_1">P_TYPE_1 = #p_type_1:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="p_type_2">P_TYPE_2 = #p_type_2:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_time">ADD_TIME = #add_time:DATE#</isNotNull>
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID = #add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_user_name">ADD_USER_NAME = #add_user_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="order_value">ORDER_VALUE = #order_value:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL = #is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="last_update_time">LAST_UPDATE_TIME = #last_update_time:DATE#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

	<delete id="deleteKonkaItem" parameterClass="konkaItem">
		delete from KONKAOA_ITEM where 1 = 1
		<isNotEmpty prepend=" and " property="id">ID = #id#</isNotEmpty>
		<isEmpty prepend=" " property="id">
			<isNotEmpty prepend=" and " property="map.pks">
				ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>

</sqlMap>