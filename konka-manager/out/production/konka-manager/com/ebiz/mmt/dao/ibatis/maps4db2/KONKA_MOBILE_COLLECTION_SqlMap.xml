<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KonkaMobileCollection">

    <typeAlias alias="konkaMobileCollection" type="com.ebiz.mmt.domain.KonkaMobileCollection" />

	
	
    <resultMap id="konkaMobileCollectionResult" class="konkaMobileCollection">
		<result property="coll_id" column="COLL_ID" jdbcType="DECIMAL" />
		<result property="coll_name" column="COLL_NAME" jdbcType="VARCHAR" />
		<result property="coll_pd_id" column="COLL_PD_ID" jdbcType="DECIMAL" />
		<result property="storage_id" column="STORAGE_ID" jdbcType="DECIMAL" />
		<result property="storage_area_id" column="STORAGE_AREA_ID" jdbcType="DECIMAL" />
		<result property="base_num" column="BASE_NUM" jdbcType="DECIMAL" />
		<result property="busi_num" column="BUSI_NUM" jdbcType="DECIMAL" />
		<result property="status" column="STATUS" jdbcType="DECIMAL" />
		<result property="is_del" column="IS_DEL" jdbcType="DECIMAL" />
		<result property="remark" column="REMARK" jdbcType="VARCHAR" />
    </resultMap>
	<resultMap class="konkaMobileCollection" id="konkaMobileCollectionResultForQuery" extends="konkaMobileCollectionResult">
		<result property="map.storage_name" column="storage_name" jdbcType="VARCHAR" />
		<result property="map.storage_area_name" column="storage_area_name" jdbcType="VARCHAR" />
	</resultMap>
	
	<sql id="sf-konkaMobileCollection">
		<isNotEmpty prepend=" and " property="coll_id">a.COLL_ID = #coll_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="coll_name">a.COLL_NAME = #coll_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="coll_pd_id">a.COLL_PD_ID = #coll_pd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="storage_id">a.STORAGE_ID = #storage_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="storage_area_id">a.storage_area_id = #storage_area_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="base_num">a.BASE_NUM = #base_num:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="busi_num">a.BUSI_NUM = #busi_num:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="status">a.STATUS = #status:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="is_del">a.IS_DEL = #is_del:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="remark">a.REMARK = #remark:VARCHAR#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.exceptColl_id">a.COLL_ID != #map.exceptColl_id#</isNotEmpty>
	</sql>
	
	<select id="selectKonkaMobileCollection" resultMap="konkaMobileCollectionResultForQuery" parameterClass="konkaMobileCollection" >
		select a.*,
			(select b.STORAGE_NAME from KONKA_MOBILE_STORAGES b where b.STORAGE_ID = a.storage_id) as storage_name,
			(select b.STORAGE_NAME from KONKA_MOBILE_STORAGES b where b.STORAGE_ID = a.storage_area_id) as storage_area_name
		 from KONKA_MOBILE_COLLECTION a where 1=1
		<include refid="sf-konkaMobileCollection" />
	</select>
	
	<select id="selectKonkaMobileCollectionList" resultMap="konkaMobileCollectionResult" parameterClass="konkaMobileCollection" >
		<isNotEmpty property="row.count"><![CDATA[ select * from ( ]]></isNotEmpty>
		select * from KONKA_MOBILE_COLLECTION a where 1=1
		<include refid="sf-konkaMobileCollection" />
		<!-- order by a.coll_id desc -->
		<isNotEmpty property="row.count"><![CDATA[ ) where rownum<=#row.count# ]]></isNotEmpty>
	</select>
	
	<select id="selectKonkaMobileCollectionCount" resultClass="long" parameterClass="konkaMobileCollection" >
		select count(*) from KONKA_MOBILE_COLLECTION a where 1 = 1
		<include refid="sf-konkaMobileCollection" />
	</select>
	
	<select id="selectKonkaMobileCollectionPaginatedList" resultMap="konkaMobileCollectionResultForQuery" parameterClass="konkaMobileCollection" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select a.* ,
			(select b.STORAGE_NAME from KONKA_MOBILE_STORAGES b where b.STORAGE_ID = a.storage_id) as storage_name,
			(select b.STORAGE_NAME from KONKA_MOBILE_STORAGES b where b.STORAGE_ID = a.storage_area_id) as storage_area_name
		from KONKA_MOBILE_COLLECTION a where 1=1
		<include refid="sf-konkaMobileCollection" />
		<!-- order by a.coll_id desc -->
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>

	<insert id="insertKonkaMobileCollection" parameterClass="konkaMobileCollection">
		<selectKey resultClass="long" keyProperty="coll_id">select KONKA_MOBILE_FIGHT.nextval as coll_id from dual</selectKey>
		<![CDATA[insert into KONKA_MOBILE_COLLECTION (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="coll_id">COLL_ID</isNotNull>
			<isNotNull prepend="," property="coll_name">COLL_NAME</isNotNull>
			<isNotNull prepend="," property="coll_pd_id">COLL_PD_ID</isNotNull>
			<isNotNull prepend="," property="storage_id">STORAGE_ID</isNotNull>
			<isNotNull prepend="," property="storage_area_id">STORAGE_AREA_ID</isNotNull>
			<isNotNull prepend="," property="base_num">BASE_NUM</isNotNull>
			<isNotNull prepend="," property="busi_num">BUSI_NUM</isNotNull>
			<isNotNull prepend="," property="status">STATUS</isNotNull>
			<isNotNull prepend="," property="is_del">IS_DEL</isNotNull>
			<isNotNull prepend="," property="remark">REMARK</isNotNull>
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="coll_id">#coll_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="coll_name">#coll_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="coll_pd_id">#coll_pd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="storage_id">#storage_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="storage_area_id">#storage_area_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="base_num">#base_num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="busi_num">#busi_num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="status">#status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">#is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="remark">#remark:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>
	
	<update id="updateKonkaMobileCollection" parameterClass="konkaMobileCollection">
		update KONKA_MOBILE_COLLECTION
		<dynamic prepend="set">
			<isNotNull prepend="," property="coll_id">COLL_ID = #coll_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="coll_name">COLL_NAME = #coll_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="coll_pd_id">COLL_PD_ID = #coll_pd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="storage_id">STORAGE_ID = #storage_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="storage_area_id">storage_area_id = #storage_area_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="base_num">BASE_NUM = #base_num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="busi_num">BUSI_NUM = #busi_num:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="status">STATUS = #status:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="is_del">is_del = #is_del:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="remark">remark = #remark:VARCHAR#</isNotNull>
		</dynamic>
		where
		<isNotEmpty prepend=" " property="coll_id">coll_id = #coll_id#</isNotEmpty>
		<isEmpty prepend=" " property="coll_id">
			<isNotEmpty prepend=" " property="map.pks">
				coll_id in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>
	
	<delete id="deleteKonkaMobileCollection" parameterClass="konkaMobileCollection">
		delete from KONKA_MOBILE_COLLECTION where
		<isNotEmpty prepend=" " property="coll_id">coll_id = #coll_id#</isNotEmpty>
		<isEmpty prepend=" " property="coll_id">
			<isNotEmpty prepend=" " property="map.pks">
				coll_id in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</delete>
</sqlMap>
