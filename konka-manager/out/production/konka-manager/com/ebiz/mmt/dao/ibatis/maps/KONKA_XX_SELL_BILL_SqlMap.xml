<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KONKA_XX_SELL_BILL">

	<typeAlias alias="konkaXxSellBill" type="com.ebiz.mmt.domain.KonkaXxSellBill" />

	<resultMap id="konkaXxSellBillResultForList" class="konkaXxSellBill">
		<result column="SELL_BILL_ID" property="sell_bill_id" jdbcType="DECIMAL" />
		<result column="DEPT_ID" property="dept_id" jdbcType="DECIMAL" />
		<result column="ZMD_ID" property="zmd_id" jdbcType="DECIMAL" />
		<result column="ZMD_SN" property="zmd_sn" jdbcType="VARCHAR" />
		<result column="TOTAL_MONEY" property="total_money" jdbcType="DECIMAL" />
		<result column="SELL_MAN" property="sell_man" jdbcType="VARCHAR" />
		<result column="SELL_REMARKS" property="sell_remarks" jdbcType="VARCHAR" />
		<result column="SELL_DATE" property="sell_date" jdbcType="DATETIME" />
		<result column="SELL_STATE" property="sell_state" jdbcType="DECIMAL" />
		<result column="PAY_WAY" property="pay_way" jdbcType="DECIMAL" />
		<result column="MONEY_OF_DEPOSIT" property="money_of_deposit" jdbcType="DECIMAL" />
		<result column="SELL_POST_P_INDEX" property="sell_post_p_index" jdbcType="DECIMAL" />
		<result column="SELL_POST_ADDR" property="sell_post_addr" jdbcType="VARCHAR" />
		<result column="BUYER_NAME" property="buyer_name" jdbcType="VARCHAR" />
		<result column="BUYER_ID" property="buyer_id" jdbcType="VARCHAR" />
		<result column="BUYER_SEX" property="buyer_sex" jdbcType="DECIMAL" />
		<result column="BUYER_BIRTHDAY" property="buyer_birthday" jdbcType="DATETIME" />
		<result column="BUYER_TEL" property="buyer_tel" jdbcType="VARCHAR" />
		<result column="BUYER_PHONE" property="buyer_phone" jdbcType="VARCHAR" />
		<result column="BUYER_P_INDEX" property="buyer_p_index" jdbcType="DECIMAL" />
		<result column="BUYER_LINK_ADDR" property="buyer_link_addr" jdbcType="VARCHAR" />
		<result column="CW_REMARKS" property="cw_remarks" jdbcType="VARCHAR" />
		<result column="BUYER_MEMO" property="buyer_memo" jdbcType="VARCHAR" />
		<result column="FEE_OF_POST" property="fee_of_post" jdbcType="DECIMAL" />
		<result column="ADD_USER_REALNAME" property="add_user_realname" jdbcType="VARCHAR" />
		<result column="ADD_USER_ID" property="add_user_id" jdbcType="DECIMAL" />
		<result column="ADD_DATE" property="add_date" jdbcType="DATETIME" />
		<result column="JS_BILL_STATE" property="js_bill_state" jdbcType="DECIMAL" />
		<result column="JS_BILL_DATE" property="js_bill_date" jdbcType="DATETIME" />
		<result column="JS_BILL_USER_ID" property="js_bill_user_id" jdbcType="DECIMAL" />
		<result column="JS_BILL_USER_REALNAME" property="js_bill_user_realname" jdbcType="VARCHAR" />
		<result column="JS_BILL_MONEY" property="js_bill_money" jdbcType="DECIMAL" />
		<result column="JS_DIST_STATE" property="js_dist_state" jdbcType="DECIMAL" />
		<result column="JS_DIST_DATE" property="js_dist_date" jdbcType="DATETIME" />
		<result column="JS_DIST_USER_ID" property="js_dist_user_id" jdbcType="DECIMAL" />
		<result column="JS_DIST_USER_REALNAME" property="js_dist_user_realname" jdbcType="VARCHAR" />
		<result column="SELL_REC_NAME" property="sell_rec_name" jdbcType="VARCHAR" />
		<result column="SELL_REC_LINK_MP" property="sell_rec_link_mp" jdbcType="VARCHAR" />
		<result column="SELL_BILL_TYPE" property="sell_bill_type" jdbcType="DECIMAL" />
		<result column="CZ_STATE" property="cz_state" jdbcType="DECIMAL" />
		<result column="RETURN_STATE" property="return_state" jdbcType="DECIMAL" />
		<result column="RETURN_DATE" property="return_date" jdbcType="DATETIME" />
		<result column="AUDIT_DATE" property="audit_date" jdbcType="DATETIME" />
		<result column="DIST_DATE" property="dist_date" jdbcType="DATETIME" />
		<result column="TAKE_GOOGS_DATE" property="take_googs_date" jdbcType="DATETIME" />
		<result column="CZ_DATE" property="cz_date" jdbcType="DATETIME" />
		<result column="JZ_DATE" property="jz_date" jdbcType="DATETIME" />
		<result column="SUBMIT_TYPE" property="submit_type" jdbcType="DECIMAL" />
		<result column="REMIT_REC_ID" property="remit_rec_id" jdbcType="DECIMAL" />
		<result column="SALARY_REC_ID" property="salary_rec_id" jdbcType="DECIMAL" />
		<result column="POS_BILL_SN" property="pos_bill_sn" jdbcType="VARCHAR" />
		<result column="DIST_ID" property="dist_id" jdbcType="DECIMAL" />
		<result column="CHECKOUT_STATE" property="checkout_state" jdbcType="DECIMAL" />
		<result column="CHECKOUT_DATE" property="checkout_date" jdbcType="DATETIME" />
		<result column="DIST_PAYEE" property="dist_payee" jdbcType="VARCHAR" />
		<result column="DIST_PAYEE_ID" property="dist_payee_id" jdbcType="VARCHAR" />
		<result column="READY_DIST_DATE" property="ready_dist_date" jdbcType="DATETIME" />
		<result column="SELL_BILL_HEAD" property="sell_bill_head" jdbcType="VARCHAR" />
		<result column="SELL_BILL_TAXPAYER_ID" property="sell_bill_taxpayer_id" jdbcType="VARCHAR" />
		<result column="RETURN_V_DATE" property="return_v_date" jdbcType="DATETIME" />
		<result column="DIST_EMPLOYEE_ID" property="dist_employee_id" jdbcType="DECIMAL" />
		<result column="CHECKOUT_DIST_STATE" property="checkout_dist_state" jdbcType="DECIMAL" />
		<result column="CHECKOUT_DIST_DATE" property="checkout_dist_date" jdbcType="DATETIME" />
		<result column="CHECKOUT_ZMD_STATE" property="checkout_zmd_state" jdbcType="DECIMAL" />
		<result column="CHECKOUT_ZMD_DATE" property="checkout_zmd_date" jdbcType="DATETIME" />
		<result column="AUDIT_USER_ID" property="audit_user_id" jdbcType="DECIMAL" />
		<result column="AUDIT_REAL_NAME" property="audit_real_name" jdbcType="VARCHAR" />
		<result column="DIST_USER_ID" property="dist_user_id" jdbcType="DECIMAL" />
		<result column="DIST_REAL_NAME" property="dist_real_name" jdbcType="VARCHAR" />
		<result column="CHECK_RECGOODS_USER_ID" property="check_recgoods_user_id" jdbcType="DECIMAL" />
		<result column="CHECK_RECGOODS_REAL_NAME" property="check_recgoods_real_name" jdbcType="VARCHAR" />
		<result column="RETURN_V_USER_ID" property="return_v_user_id" jdbcType="DECIMAL" />
		<result column="RETURN_V_REAL_NAME" property="return_v_real_name" jdbcType="VARCHAR" />
		<result column="CHECKOUT_POS_STATE" property="checkout_pos_state" jdbcType="DECIMAL" />
		<result column="CHECKOUT_POS_DATE" property="checkout_pos_date" jdbcType="DATETIME" />
		<result column="CHECKOUT_POS_USER_ID" property="checkout_pos_user_id" jdbcType="DECIMAL" />
		<result column="CHECKOUT_POS_REAL_NAME" property="checkout_pos_real_name" jdbcType="VARCHAR" />
		<result column="POS_ID" property="pos_id" jdbcType="DECIMAL" />
		<result column="ORDER_TYPE" property="order_type" jdbcType="DECIMAL" />
		<result column="STOCK_FROM" property="stock_from" jdbcType="DECIMAL" />
		<result column="AREA_ID" property="area_id" jdbcType="DECIMAL" />
		<result column="CONSUMER_GRADE_NUM" property="consumer_grade_num" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="konkaXxSellBillResult" class="konkaXxSellBill" extends="konkaXxSellBillResultForList">
	</resultMap>
	
	<resultMap id="konkaXxSellBillForJsResult" class="konkaXxSellBill" extends="konkaXxSellBillResultForList">
		<result column="TYPE_NAME" property="map.type_name" jdbcType="VARCHAR" />
		<result column="DEPT_NAME" property="map.dept_name" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="konkaXxSellBillForHdResult" class="konkaXxSellBill">
		<result column="total_money" property="map.total_money" jdbcType="DECIMAL" />
	</resultMap>
	
	<resultMap id="konkaXxSellBillForDeptResult" class="konkaXxSellBill" extends="konkaXxSellBillResultForList">
		<result column="DEPT_NAME" property="map.dept_name" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="konkaXxSellBillForDeptResult" class="konkaXxSellBill" extends="konkaXxSellBillResultForList">
		<result column="DEPT_NAME" property="map.money_counts" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="konkaXxSellBillAndDetailResultForList" class="konkaXxSellBill" extends="konkaXxSellBillResultForList">
		<result column="sell_bill_details_id" property="map.sell_bill_details_id" jdbcType="DECIMAL" />
		<result column="pd_cls_name" property="map.pd_cls_name" jdbcType="VARCHAR" />
		<result column="md_name" property="map.md_name" jdbcType="VARCHAR" />
		<result column="price" property="map.price" jdbcType="DECIMAL" />
		<result column="counts" property="map.counts" jdbcType="DECIMAL" />
		<result column="gift" property="map.gift" jdbcType="VARCHAR" />
		<result column="xs_remarks" property="map.xs_remarks" jdbcType="VARCHAR" />
	</resultMap>

	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<resultMap id="konkaXxSellBillMoneySum" class="konkaXxSellBill">
		<result column="sell_money_sum" property="map.sell_money_sum" jdbcType="VARCHAR" />
	</resultMap>
	
	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<resultMap id="konkaXxSellBillDeptPdSellMoneySum" class="konkaXxSellBill">
		<result column="md_name" property="map.md_name" jdbcType="VARCHAR" />
		<result column="sell_money_sum" property="map.sell_money_sum" jdbcType="VARCHAR" />
	</resultMap>
	
	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<resultMap id="konkaXxSellBillDeptPdSellNumSum" class="konkaXxSellBill">
		<result column="md_name" property="map.md_name" jdbcType="VARCHAR" />
		<result column="sell_num_sum" property="map.sell_num_sum" jdbcType="VARCHAR" />
	</resultMap>
	
	<!--@author Jiang,JiaYong @version 2012-04-07  -->
	<resultMap id="konkaXxSellBillListForCountNumSumMoney" class="konkaXxSellBill">
		<result column="zmd_id" property="zmd_id" jdbcType="DECIMAL" />
		<result column="zmd_sn" property="zmd_sn" jdbcType="VARCHAR" />
		<result column="count_num" property="map.count_num" jdbcType="VARCHAR" />
		<result column="sum_money" property="map.sum_money" jdbcType="VARCHAR" />
	</resultMap>
	
	<sql id="sf-konkaXxSellBill">
		<isNotEmpty prepend=" and " property="sell_bill_id">SELL_BILL_ID = #sell_bill_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_sn">ZMD_SN = #zmd_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="total_money">TOTAL_MONEY = #total_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_man">SELL_MAN = #sell_man:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_remarks">SELL_REMARKS = #sell_remarks:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_date">SELL_DATE = #sell_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_state">SELL_STATE = #sell_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pay_way">PAY_WAY = #pay_way:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="money_of_deposit">MONEY_OF_DEPOSIT = #money_of_deposit:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_post_p_index">SELL_POST_P_INDEX = #sell_post_p_index:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_post_addr">SELL_POST_ADDR = #sell_post_addr:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_name">BUYER_NAME = #buyer_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_id">BUYER_ID = #buyer_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_sex">BUYER_SEX = #buyer_sex:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_birthday">BUYER_BIRTHDAY = #buyer_birthday:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_tel">BUYER_TEL = #buyer_tel:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_phone">BUYER_PHONE = #buyer_phone:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_p_index">BUYER_P_INDEX = #buyer_p_index:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_link_addr">BUYER_LINK_ADDR = #buyer_link_addr:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cw_remarks">CW_REMARKS = #cw_remarks:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="buyer_memo">BUYER_MEMO = #buyer_memo:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="fee_of_post">FEE_OF_POST = #fee_of_post:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_realname">ADD_USER_REALNAME = #add_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_user_id">ADD_USER_ID = #add_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="add_date">ADD_DATE = #add_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_state">JS_BILL_STATE = #js_bill_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_date">JS_BILL_DATE = #js_bill_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_id">JS_BILL_USER_ID = #js_bill_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_realname">JS_BILL_USER_REALNAME = #js_bill_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_money">JS_BILL_MONEY = #js_bill_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_state">JS_DIST_STATE = #js_dist_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_date">JS_DIST_DATE = #js_dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_id">JS_DIST_USER_ID = #js_dist_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_realname">JS_DIST_USER_REALNAME = #js_dist_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_rec_name">SELL_REC_NAME = #sell_rec_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_rec_link_mp">SELL_REC_LINK_MP = #sell_rec_link_mp:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_bill_type">SELL_BILL_TYPE = #sell_bill_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cz_state">CZ_STATE = #cz_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_state">RETURN_STATE = #return_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_date">RETURN_DATE = #return_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_date">AUDIT_DATE = #audit_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_date">DIST_DATE = #dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="take_googs_date">TAKE_GOOGS_DATE = #take_googs_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="cz_date">CZ_DATE = #cz_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="jz_date">JZ_DATE = #jz_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="submit_type">SUBMIT_TYPE = #submit_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="salary_rec_id">SALARY_REC_ID = #salary_rec_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pos_bill_sn">POS_BILL_SN = #pos_bill_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_id">DIST_ID = #dist_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_state">CHECKOUT_STATE = #checkout_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_date">CHECKOUT_DATE = #checkout_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_payee">DIST_PAYEE = #dist_payee:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_payee_id">DIST_PAYEE_ID = #dist_payee_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="ready_dist_date">READY_DIST_DATE = #ready_dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_bill_head">SELL_BILL_HEAD = #sell_bill_head:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_bill_taxpayer_id">SELL_BILL_TAXPAYER_ID = #sell_bill_taxpayer_id:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_v_date">RETURN_V_DATE = #return_v_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_employee_id">DIST_EMPLOYEE_ID = #dist_employee_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_dist_state">CHECKOUT_DIST_STATE = #checkout_dist_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_dist_date">CHECKOUT_DIST_DATE = #checkout_dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_zmd_state">CHECKOUT_ZMD_STATE = #checkout_zmd_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_zmd_date">CHECKOUT_ZMD_DATE = #checkout_zmd_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_user_id">AUDIT_USER_ID = #audit_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="audit_real_name">AUDIT_REAL_NAME = #audit_real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_user_id">DIST_USER_ID = #dist_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dist_real_name">DIST_REAL_NAME = #dist_real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="check_recgoods_user_id">CHECK_RECGOODS_USER_ID = #check_recgoods_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="check_recgoods_real_name">CHECK_RECGOODS_REAL_NAME = #check_recgoods_real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_v_user_id">RETURN_V_USER_ID = #return_v_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_v_real_name">RETURN_V_REAL_NAME = #return_v_real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="remit_rec_id">REMIT_REC_ID = #remit_rec_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_pos_state">CHECKOUT_POS_STATE = #checkout_pos_state:DECIMAL#</isNotEmpty>	
		<isNotEmpty prepend=" and " property="checkout_pos_date">CHECKOUT_POS_DATE = #checkout_pos_date:DATETIME#</isNotEmpty>	
		<isNotEmpty prepend=" and " property="checkout_pos_user_id">CHECKOUT_POS_USER_ID = #checkout_pos_user_id:DECIMAL#</isNotEmpty>	
		<isNotEmpty prepend=" and " property="checkout_pos_real_name">CHECKOUT_POS_REAL_NAME = #checkout_pos_real_name:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pos_id">POS_ID = #pos_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="stock_from">STOCK_FROM = #stock_from:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="area_id">AREA_ID = #area_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="consumer_grade_num">CONSUMER_GRADE_NUM = #consumer_grade_num:VARCHAR#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.checkout_dist_date_ge"><![CDATA[CHECKOUT_DIST_DATE >= to_date(#map.checkout_dist_date_ge#,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.checkout_dist_date_le"><![CDATA[CHECKOUT_DIST_DATE <= to_date(#map.checkout_dist_date_le#,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[ADD_DATE >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[ADD_DATE <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_cal_ge"><![CDATA[ADD_DATE >= to_date(#map.add_date_cal_ge#,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_cal_le"><![CDATA[ADD_DATE <= to_date(#map.add_date_cal_le#,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_state_ge">SELL_STATE &gt;= #map.sell_state_ge#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.buyer_name_like">BUYER_NAME like '%' || #map.buyer_name_like:VARCHAR# ||  '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_user_realname_like">ADD_USER_REALNAME like '%' || #map.add_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.buyer_name_like">BUYER_NAME like '%' || #map.add_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.audit_sell_state"><![CDATA[SELL_STATE >= 10 and SELL_STATE <= #map.audit_sell_state#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.receive_state_bg"><![CDATA[SELL_STATE >= #map.receive_state_bg#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.receive_state_en"><![CDATA[SELL_STATE <= #map.receive_state_en#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.p_index_par">BUYER_P_INDEX in (select bpl.p_index from konka_base_province_list_four bpl 
		  where bpl.del_mark=0 start with bpl.p_index = #map.p_index_par# connect by prior bpl.p_index = bpl.par_index)
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.zmd_sn_like">ZMD_SN like '%' || #map.zmd_sn_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.zmds">
				ZMD_ID in
				<iterate close=")" open="(" conjunction="," property="map.zmds">#map.zmds[]#</iterate>
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.last_add_date">
			ADD_DATE = (select max(add_date)
                       from konka_xx_sell_bill
                      where zmd_id = #map.last_add_date[0]#
                        and buyer_id = #map.last_add_date[1]#)
		</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.pay_way_is_select">(pay_way = 1 or (pay_way = 3 and money_of_deposit > 0 ))</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.dist_id_is_null">dist_id is null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.remit_rec_id_is_null">remit_rec_id is null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.toBeDist">DIST_DATE is null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.distSellState"><![CDATA[SELL_STATE >= #map.distSellState#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_between"><![CDATA[
			dist_date >= to_date( #map.add_date_between# || '00:00:00', 'yyyy-MM-dd HH24:mi:ss') 
			and dist_date <= to_date(#map.add_date_between# || '23:59:59', 'yyyy-MM-dd HH24:mi:ss')
		]]></isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.sell_state_in">
			sell_state in 
				<iterate close=")" open="(" conjunction="," property="map.sell_state_in">#map.sell_state_in[]#</iterate>
		</isNotEmpty>
	</sql>

	<select id="selectKonkaXxSellBill" resultMap="konkaXxSellBillResult" parameterClass="konkaXxSellBill" >
		select * from KONKA_XX_SELL_BILL where 1 = 1
		<include refid="sf-konkaXxSellBill" />
	</select>

	<select id="selectKonkaXxSellBillList" resultMap="konkaXxSellBillResultForList" parameterClass="konkaXxSellBill" >
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
		select * from KONKA_XX_SELL_BILL where 1 = 1
		<include refid="sf-konkaXxSellBill" />
		<!-- order by ID asc -->
		order by ADD_DATE desc
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<select id="selectKonkaXxSellBillCount" resultClass="long" parameterClass="konkaXxSellBill" >
		select count(*) from KONKA_XX_SELL_BILL where 1 = 1
		<include refid="sf-konkaXxSellBill" />
	</select>
	
	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<select id="selectKonkaXxSellBillNumSum" resultClass="long" parameterClass="konkaXxSellBill" >
		select sum(t2.counts) as sell_count
		  from KONKA_XX_SELL_BILL t1, KONKA_XX_SELL_BILL_DETAILS t2
		 where t1.sell_bill_id = t2.sell_bill_id
		   <isNotEmpty prepend=" and " property="dept_id">t1.dept_id = #dept_id:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="zmd_id">t1.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.md_name">t2.md_name = #map.md_name:VARCHAR#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="sell_state">t1.sell_state = #sell_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="checkout_zmd_state">t1.checkout_zmd_state = #checkout_zmd_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="checkout_state">t1.checkout_state = #checkout_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[t1.add_date >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[t1.add_date <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   <isNotEmpty prepend=" and " property="order_type">t1.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
	</select>
	
	<!--@author Jiang,JiaYong @version 2012-05-07  -->
	<select id="selectKonkaXxSellBillListForCountNumSumMoney" resultMap="konkaXxSellBillListForCountNumSumMoney" parameterClass="konkaXxSellBill" >
	   select t.zmd_id, max(t.zmd_sn) zmd_sn, count(t.sell_bill_id) count_num, sum(t.total_money) sum_money
          from konka_xx_sell_bill t
         where t.dept_id = #dept_id:DECIMAL#  
           <isNotEmpty prepend=" and " property="pay_way">t.pay_way = #pay_way:DECIMAL#</isNotEmpty>
           <isNotEmpty prepend=" and " property="checkout_state">t.checkout_state = #checkout_state:DECIMAL#</isNotEmpty>
           <isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[t.add_date >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
   		   <isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[t.add_date <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
   		   <isNotEmpty prepend=" and " property="order_type">t.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
         group by t.zmd_id
	</select>

	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<select id="selectKonkaXxSellBillMoneySum" resultMap="konkaXxSellBillMoneySum" parameterClass="konkaXxSellBill" >
		select sum(t2.counts * t2.price) as sell_money_sum
		  from KONKA_XX_SELL_BILL t1, KONKA_XX_SELL_BILL_DETAILS t2
		 where t1.sell_bill_id = t2.sell_bill_id
		   <isNotEmpty prepend=" and " property="dept_id">t1.dept_id = #dept_id:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="zmd_id">t1.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.md_name">t2.md_name = #map.md_name:VARCHAR#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="sell_state">t1.sell_state = #sell_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="checkout_zmd_state">t1.checkout_zmd_state = #checkout_zmd_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="checkout_state">t1.checkout_state = #checkout_state:DECIMAL#</isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[t1.add_date >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   <isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[t1.add_date <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   <isNotEmpty prepend=" and " property="order_type">t1.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
	</select>
	
	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<select id="selectKonkaXxSellBillDeptPdSellMoneySumList" resultMap="konkaXxSellBillDeptPdSellMoneySum" parameterClass="konkaXxSellBill" >
		select tt.md_name, nvl(tt1.sell_money_sum, '0') as sell_money_sum
		  from konka_xx_pd tt
		  left join (select t2.md_name, sum(t2.counts * t2.price) as sell_money_sum
		               from KONKA_XX_SELL_BILL t1, KONKA_XX_SELL_BILL_DETAILS t2
		              where t1.sell_bill_id = t2.sell_bill_id
		                <isNotEmpty prepend=" and " property="dept_id">t1.dept_id = #dept_id:DECIMAL#</isNotEmpty>
		                <isNotEmpty prepend=" and " property="zmd_id">t1.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		                <isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[t1.add_date >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   				<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[t1.add_date <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   				<isNotEmpty prepend=" and " property="order_type">t1.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		   				and t1.sell_state = 70
		              group by t2.md_name) tt1
		    on tt.md_name = tt1.md_name
		 where tt.dept_id = #dept_id:DECIMAL#
		  order by tt.md_name asc
	</select>
	
	<!--@author Jiang,JiaYong @version 2012-04-06  -->
	<select id="selectKonkaXxSellBillDeptPdSellNumSumList" resultMap="konkaXxSellBillDeptPdSellNumSum" parameterClass="konkaXxSellBill" >
		select tt.md_name, nvl(tt1.sell_num_sum, '0') as sell_num_sum
		  from konka_xx_pd tt
		  left join (select t2.md_name, sum(t2.counts) as sell_num_sum
		               from KONKA_XX_SELL_BILL t1, KONKA_XX_SELL_BILL_DETAILS t2
		              where t1.sell_bill_id = t2.sell_bill_id
		                <isNotEmpty prepend=" and " property="dept_id">t1.dept_id = #dept_id:DECIMAL#</isNotEmpty>
		                <isNotEmpty prepend=" and " property="zmd_id">t1.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		                <isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[t1.add_date >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   				<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[t1.add_date <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		   				<isNotEmpty prepend=" and " property="order_type">t1.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		   				and t1.sell_state = 70
		              group by t2.md_name) tt1
		    on tt.md_name = tt1.md_name
		 where tt.dept_id = #dept_id:DECIMAL#
		   order by tt.md_name asc
	</select>
		
	<select id="selectKonkaXxSellBillCountForJs" resultClass="long" parameterClass="konkaXxSellBill" >
		SELECT count(*)
		  FROM KONKA_XX_SELL_BILL kb
		  left join KONKA_XX_BASE_TYPE kt on kb.pay_way = kt.type_id
		  left join KONKA_DEPT kd on kb.dept_id = kd.dept_id
		 WHERE 1 = 1
		<isNotEmpty prepend=" and " property="dept_id">kb.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">kb.ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_sn">kb.ZMD_SN = #zmd_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_state">kb.sell_state = #sell_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pay_way">kb.PAY_WAY = #pay_way:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_state">kb.JS_BILL_STATE = #js_bill_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_date">kb.JS_BILL_DATE = #js_bill_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_id">kb.JS_BILL_USER_ID = #js_bill_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_realname">kb.JS_BILL_USER_REALNAME = #js_bill_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_money">kb.JS_BILL_MONEY = #js_bill_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_state">kb.JS_DIST_STATE = #js_dist_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_date">kb.JS_DIST_DATE = #js_dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_id">kb.JS_DIST_USER_ID = #js_dist_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_realname">kb.JS_DIST_USER_REALNAME = #js_dist_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="submit_type">kb.SUBMIT_TYPE = #submit_type:DECIMAL#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.zmd_sn_like">UPPER(kb.zmd_sn) like '%' || UPPER(#map.zmd_sn_like:VARCHAR#) || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_date_begin">kb.sell_date &gt;= to_date(#map.sell_date_begin#,'yyyy-MM-dd')</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_date_end">kb.sell_date &lt;= to_date(#map.sell_date_end#,'yyyy-MM-dd')</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_state_ge">kb.sell_state &gt;= #map.sell_state_ge#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[kb.ADD_DATE >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[kb.ADD_DATE <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_date_ge"><![CDATA[kb.js_bill_date >= to_date(#map.js_bill_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_date_le"><![CDATA[kb.js_bill_date <= to_date(#map.js_bill_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_date_ge"><![CDATA[kb.JS_DIST_DATE >= to_date(#map.js_dist_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_date_le"><![CDATA[kb.JS_DIST_DATE <= to_date(#map.js_dist_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.buyer_name_like">kb.BUYER_NAME like '%' || #map.buyer_name_like:VARCHAR# ||  '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_user_realname_like">kb.ADD_USER_REALNAME like '%' || #map.add_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_user_realname_like">kb.JS_BILL_USER_REALNAME like '%' || #map.js_bill_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_user_realname_like">kb.JS_DIST_USER_REALNAME like '%' || #map.js_dist_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.zmds">
				kb.ZMD_ID in
				<iterate close=")" open="(" conjunction="," property="map.zmds">#map.zmds[]#</iterate>
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.last_add_date">add_date = (select max(add_date) from konka_xx_sell_bill where zmd_id = #map.last_add_date[0]# and buyer_id = #map.last_add_date[1]#)</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.printRec"><![CDATA[SELL_STATE >= #map.printRec#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.return_v_not">return_v_user_id is null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.return_v_had">return_v_user_id is not null</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">kb.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
	</select>

	<select id="selectKonkaXxSellBillPaginatedList" resultMap="konkaXxSellBillResult" parameterClass="konkaXxSellBill" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select * from KONKA_XX_SELL_BILL where 1 = 1
		<include refid="sf-konkaXxSellBill" />
		order by SELL_STATE asc, ADD_DATE desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<!--hu,hao  2012-03-03-->
	<select id="selectKonkaXxSellBillForDeptCount" resultClass="long" parameterClass="konkaXxSellBill" >
		SELECT COUNT(1)
 			 FROM KONKA_XX_SELL_BILL A
  			 LEFT JOIN KONKA_DEPT B ON A.DEPT_ID = B.DEPT_ID where 1 = 1
	    <isNotEmpty prepend=" and " property="dept_id">a.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="zmd_id">a.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="cz_state">a.cz_state = #cz_state:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.sell_bill_id_like">a.sell_bill_id like '%' || #map.sell_bill_id_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_state">a.return_state = #return_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.start_time"><![CDATA[a.cz_date >= to_date(#map.start_time# || '00:00:00' ,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.end_time"><![CDATA[a.cz_date < to_date(#map.end_time# || '00:00:00' ,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">a.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
	</select>
	
	<!--Jiang,JiaYong  2012-03-20-->
	<select id="selectKonkaXxSellBillTotalMoneySum" resultClass="string" parameterClass="konkaXxSellBill" >
	   select sum(total_money)
		from konka_xx_sell_bill
		where 1 = 1
		<include refid="sf-konkaXxSellBill" />
	</select>
	
		<!--Hu,Hao 2013-03-23-->
	<select id="selectKonkaXxSellBillTotalMoneySumHd" resultClass="string" parameterClass="konkaXxSellBill" >
	   select sum(total_money) as total_money
		from konka_xx_sell_bill
		where 1 = 1
		<isNotEmpty prepend=" and " property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.start_date"><![CDATA[
			sell_date >= to_date( #map.start_date#, 'yyyy-MM-dd HH24:mi:ss') 
		]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.end_date"><![CDATA[
			 sell_date <= to_date(#map.end_date#, 'yyyy-MM-dd HH24:mi:ss')
		]]></isNotEmpty>
	</select>
	
	<!--hu,hao  2012-03-03-->
	<select id="selectKonkaXxSellBillForDeptPaginatedList" resultMap="konkaXxSellBillForDeptResult" parameterClass="konkaXxSellBill" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		select a.*, b.dept_name
  			from konka_xx_sell_bill a
  			left join konka_dept b on a.dept_id = b.dept_id where 1 = 1
	    <isNotEmpty prepend=" and " property="dept_id">a.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="zmd_id">a.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="cz_state">a.cz_state = #cz_state:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.sell_bill_id_like">a.sell_bill_id like '%' || #map.sell_bill_id_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="return_state">a.return_state = #return_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.start_time"><![CDATA[a.cz_date >= to_date(#map.start_time# ,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.end_time"><![CDATA[a.cz_date < to_date(#map.end_time# ,'yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">a.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		order by return_date desc
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<!--hu,hao  2012-04-05-->
	<select id="selectKonkaXxSellBillForZmdCount" resultClass="long" parameterClass="konkaXxSellBill" >
		SELECT COUNT(1)
 			 FROM KONKA_XX_SELL_BILL A
  			 LEFT JOIN KonkaXxZmd B ON A.zmd_id = B.zmd_id where 1 = 1
	    <isNotEmpty prepend=" and " property="sell_state">a.sell_state = #sell_state:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.sell_bill_id_like">UPPER(a.sell_bill_id like) '%' || (UPPER#map.sell_bill_id_like:VARCHAR#)|| '%'</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.POS_BILL_SN_like">UPPER(a.POS_BILL_SN like) '%' ||UPPER( #map.POS_BILL_SN:VARCHAR#)|| '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">a.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_state">a.checkout_state = #checkout_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">a.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
	</select>
	
	<!--hu,hao  2012-04-05-->
	<select id="selectKonkaXxSellBillForZmdPaginatedList" resultMap="konkaXxSellBillForDeptResult" parameterClass="konkaXxSellBill" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT a.*,b.zmd_sn,b.total_credit_line
 			 FROM KONKA_XX_SELL_BILL A
  			 LEFT JOIN KonkaXxZmd B ON A.zmd_id = B.zmd_id where 1 = 1
	    <isNotEmpty prepend=" and " property="pay_way">a.pay_way = #pay_way:DECIMAL#</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.sell_bill_id_like">a.sell_bill_id like '%' || #map.sell_bill_id_like:VARCHAR# || '%'</isNotEmpty>
	    <isNotEmpty prepend=" and " property="map.POS_BILL_SN_like">a.POS_BILL_SN like '%' || #map.POS_BILL_SN:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">a.zmd_id = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="checkout_state">a.checkout_state = #checkout_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">a.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		order by add_date;
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectKonkaXxSellBillForJSPaginatedList" resultMap="konkaXxSellBillForJsResult" parameterClass="konkaXxSellBill" >
		<![CDATA[ select * from ( select t_.*, rownum rn_ from ( ]]>
		SELECT kb.*, kt.type_name, kd.dept_name
		  FROM KONKA_XX_SELL_BILL kb
		  left join KONKA_XX_BASE_TYPE kt on kb.pay_way = kt.type_id
		  left join KONKA_DEPT kd on kb.dept_id = kd.dept_id
		 WHERE 1 = 1
		<isNotEmpty prepend=" and " property="sell_bill_id">kb.SELL_BILL_ID = #sell_bill_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="dept_id">kb.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_id">kb.ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="zmd_sn">kb.ZMD_SN = #zmd_sn:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="sell_state">kb.sell_state = #sell_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="pay_way">kb.PAY_WAY = #pay_way:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_state">kb.JS_BILL_STATE = #js_bill_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_date">kb.JS_BILL_DATE = #js_bill_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_id">kb.JS_BILL_USER_ID = #js_bill_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_user_realname">kb.JS_BILL_USER_REALNAME = #js_bill_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_bill_money">kb.JS_BILL_MONEY = #js_bill_money:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_state">kb.JS_DIST_STATE = #js_dist_state:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_date">kb.JS_DIST_DATE = #js_dist_date:DATETIME#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_id">kb.JS_DIST_USER_ID = #js_dist_user_id:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="js_dist_user_realname">kb.JS_DIST_USER_REALNAME = #js_dist_user_realname:VARCHAR#</isNotEmpty>
		<isNotEmpty prepend=" and " property="submit_type">kb.SUBMIT_TYPE = #submit_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">kb.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="stock_from">kb.STOCK_FROM = #stock_from:DECIMAL#</isNotEmpty>
		
		<isNotEmpty prepend=" and " property="map.zmd_sn_like">UPPER(kb.zmd_sn) like '%' || UPPER(#map.zmd_sn_like:VARCHAR#) || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_date_begin">kb.sell_date &gt;= to_date(#map.sell_date_begin#,'yyyy-MM-dd')</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_date_end">kb.sell_date &lt;= to_date(#map.sell_date_end#,'yyyy-MM-dd')</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.sell_state_ge">kb.sell_state &gt;= #map.sell_state_ge#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[kb.ADD_DATE >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[kb.ADD_DATE <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_date_ge"><![CDATA[kb.js_bill_date >= to_date(#map.js_bill_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_date_le"><![CDATA[kb.js_bill_date <= to_date(#map.js_bill_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_date_ge"><![CDATA[kb.JS_DIST_DATE >= to_date(#map.js_dist_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_date_le"><![CDATA[kb.JS_DIST_DATE <= to_date(#map.js_dist_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.buyer_name_like">kb.BUYER_NAME like '%' || #map.buyer_name_like:VARCHAR# ||  '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.add_user_realname_like">kb.ADD_USER_REALNAME like '%' || #map.add_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_bill_user_realname_like">kb.JS_BILL_USER_REALNAME like '%' || #map.js_bill_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.js_dist_user_realname_like">kb.JS_DIST_USER_REALNAME like '%' || #map.js_dist_user_realname_like:VARCHAR# || '%'</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.zmds">
				kb.ZMD_ID in
				<iterate close=")" open="(" conjunction="," property="map.zmds">#map.zmds[]#</iterate>
		</isNotEmpty>
		<isNotEmpty prepend=" and " property="order_type">kb.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.printRec"><![CDATA[SELL_STATE >= #map.printRec#]]></isNotEmpty>
		<isNotEmpty prepend=" and " property="map.return_v_not">return_v_user_id is null</isNotEmpty>
		<isNotEmpty prepend=" and " property="map.return_v_had">return_v_user_id is not null</isNotEmpty>
		<isNotEmpty prepend=" " property="map.order_by_dept">
			order by kb.add_date desc, kb.dept_id asc,kb.zmd_id asc,sell_bill_id asc
		</isNotEmpty>
		<![CDATA[ ) t_ where rownum <= (#row.first# + #row.count#)) where rn_ >= (#row.first# + 1) ]]>
	</select>
	
	<select id="selectKonkaXxSellBillAndDetailList" resultMap="konkaXxSellBillAndDetailResultForList" parameterClass="konkaXxSellBill" >
		<isNotEmpty property="row.count">
			<![CDATA[ select * from ( ]]>
		</isNotEmpty>
			select kb.*,t2.sell_bill_details_id,t2.pd_cls_name,t2.md_name,t2.price,t2.counts,t2.gift,t2.xs_remarks from konka_xx_sell_bill kb
			join konka_xx_sell_bill_details t2 on kb.sell_bill_id = t2.sell_bill_id
			where 1 = 1
			<isNotEmpty prepend=" and " property="sell_bill_id">kb.SELL_BILL_ID = #sell_bill_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="dept_id">kb.DEPT_ID = #dept_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="zmd_id">kb.ZMD_ID = #zmd_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="zmd_sn">kb.ZMD_SN = #zmd_sn:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="sell_state">kb.sell_state = #sell_state:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="pay_way">kb.PAY_WAY = #pay_way:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_bill_state">kb.JS_BILL_STATE = #js_bill_state:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_bill_date">kb.JS_BILL_DATE = #js_bill_date:DATETIME#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_bill_user_id">kb.JS_BILL_USER_ID = #js_bill_user_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_bill_user_realname">kb.JS_BILL_USER_REALNAME = #js_bill_user_realname:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_bill_money">kb.JS_BILL_MONEY = #js_bill_money:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_dist_state">kb.JS_DIST_STATE = #js_dist_state:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_dist_date">kb.JS_DIST_DATE = #js_dist_date:DATETIME#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_dist_user_id">kb.JS_DIST_USER_ID = #js_dist_user_id:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="js_dist_user_realname">kb.JS_DIST_USER_REALNAME = #js_dist_user_realname:VARCHAR#</isNotEmpty>
			<isNotEmpty prepend=" and " property="submit_type">kb.SUBMIT_TYPE = #submit_type:DECIMAL#</isNotEmpty>
			<isNotEmpty prepend=" and " property="order_type">kb.ORDER_TYPE = #order_type:DECIMAL#</isNotEmpty>
		
			<isNotEmpty prepend=" and " property="map.add_date_ge"><![CDATA[kb.ADD_DATE >= to_date(#map.add_date_ge# || '00:00:00','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
			<isNotEmpty prepend=" and " property="map.add_date_le"><![CDATA[kb.ADD_DATE <= to_date(#map.add_date_le# || '23:59:59','yyyy-mm-dd hh24:mi:ss')]]></isNotEmpty>
		<!-- order by ID asc -->
		<isNotEmpty property="row.count">
			<![CDATA[ ) where rownum <= #row.count# ]]>
		</isNotEmpty>
	</select>

	<insert id="insertKonkaXxSellBill" parameterClass="konkaXxSellBill">
		<selectKey resultClass="long" keyProperty="sell_bill_id">select KONKA_XX_SELL_BILL_SEQ.nextval as sell_bill_id from dual </selectKey>
		<![CDATA[insert into KONKA_XX_SELL_BILL (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="sell_bill_id">SELL_BILL_ID</isNotNull>	
			<isNotNull prepend="," property="dept_id">DEPT_ID</isNotNull>	
			<isNotNull prepend="," property="zmd_id">ZMD_ID</isNotNull>	
			<isNotNull prepend="," property="zmd_sn">ZMD_SN</isNotNull>	
			<isNotNull prepend="," property="total_money">TOTAL_MONEY</isNotNull>	
			<isNotNull prepend="," property="sell_man">SELL_MAN</isNotNull>	
			<isNotNull prepend="," property="sell_remarks">SELL_REMARKS</isNotNull>	
			<isNotNull prepend="," property="sell_date">SELL_DATE</isNotNull>	
			<isNotNull prepend="," property="sell_state">SELL_STATE</isNotNull>	
			<isNotNull prepend="," property="pay_way">PAY_WAY</isNotNull>	
			<isNotNull prepend="," property="money_of_deposit">MONEY_OF_DEPOSIT</isNotNull>	
			<isNotNull prepend="," property="sell_post_p_index">SELL_POST_P_INDEX</isNotNull>	
			<isNotNull prepend="," property="sell_post_addr">SELL_POST_ADDR</isNotNull>	
			<isNotNull prepend="," property="buyer_name">BUYER_NAME</isNotNull>	
			<isNotNull prepend="," property="buyer_id">BUYER_ID</isNotNull>	
			<isNotNull prepend="," property="buyer_sex">BUYER_SEX</isNotNull>	
			<isNotNull prepend="," property="buyer_birthday">BUYER_BIRTHDAY</isNotNull>	
			<isNotNull prepend="," property="buyer_tel">BUYER_TEL</isNotNull>	
			<isNotNull prepend="," property="buyer_phone">BUYER_PHONE</isNotNull>	
			<isNotNull prepend="," property="buyer_p_index">BUYER_P_INDEX</isNotNull>	
			<isNotNull prepend="," property="buyer_link_addr">BUYER_LINK_ADDR</isNotNull>	
			<isNotNull prepend="," property="cw_remarks">CW_REMARKS</isNotNull>	
			<isNotNull prepend="," property="buyer_memo">BUYER_MEMO</isNotNull>	
			<isNotNull prepend="," property="fee_of_post">FEE_OF_POST</isNotNull>	
			<isNotNull prepend="," property="add_user_realname">ADD_USER_REALNAME</isNotNull>	
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID</isNotNull>	
			<isNotNull prepend="," property="add_date">ADD_DATE</isNotNull>	
			<isNotNull prepend="," property="js_bill_state">JS_BILL_STATE</isNotNull>	
			<isNotNull prepend="," property="js_bill_date">JS_BILL_DATE</isNotNull>	
			<isNotNull prepend="," property="js_bill_user_id">JS_BILL_USER_ID</isNotNull>	
			<isNotNull prepend="," property="js_bill_user_realname">JS_BILL_USER_REALNAME</isNotNull>	
			<isNotNull prepend="," property="js_bill_money">JS_BILL_MONEY</isNotNull>	
			<isNotNull prepend="," property="js_dist_state">JS_DIST_STATE</isNotNull>	
			<isNotNull prepend="," property="js_dist_date">JS_DIST_DATE</isNotNull>	
			<isNotNull prepend="," property="js_dist_user_id">JS_DIST_USER_ID</isNotNull>	
			<isNotNull prepend="," property="js_dist_user_realname">JS_DIST_USER_REALNAME</isNotNull>
			<isNotNull prepend="," property="sell_rec_name">SELL_REC_NAME</isNotNull>
			<isNotNull prepend="," property="sell_rec_link_mp">SELL_REC_LINK_MP</isNotNull>
			<isNotNull prepend="," property="sell_bill_type">SELL_BILL_TYPE</isNotNull>
			<isNotNull prepend="," property="cz_state">CZ_STATE</isNotNull>
			<isNotNull prepend="," property="return_state">RETURN_STATE</isNotNull>
			<isNotNull prepend="," property="return_date">RETURN_DATE</isNotNull>
			<isNotNull prepend="," property="audit_date">AUDIT_DATE</isNotNull>
			<isNotNull prepend="," property="dist_date">DIST_DATE</isNotNull>
			<isNotNull prepend="," property="take_googs_date">TAKE_GOOGS_DATE</isNotNull>
			<isNotNull prepend="," property="cz_date">CZ_DATE</isNotNull>
			<isNotNull prepend="," property="jz_date">JZ_DATE</isNotNull>
			<isNotNull prepend="," property="submit_type">SUBMIT_TYPE</isNotNull>	
			<isNotNull prepend="," property="remit_rec_id">REMIT_REC_ID</isNotNull>	
			<isNotNull prepend="," property="salary_rec_id">SALARY_REC_ID</isNotNull>	
			<isNotNull prepend="," property="pos_bill_sn">POS_BILL_SN</isNotNull>	
			<isNotNull prepend="," property="dist_id">DIST_ID</isNotNull>	
			<isNotNull prepend="," property="checkout_state">CHECKOUT_STATE</isNotNull>	
			<isNotNull prepend="," property="checkout_date">CHECKOUT_DATE</isNotNull>
			<isNotNull prepend="," property="dist_payee">DIST_PAYEE</isNotNull>	
			<isNotNull prepend="," property="dist_payee_id">DIST_PAYEE_ID</isNotNull>	
			<isNotNull prepend="," property="ready_dist_date">READY_DIST_DATE</isNotNull>	
			<isNotNull prepend="," property="sell_bill_head">SELL_BILL_HEAD</isNotNull>	
			<isNotNull prepend="," property="sell_bill_taxpayer_id">SELL_BILL_TAXPAYER_ID</isNotNull>	
			<isNotNull prepend="," property="return_v_date">RETURN_V_DATE</isNotNull>	
			<isNotNull prepend="," property="dist_employee_id">DIST_EMPLOYEE_ID</isNotNull>	
			<isNotNull prepend="," property="checkout_dist_state">CHECKOUT_DIST_STATE</isNotNull>	
			<isNotNull prepend="," property="checkout_dist_date">CHECKOUT_DIST_DATE</isNotNull>	
			<isNotNull prepend="," property="checkout_zmd_state">CHECKOUT_ZMD_STATE</isNotNull>	
			<isNotNull prepend="," property="checkout_zmd_date">CHECKOUT_ZMD_DATE</isNotNull>	
			<isNotNull prepend="," property="audit_user_id">AUDIT_USER_ID</isNotNull>	
			<isNotNull prepend="," property="audit_real_name">AUDIT_REAL_NAME</isNotNull>	
			<isNotNull prepend="," property="dist_user_id">DIST_USER_ID</isNotNull>	
			<isNotNull prepend="," property="dist_real_name">DIST_REAL_NAME</isNotNull>	
			<isNotNull prepend="," property="check_recgoods_user_id">CHECK_RECGOODS_USER_ID</isNotNull>	
			<isNotNull prepend="," property="check_recgoods_real_name">CHECK_RECGOODS_REAL_NAME</isNotNull>	
			<isNotNull prepend="," property="return_v_user_id">RETURN_V_USER_ID</isNotNull>	
			<isNotNull prepend="," property="return_v_real_name">RETURN_V_REAL_NAME</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_state">CHECKOUT_POS_STATE</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_date">CHECKOUT_POS_DATE</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_user_id">CHECKOUT_POS_USER_ID</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_real_name">CHECKOUT_POS_REAL_NAME</isNotNull>
			<isNotNull prepend="," property="pos_id">POS_ID</isNotNull>	
			<isNotNull prepend="," property="order_type">ORDER_TYPE</isNotNull>	
			<isNotNull prepend="," property="stock_from">STOCK_FROM</isNotNull>	
			<isNotNull prepend="," property="area_id">AREA_ID</isNotNull>
			<isNotNull prepend="," property="consumer_grade_num">CONSUMER_GRADE_NUM</isNotNull>	
		</dynamic>
		<![CDATA[) values (]]>
		<dynamic prepend=" ">
			<isNotNull prepend="," property="sell_bill_id">#sell_bill_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">#dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_id">#zmd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_sn">#zmd_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="total_money">#total_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_man">#sell_man:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_remarks">#sell_remarks:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_date">#sell_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="sell_state">#sell_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pay_way">#pay_way:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="money_of_deposit">#money_of_deposit:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_post_p_index">#sell_post_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_post_addr">#sell_post_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_name">#buyer_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_id">#buyer_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_sex">#buyer_sex:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="buyer_birthday">#buyer_birthday:DATETIME#</isNotNull>
			<isNotNull prepend="," property="buyer_tel">#buyer_tel:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_phone">#buyer_phone:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_p_index">#buyer_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="buyer_link_addr">#buyer_link_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="cw_remarks">#cw_remarks:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_memo">#buyer_memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="fee_of_post">#fee_of_post:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_user_realname">#add_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_user_id">#add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">#add_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_bill_state">#js_bill_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_bill_date">#js_bill_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_bill_user_id">#js_bill_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_bill_user_realname">#js_bill_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="js_bill_money">#js_bill_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_state">#js_dist_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_date">#js_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_dist_user_id">#js_dist_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_user_realname">#js_dist_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_rec_name">#sell_rec_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_rec_link_mp">#sell_rec_link_mp:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_bill_type">#sell_bill_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cz_state">#cz_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_state">#return_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_date">#return_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="audit_date">#AUDIT_DATE:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_date">#DIST_DATE:DATETIME#</isNotNull>
			<isNotNull prepend="," property="take_googs_date">#TAKE_GOOGS_DATE:DATETIME#</isNotNull>
			<isNotNull prepend="," property="cz_date">#CZ_DATE:DATETIME#</isNotNull>
			<isNotNull prepend="," property="jz_date">#JZ_DATE:DATETIME#</isNotNull>
			<isNotNull prepend="," property="submit_type">#submit_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="remit_rec_id">#remit_rec_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="salary_rec_id">#salary_rec_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pos_bill_sn">#pos_bill_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_id">#dist_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_state">#checkout_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_date">#checkout_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_payee">#dist_payee:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_payee_id">#dist_payee_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="ready_dist_date">#ready_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="sell_bill_head">#sell_bill_head:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_bill_taxpayer_id">#sell_bill_taxpayer_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="return_v_date">#return_v_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_employee_id">#dist_employee_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_dist_state">#checkout_dist_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_dist_date">#checkout_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="checkout_zmd_state">#checkout_zmd_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_zmd_date">#checkout_zmd_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="audit_user_id">#audit_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_real_name">#audit_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_user_id">#dist_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dist_real_name">#dist_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="check_recgoods_user_id">#check_recgoods_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="check_recgoods_real_name">#check_recgoods_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="return_v_user_id">#return_v_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_v_real_name">#return_v_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="checkout_pos_state">#checkout_pos_state:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_date">#checkout_pos_date:DATETIME#</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_user_id">#checkout_pos_user_id:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_real_name">#checkout_pos_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pos_id">#pos_id:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="order_type">#order_type:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="stock_from">#stock_from:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="area_id">#area_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="consumer_grade_num">#consumer_grade_num:VARCHAR#</isNotNull>
		</dynamic>
		<![CDATA[)]]>
	</insert>

	<update id="updateKonkaXxSellBill" parameterClass="KonkaXxSellBill">
		update KONKA_XX_SELL_BILL
		<dynamic prepend="set">
			<isNotNull prepend="," property="sell_bill_id">SELL_BILL_ID = #sell_bill_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dept_id">DEPT_ID = #dept_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_id">ZMD_ID = #zmd_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="zmd_sn">ZMD_SN = #zmd_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="total_money">TOTAL_MONEY = #total_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_man">SELL_MAN = #sell_man:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_remarks">SELL_REMARKS = #sell_remarks:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_date">SELL_DATE = #sell_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="sell_state">SELL_STATE = #sell_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pay_way">PAY_WAY = #pay_way:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="money_of_deposit">MONEY_OF_DEPOSIT = #money_of_deposit:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_post_p_index">SELL_POST_P_INDEX = #sell_post_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="sell_post_addr">SELL_POST_ADDR = #sell_post_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_name">BUYER_NAME = #buyer_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_id">BUYER_ID = #buyer_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_sex">BUYER_SEX = #buyer_sex:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="buyer_birthday">BUYER_BIRTHDAY = #buyer_birthday:DATETIME#</isNotNull>
			<isNotNull prepend="," property="buyer_tel">BUYER_TEL = #buyer_tel:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_phone">BUYER_PHONE = #buyer_phone:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_p_index">BUYER_P_INDEX = #buyer_p_index:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="buyer_link_addr">BUYER_LINK_ADDR = #buyer_link_addr:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="cw_remarks">CW_REMARKS = #cw_remarks:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="buyer_memo">BUYER_MEMO = #buyer_memo:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="fee_of_post">FEE_OF_POST = #fee_of_post:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_user_realname">ADD_USER_REALNAME = #add_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="add_user_id">ADD_USER_ID = #add_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="add_date">ADD_DATE = #add_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_bill_state">JS_BILL_STATE = #js_bill_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_bill_date">JS_BILL_DATE = #js_bill_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_bill_user_id">JS_BILL_USER_ID = #js_bill_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_bill_user_realname">JS_BILL_USER_REALNAME = #js_bill_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="js_bill_money">JS_BILL_MONEY = #js_bill_money:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_state">JS_DIST_STATE = #js_dist_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_date">JS_DIST_DATE = #js_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="js_dist_user_id">JS_DIST_USER_ID = #js_dist_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="js_dist_user_realname">JS_DIST_USER_REALNAME = #js_dist_user_realname:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_rec_name">SELL_REC_NAME = #sell_rec_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_rec_link_mp">SELL_REC_LINK_MP = #sell_rec_link_mp:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_bill_type">SELL_BILL_TYPE = #sell_bill_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="cz_state">CZ_STATE = #cz_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_state">RETURN_STATE = #return_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_date">RETURN_DATE = #return_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="audit_date">AUDIT_DATE = #audit_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_date">DIST_DATE = #dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="take_googs_date">TAKE_GOOGS_DATE = #take_googs_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="cz_date">CZ_DATE = #cz_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="jz_date">JZ_DATE = #jz_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="submit_type">SUBMIT_TYPE = #submit_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="remit_rec_id">REMIT_REC_ID = #remit_rec_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="salary_rec_id">SALARY_REC_ID = #salary_rec_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="pos_bill_sn">POS_BILL_SN = #pos_bill_sn:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_id">DIST_ID = #dist_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_state">CHECKOUT_STATE = #checkout_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_date">CHECKOUT_DATE = #checkout_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_payee">DIST_PAYEE = #dist_payee:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_payee_id">DIST_PAYEE_ID = #dist_payee_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="ready_dist_date">READY_DIST_DATE = #ready_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="sell_bill_head">SELL_BILL_HEAD = #sell_bill_head:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="sell_bill_taxpayer_id">SELL_BILL_TAXPAYER_ID = #sell_bill_taxpayer_id:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="return_v_date">RETURN_V_DATE = #return_v_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="dist_employee_id">DIST_EMPLOYEE_ID = #dist_employee_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_dist_state">CHECKOUT_DIST_STATE = #checkout_dist_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_dist_date">CHECKOUT_DIST_DATE = #checkout_dist_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="checkout_zmd_state">CHECKOUT_ZMD_STATE = #checkout_zmd_state:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="checkout_zmd_date">CHECKOUT_ZMD_DATE = #checkout_zmd_date:DATETIME#</isNotNull>
			<isNotNull prepend="," property="audit_user_id">AUDIT_USER_ID = #audit_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="audit_real_name">AUDIT_REAL_NAME = #audit_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="dist_user_id">DIST_USER_ID = #dist_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="dist_real_name">DIST_REAL_NAME = #dist_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="check_recgoods_user_id">CHECK_RECGOODS_USER_ID = #check_recgoods_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="check_recgoods_real_name">CHECK_RECGOODS_REAL_NAME = #check_recgoods_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="return_v_user_id">RETURN_V_USER_ID = #return_v_user_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="return_v_real_name">RETURN_V_REAL_NAME = #return_v_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="checkout_pos_state">CHECKOUT_POS_STATE = #checkout_pos_state:DECIMAL#</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_date">CHECKOUT_POS_DATE = #checkout_pos_date:DATETIME#</isNotNull>	
			<isNotNull prepend="," property="checkout_pos_user_id">CHECKOUT_POS_USER_ID = #checkout_pos_user_id:DECIMAL#</isNotNull>	
		    <isNotNull prepend="," property="checkout_pos_real_name">CHECKOUT_POS_REAL_NAME = #checkout_pos_real_name:VARCHAR#</isNotNull>
			<isNotNull prepend="," property="pos_id">POS_ID = #pos_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="order_type">ORDER_TYPE = #order_type:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="stock_from">STOCK_FROM = #stock_from:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="area_id">AREA_ID = #area_id:DECIMAL#</isNotNull>
			<isNotNull prepend="," property="consumer_grade_num">CONSUMER_GRADE_NUM = #consumer_grade_num:VARCHAR#</isNotNull>
			
		</dynamic>
		where
		<isNotEmpty prepend=" " property="sell_bill_id">SELL_BILL_ID = #sell_bill_id#</isNotEmpty>
		<isEmpty prepend=" " property="sell_bill_id">
			<isNotEmpty prepend=" " property="map.pks">
				SELL_BILL_ID in
				<iterate close=")" open="(" conjunction="," property="map.pks">#map.pks[]#</iterate>
			</isNotEmpty>
			<isNotEmpty prepend=" " property="map.pkss">
				SELL_BILL_ID in
				<iterate close=")" open="(" conjunction="," property="map.pkss">#map.pkss[]#</iterate>
			</isNotEmpty>
		</isEmpty>
	</update>

</sqlMap>